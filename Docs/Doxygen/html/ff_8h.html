<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EveApps Project: D:/eclipse-workspace/BridgeTek/EveApps/EveApps/common/application/fatfs/source/ff.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div style="z-index:3; width: 100vw; height: 100px; left: 0px;" > 
  <a href="index.html" ><svg style="z-index:2; height: 80%; width: auto; float: left;"
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:cc="http://creativecommons.org/ns#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:svg="http://www.w3.org/2000/svg"
     xmlns="http://www.w3.org/2000/svg"
     viewBox="0 0 704.8667 213.38667"
     height="213.38667"
     width="704.8667"
     xml:space="preserve"
     id="svg2"
     version="1.1">
    <metadata
       id="metadata8">
      <rdf:RDF>
        <cc:Work
           rdf:about="">
          <dc:format>image/svg+xml</dc:format>
          <dc:type
             rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        </cc:Work>
      </rdf:RDF>
    </metadata>
    <defs
       id="defs6" />
    <g
       transform="matrix(1.3333333,0,0,-1.3333333,0,213.38667)"
       id="g10">
      <g
         transform="scale(0.1)"
         id="g12">
        <path
           id="path14"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="M 783.457,192.039 192.074,783.426 c -9.261,9.258 -9.261,24.285 -0.015,33.527 l 591.382,591.377 c 4.664,4.67 10.688,6.99 16.711,7 v 114.7 c -35.582,-0.01 -71.16,-13.46 -98.05,-40.35 L 110.719,898.293 C 56.8047,844.379 56.7734,756.047 110.734,702.086 L 702.117,110.699 C 729.066,83.75 764.609,70.2813 800.152,70.2813 V 185.129 c -6.047,0.012 -12.097,2.32 -16.695,6.91" />
        <path
           id="path16"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="M 791.809,1281.92 318.488,808.598 c -4.621,-4.621 -4.636,-12.168 -0.015,-16.789 l 473.336,-473.34 c 2.296,-2.297 5.32,-3.438 8.343,-3.438 v 970.349 c -3.023,-0.01 -6.043,-1.16 -8.343,-3.46" />
        <path
           id="path18"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="M 179.672,1059.81 81.3398,1158.14 0,1076.8 l 98.332,-98.331 81.34,81.341" />
        <path
           id="path20"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 327.094,1207.23 -98.332,98.33 -81.34,-81.33 98.332,-98.34 81.34,81.34" />
        <path
           id="path22"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 474.516,1354.65 -98.332,98.33 -81.34,-81.34 98.332,-98.32 81.34,81.33" />
        <path
           id="path24"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 621.922,1502.06 -98.332,98.33 -81.324,-81.32 98.332,-98.34 81.324,81.33" />
        <path
           id="path26"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="M 98.3516,621.934 0,523.59 81.3398,442.25 179.691,540.602 98.3516,621.934" />
        <path
           id="path28"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 245.754,474.531 -98.348,-98.351 81.34,-81.34 98.348,98.351 -81.34,81.34" />
        <path
           id="path30"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 393.191,327.09 -98.347,-98.34 81.34,-81.34 98.347,98.34 -81.34,81.34" />
        <path
           id="path32"
           style="fill:#ed1c24;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="M 442.246,81.3398 523.59,0 621.938,98.3516 540.598,179.691 442.246,81.3398" />
        <path
           id="path34"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 1264.65,213.852 h 9.29 c 16.51,0 22.19,6.199 22.19,26.828 0,20.64 -5.68,26.57 -22.19,26.57 h -9.29 c -1.04,0 -1.54,-0.52 -1.54,-1.551 v -50.301 c 0,-1.027 0.5,-1.546 1.54,-1.546 z m 9.29,77.128 c 15.22,0 20.37,4.641 20.37,23.989 0,19.351 -5.15,24.25 -20.37,24.25 h -9.29 c -1.04,0 -1.54,-0.52 -1.54,-1.559 v -45.129 c 0,-1.031 0.5,-1.551 1.54,-1.551 z m -38.42,70.68 c 0,1.551 1.01,2.57 2.58,2.57 h 38.41 c 31.48,0 45.41,-14.191 45.41,-45.378 0,-21.672 -7.47,-32.25 -20.36,-37.93 v -0.524 c 13.15,-3.859 22.44,-16.757 22.44,-39.976 0,-38.953 -17.04,-51.582 -51.1,-51.582 h -34.8 c -1.57,0 -2.58,1.031 -2.58,2.57 v 170.25" />
        <path
           id="path36"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 1482.31,312.129 c 0,20.641 -6.72,27.09 -22.19,27.09 h -9.04 c -1.03,0 -1.54,-0.52 -1.54,-1.559 v -51.058 c 0,-1.043 0.51,-1.551 1.54,-1.551 h 9.04 c 15.47,0 22.19,6.187 22.19,27.078 z m 6.18,-123.289 c -1.54,0 -2.32,0.512 -2.83,1.801 l -21.43,69.91 h -4.36 -8.79 c -1.03,0 -1.54,-0.52 -1.54,-1.551 v -67.59 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -22.44 c -1.57,0 -2.58,1.031 -2.58,2.57 v 170.25 c 0,1.551 1.01,2.57 2.58,2.57 h 35.34 c 31.19,0 50.03,-13.671 50.03,-52.101 0,-22.957 -7.73,-37.391 -20.91,-44.879 l 24.77,-75.84 c 0.53,-1.289 0,-2.57 -1.29,-2.57 h -23.98" />
        <path
           id="path38"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 1610.71,361.66 c 0,1.551 1,2.57 2.57,2.57 h 22.44 c 1.54,0 2.58,-1.019 2.58,-2.57 V 191.41 c 0,-1.539 -1.04,-2.57 -2.58,-2.57 h -22.44 c -1.57,0 -2.57,1.031 -2.57,2.57 v 170.25" />
        <path
           id="path40"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 1771.09,213.852 h 11.11 c 9.79,0 15.47,3.878 18.55,12.648 2.07,6.449 3.1,14.949 3.1,50.039 0,35.07 -1.03,43.59 -3.1,50.043 -3.08,8.77 -8.76,12.637 -18.55,12.637 h -11.11 c -1.04,0 -1.54,-0.52 -1.54,-1.559 V 215.398 c 0,-1.027 0.5,-1.546 1.54,-1.546 z m -29.13,147.808 c 0,1.551 1.01,2.57 2.58,2.57 h 40.48 c 22.97,0 36.38,-9.281 42.56,-28.109 3.11,-9.539 4.39,-21.422 4.39,-59.582 0,-38.18 -1.28,-50.039 -4.39,-59.578 -6.18,-18.832 -19.59,-28.121 -42.56,-28.121 h -40.48 c -1.57,0 -2.58,1.031 -2.58,2.57 v 170.25" />
        <path
           id="path42"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 1929.43,276.539 c 0,48.742 0.78,54.941 3.36,62.68 5.68,17.269 19.86,27.332 41.52,27.332 25.26,0 40.77,-13.403 43.59,-41 0.25,-1.563 -0.78,-2.84 -2.07,-3.09 l -20.87,-3.609 c -1.57,-0.274 -2.6,0.5 -2.86,2.046 -1.28,13.672 -7.21,20.641 -17.54,20.641 -7.47,0 -13.4,-3.879 -15.22,-9.809 -1.54,-4.902 -1.79,-6.949 -1.79,-55.191 0,-48.238 0.25,-50.309 1.79,-55.199 1.82,-5.942 8.25,-9.801 15.47,-9.801 7.5,0 13.94,3.859 15.76,9.801 1.28,4.39 1.79,6.961 1.79,39.461 0,1.039 -0.51,1.551 -1.54,1.551 h -13.69 c -1.53,0 -2.57,1.027 -2.57,2.578 v 19.082 c 0,1.547 1.04,2.59 2.57,2.59 h 39.23 c 1.54,0 2.58,-1.043 2.58,-2.59 v -7.742 c 0,-48.489 -0.79,-54.668 -3.36,-62.418 -5.68,-17.282 -19.87,-27.34 -41.27,-27.34 -21.66,0 -35.84,10.058 -41.52,27.34 -2.58,7.75 -3.36,13.929 -3.36,62.687" />
        <path
           id="path44"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 2118.71,361.66 c 0,1.551 1.01,2.57 2.58,2.57 h 22.44 c 1.54,0 2.57,-1.019 2.57,-2.57 V 191.41 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -22.44 c -1.57,0 -2.58,1.031 -2.58,2.57 v 170.25" />
        <path
           id="path46"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 2249.97,361.66 c 0,1.551 1.01,2.57 2.57,2.57 h 27.34 c 2.07,0 3.11,-0.769 3.61,-2.57 L 2316,240.422 h 1.29 V 361.66 c 0,1.551 1.03,2.57 2.57,2.57 h 19.09 c 1.53,0 2.57,-1.019 2.57,-2.57 V 191.41 c 0,-1.539 -1.04,-2.57 -2.57,-2.57 h -25.55 c -2.04,0 -3.08,0.769 -3.61,2.57 l -34.05,121.238 h -1.54 V 191.41 c 0,-1.539 -1.04,-2.57 -2.57,-2.57 h -19.09 c -1.56,0 -2.57,1.031 -2.57,2.57 v 170.25" />
        <path
           id="path48"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 2442.08,276.539 c 0,48.742 0.78,54.941 3.36,62.68 5.68,17.269 19.86,27.332 41.52,27.332 25.27,0 40.77,-13.403 43.59,-41 0.25,-1.563 -0.78,-2.84 -2.07,-3.09 l -20.87,-3.609 c -1.57,-0.274 -2.6,0.5 -2.85,2.046 -1.29,13.672 -7.22,20.641 -17.55,20.641 -7.47,0 -13.4,-3.879 -15.22,-9.809 -1.54,-4.902 -1.79,-6.949 -1.79,-55.191 0,-48.238 0.25,-50.309 1.79,-55.199 1.82,-5.942 8.25,-9.801 15.47,-9.801 7.5,0 13.94,3.859 15.76,9.801 1.28,4.39 1.79,6.961 1.79,39.461 0,1.039 -0.51,1.551 -1.54,1.551 h -13.68 c -1.54,0 -2.58,1.027 -2.58,2.578 v 19.082 c 0,1.547 1.04,2.59 2.58,2.59 h 39.22 c 1.54,0 2.58,-1.043 2.58,-2.59 v -7.742 c 0,-48.489 -0.79,-54.668 -3.36,-62.418 -5.68,-17.282 -19.87,-27.34 -41.27,-27.34 -21.66,0 -35.84,10.058 -41.52,27.34 -2.58,7.75 -3.36,13.929 -3.36,62.687" />
        <path
           id="path50"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 3596.01,188.84 c -1.54,0 -2.58,1.031 -2.58,2.57 v 146.25 c 0,1.039 -0.5,1.559 -1.54,1.559 h -26.83 c -1.54,0 -2.57,1.031 -2.57,2.57 v 19.871 c 0,1.551 1.03,2.57 2.57,2.57 h 84.36 c 1.54,0 2.58,-1.019 2.58,-2.57 v -19.871 c 0,-1.539 -1.04,-2.57 -2.58,-2.57 h -26.83 c -1.04,0 -1.54,-0.52 -1.54,-1.559 V 191.41 c 0,-1.539 -1.04,-2.57 -2.57,-2.57 h -22.47" />
        <path
           id="path52"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 3745.59,361.66 c 0,1.551 1.01,2.57 2.57,2.57 h 71.97 c 1.54,0 2.57,-1.019 2.57,-2.57 v -19.871 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -45.41 c -1.04,0 -1.54,-0.52 -1.54,-1.559 V 291.5 c 0,-1.039 0.5,-1.559 1.54,-1.559 h 39.22 c 1.54,0 2.58,-1.019 2.58,-2.57 V 267.5 c 0,-1.539 -1.04,-2.57 -2.58,-2.57 h -39.22 c -1.04,0 -1.54,-0.52 -1.54,-1.551 v -47.981 c 0,-1.027 0.5,-1.546 1.54,-1.546 h 45.41 c 1.54,0 2.57,-1.02 2.57,-2.571 V 191.41 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -71.97 c -1.56,0 -2.57,1.031 -2.57,2.57 v 170.25" />
        <path
           id="path54"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 3917.05,276.539 c 0,48.742 1.04,55.973 3.36,63.191 5.4,16.758 18.3,26.821 39.73,26.821 25.01,0 40.74,-12.879 42.28,-42.039 0.28,-1.551 -0.25,-2.84 -1.79,-3.09 l -20.9,-3.613 c -1.54,-0.27 -2.83,0.523 -2.83,2.32 -0.78,14.961 -5.93,21.41 -16,21.41 -7.73,0 -11.87,-3.359 -13.94,-9.809 -1.29,-4.128 -1.79,-7.742 -1.79,-55.191 0,-47.469 0.5,-51.078 1.79,-55.199 2.07,-6.449 6.21,-9.801 13.94,-9.801 10.07,0 15.22,6.441 16,21.41 0,1.801 1.29,2.571 2.83,2.321 l 20.9,-3.61 c 1.54,-0.269 2.07,-1.551 1.79,-3.109 -1.54,-29.141 -17.27,-42.039 -42.28,-42.039 -21.43,0 -34.33,10.058 -39.73,26.84 -2.32,7.218 -3.36,14.429 -3.36,63.187" />
        <path
           id="path56"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 4096.29,361.66 c 0,1.551 1.01,2.57 2.58,2.57 h 22.44 c 1.53,0 2.57,-1.019 2.57,-2.57 v -69.129 c 0,-1.031 0.5,-1.551 1.54,-1.551 h 29.66 c 1.03,0 1.56,0.52 1.56,1.551 v 69.129 c 0,1.551 1.04,2.57 2.58,2.57 h 22.44 c 1.54,0 2.57,-1.019 2.57,-2.57 V 191.41 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -22.44 c -1.54,0 -2.58,1.031 -2.58,2.57 v 73 c 0,1.039 -0.53,1.551 -1.56,1.551 h -29.66 c -1.04,0 -1.54,-0.512 -1.54,-1.551 v -73 c 0,-1.539 -1.04,-2.57 -2.57,-2.57 h -22.44 c -1.57,0 -2.58,1.031 -2.58,2.57 v 170.25" />
        <path
           id="path58"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 4287.87,361.66 c 0,1.551 1.01,2.57 2.58,2.57 h 27.33 c 2.07,0 3.11,-0.769 3.61,-2.57 l 32.51,-121.238 h 1.29 V 361.66 c 0,1.551 1.04,2.57 2.58,2.57 h 19.08 c 1.54,0 2.57,-1.019 2.57,-2.57 V 191.41 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -25.55 c -2.04,0 -3.08,0.769 -3.61,2.57 l -34.05,121.238 h -1.54 V 191.41 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -19.08 c -1.57,0 -2.58,1.031 -2.58,2.57 v 170.25" />
        <path
           id="path60"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 4539.55,221.34 c 1.57,4.89 1.82,6.961 1.82,55.199 0,48.242 -0.25,50.289 -1.82,55.191 -1.79,5.93 -7.47,9.809 -14.69,9.809 -7.47,0 -13.15,-3.879 -14.97,-9.809 -1.54,-4.902 -1.79,-6.949 -1.79,-55.191 0,-48.238 0.25,-50.309 1.79,-55.199 1.82,-5.942 7.5,-9.801 14.97,-9.801 7.22,0 12.9,3.859 14.69,9.801 z m -56.21,-7.488 c -2.57,7.75 -3.36,13.929 -3.36,62.687 0,48.742 0.79,54.941 3.36,62.68 5.68,17.269 19.87,27.332 41.52,27.332 21.41,0 35.59,-10.063 41.27,-27.332 2.58,-7.739 3.36,-13.938 3.36,-62.68 0,-48.758 -0.78,-54.937 -3.36,-62.687 -5.68,-17.282 -19.86,-27.34 -41.27,-27.34 -21.65,0 -35.84,10.058 -41.52,27.34" />
        <path
           id="path62"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 4670.05,361.66 c 0,1.551 1.01,2.57 2.58,2.57 h 22.44 c 1.53,0 2.57,-1.019 2.57,-2.57 V 215.398 c 0,-1.027 0.5,-1.546 1.54,-1.546 h 45.41 c 1.54,0 2.57,-1.02 2.57,-2.571 V 191.41 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -71.96 c -1.57,0 -2.58,1.031 -2.58,2.57 v 170.25" />
        <path
           id="path64"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 4892.6,221.34 c 1.54,4.89 1.8,6.961 1.8,55.199 0,48.242 -0.26,50.289 -1.8,55.191 -1.81,5.93 -7.49,9.809 -14.71,9.809 -7.47,0 -13.15,-3.879 -14.97,-9.809 -1.54,-4.902 -1.79,-6.949 -1.79,-55.191 0,-48.238 0.25,-50.309 1.79,-55.199 1.82,-5.942 7.5,-9.801 14.97,-9.801 7.22,0 12.9,3.859 14.71,9.801 z m -56.23,-7.488 c -2.58,7.75 -3.36,13.929 -3.36,62.687 0,48.742 0.78,54.941 3.36,62.68 5.67,17.269 19.86,27.332 41.52,27.332 21.4,0 35.59,-10.063 41.27,-27.332 2.57,-7.739 3.36,-13.938 3.36,-62.68 0,-48.758 -0.79,-54.937 -3.36,-62.687 -5.68,-17.282 -19.87,-27.34 -41.27,-27.34 -21.66,0 -35.85,10.058 -41.52,27.34" />
        <path
           id="path66"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 5019.97,276.539 c 0,48.742 0.78,54.941 3.36,62.68 5.68,17.269 19.86,27.332 41.52,27.332 25.27,0 40.77,-13.403 43.59,-41 0.26,-1.563 -0.78,-2.84 -2.07,-3.09 l -20.87,-3.609 c -1.57,-0.274 -2.6,0.5 -2.85,2.046 -1.29,13.672 -7.22,20.641 -17.55,20.641 -7.47,0 -13.4,-3.879 -15.22,-9.809 -1.54,-4.902 -1.79,-6.949 -1.79,-55.191 0,-48.238 0.25,-50.309 1.79,-55.199 1.82,-5.942 8.26,-9.801 15.47,-9.801 7.5,0 13.94,3.859 15.76,9.801 1.28,4.39 1.79,6.961 1.79,39.461 0,1.039 -0.51,1.551 -1.54,1.551 h -13.68 c -1.54,0 -2.58,1.027 -2.58,2.578 v 19.082 c 0,1.547 1.04,2.59 2.58,2.59 h 39.22 c 1.54,0 2.58,-1.043 2.58,-2.59 v -7.742 c 0,-48.489 -0.78,-54.668 -3.36,-62.418 -5.68,-17.282 -19.86,-27.34 -41.27,-27.34 -21.66,0 -35.84,10.058 -41.52,27.34 -2.58,7.75 -3.36,13.929 -3.36,62.687" />
        <path
           id="path68"
           style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 5227.81,188.84 c -1.57,0 -2.58,1.031 -2.58,2.57 v 69.391 l -33.55,100.859 c -0.5,1.551 0,2.57 2.07,2.57 h 22.7 c 1.82,0 2.57,-0.769 3.1,-2.57 l 19.59,-67.84 h 0.78 l 19.08,67.84 c 0.54,1.801 1.29,2.57 3.11,2.57 h 22.19 c 2.04,0 2.57,-1.019 2.04,-2.57 L 5252.82,260.801 V 191.41 c 0,-1.539 -1.03,-2.57 -2.57,-2.57 h -22.44" />
        <path
           id="path70"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 1413.48,632.223 h 53.35 c 44.63,0 55.52,13.054 55.52,72.929 v 58.786 c 0,58.789 -13.07,71.855 -55.52,71.855 h -53.35 z m 0,332.027 h 43.56 c 52.24,0 58.76,17.418 58.76,69.67 v 47.89 c 0,51.16 -6.52,68.59 -58.76,68.59 h -43.56 z m -180.7,321.13 h 266.71 c 156.74,0 197.03,-32.66 197.03,-190.5 0,-103.419 -7.61,-168.739 -117.57,-187.247 v -2.168 c 112.12,-8.719 130.64,-88.184 130.64,-183.985 0,-165.46 -38.11,-224.25 -180.72,-224.25 h -296.09 v 788.15" />
        <path
           id="path72"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 1809.81,1052.41 h 154.57 v -55.508 h 2.18 c 21.77,51.158 47.9,64.228 109.96,64.228 57.69,0 93.62,-14.16 94.68,-82.735 V 828.168 h -134.97 v 82.738 c 0,17.414 -15.25,21.766 -32.65,21.766 -18.53,0 -32.66,-6.531 -32.66,-29.391 V 497.23 h -161.11 v 555.18" />
        <path
           id="path74"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 2233.32,1052.41 h 161.11 V 497.23 h -161.11 z m 0,232.97 h 161.11 v -128.46 h -161.11 v 128.46" />
        <path
           id="path76"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 2664.41,647.457 c 0,-20.676 13.07,-30.484 37.02,-30.484 23.95,0 37.02,9.808 37.02,30.484 v 254.731 c 0,20.691 -13.07,30.484 -37.02,30.484 -23.95,0 -37.02,-9.793 -37.02,-30.484 z M 2496.78,949 c 0,86 52.24,112.13 120.82,112.13 57.69,0 92.53,-20.69 118.66,-57.7 h 2.19 v 281.95 h 161.1 V 497.23 h -153.49 v 57.7 h -2.19 c -31.56,-57.7 -59.87,-66.399 -117.57,-66.399 -97.96,0 -129.52,38.098 -129.52,151.305 V 949" />
        <path
           id="path78"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 3163.07,640.926 c 0,-23.953 10.89,-32.653 40.26,-32.653 29.41,0 40.3,8.7 40.3,32.653 v 265.629 c 0,23.937 -10.89,32.652 -40.3,32.652 -29.37,0 -40.26,-8.715 -40.26,-32.652 z m -161.11,274.332 c 0,95.802 42.45,145.872 117.55,145.872 63.15,0 99.07,-13.07 133.91,-59.88 h 2.18 v 51.16 h 149.14 V 448.238 c 0,-126.269 -70.77,-155.668 -217.72,-155.668 -127.36,0 -167.65,50.09 -167.65,123.02 v 29.39 h 141.52 V 433 c 0,-17.41 11.97,-25.039 41.35,-25.039 29.41,0 41.39,7.629 41.39,37.019 v 99.059 h -2.19 c -25.04,-33.738 -62.06,-51.16 -109.96,-51.16 -101.23,0 -129.52,62.051 -129.52,136.07 v 286.309" />
        <path
           id="path80"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 3663.89,837.961 h 89.25 v 81.644 c 0,22.86 -7.61,32.668 -44.62,32.668 -37.02,0 -44.63,-9.808 -44.63,-32.668 z m -167.63,46.809 c 0,149.15 74.01,176.36 212.26,176.36 176.35,0 212.28,-66.411 212.28,-153.497 V 735.637 h -256.91 v -93.621 c 0,-29.395 6.54,-38.094 47.9,-38.094 31.56,0 45.72,6.519 45.72,39.183 v 26.122 h 163.29 v -31.563 c 0,-116.484 -48.99,-149.133 -212.28,-149.133 -138.25,0 -212.26,27.207 -212.26,176.344 V 884.77" />
        <path
           id="path82"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 3986.19,1052.41 h 45.72 v 144.79 h 161.11 v -144.79 h 93.62 V 930.492 h -93.62 V 652.898 c 0,-28.3 6.52,-42.457 41.35,-42.457 14.16,0 28.32,2.18 41.39,3.274 V 492.879 c -30.47,-1.09 -68.58,-4.348 -102.33,-4.348 -97.98,0 -141.52,37 -141.52,121.91 v 320.051 h -45.72 v 121.918" />
        <path
           id="path84"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 4512.02,837.961 h 89.26 v 81.644 c 0,22.86 -7.61,32.668 -44.63,32.668 -37.02,0 -44.63,-9.808 -44.63,-32.668 z m -167.63,46.809 c 0,149.15 74.01,176.36 212.26,176.36 176.36,0 212.28,-66.411 212.28,-153.497 V 735.637 h -256.91 v -93.621 c 0,-29.395 6.55,-38.094 47.9,-38.094 31.56,0 45.72,6.519 45.72,39.183 v 26.122 h 163.29 v -31.563 c 0,-116.484 -48.99,-149.133 -212.28,-149.133 -138.25,0 -212.26,27.207 -212.26,176.344 V 884.77" />
        <path
           id="path86"
           style="fill:#0A25F3;fill-opacity:1;fill-rule:nonzero;stroke:none"
           d="m 4860.46,1285.38 h 161.11 V 848.844 h 2.18 l 72.91,203.566 h 158.96 L 5172.88,808.566 5281.72,497.23 h -171.99 l -85.98,274.333 h -2.18 V 497.23 h -161.11 v 788.15" />
      </g>
    </g>
  </svg></a>
  </br>
  <div style="float: left; height: 100%;">  
    <div style="float: left; margin-left: 50px; font-family: 'Fugaz One', cursive;overflow: hidden; font-size: 20px;">
    Brteve's API for EveApps
    </div>  
    <div style="padding-top:10px; float: left; margin-left: 50px; font-family: 'Fugaz One', cursive;overflow: hidden; font-size: 12px;">
    Version 0.0.1
    </div>
    <div style="padding-top:10px; clear: both; margin-left: 50px; font-size: 14px;">
    This folder contains the necessary files to use Eve device.</br>
    </div>
  </div>
</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ff_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ff.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ffconf_8h_source.html">ffconf.h</a>&quot;</code><br />
</div>
<p><a href="ff_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_f_o_b_j_i_d.html">FFOBJID</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_l.html">FIL</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_d_i_r.html">DIR</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_k_f_s___p_a_r_m.html">MKFS_PARM</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a67f86fd50a009422bed52a85b7a28a77" id="r_a67f86fd50a009422bed52a85b7a28a77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a67f86fd50a009422bed52a85b7a28a77">FF_DEFINED</a>&#160;&#160;&#160;86631	/* Revision ID */</td></tr>
<tr class="separator:a67f86fd50a009422bed52a85b7a28a77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eb7cbd9d1d0548d54856f1cc8a2021f" id="r_a3eb7cbd9d1d0548d54856f1cc8a2021f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3eb7cbd9d1d0548d54856f1cc8a2021f">FF_INTDEF</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a3eb7cbd9d1d0548d54856f1cc8a2021f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae936e4c15227768f7da4e0951def89c8" id="r_ae936e4c15227768f7da4e0951def89c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae936e4c15227768f7da4e0951def89c8">_T</a>(x)&#160;&#160;&#160;x</td></tr>
<tr class="separator:ae936e4c15227768f7da4e0951def89c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3232964568d17bb4a1af30f9db826ce2" id="r_a3232964568d17bb4a1af30f9db826ce2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3232964568d17bb4a1af30f9db826ce2">_TEXT</a>(x)&#160;&#160;&#160;x</td></tr>
<tr class="separator:a3232964568d17bb4a1af30f9db826ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970cdd8970a3a94967ad64cfc5d4c161" id="r_a970cdd8970a3a94967ad64cfc5d4c161"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a970cdd8970a3a94967ad64cfc5d4c161">f_eof</a>(<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)&#160;&#160;&#160;((int)((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;fptr == (<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;obj.objsize))</td></tr>
<tr class="separator:a970cdd8970a3a94967ad64cfc5d4c161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25cbdabeed318802cf0e9db6671a33b7" id="r_a25cbdabeed318802cf0e9db6671a33b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a25cbdabeed318802cf0e9db6671a33b7">f_error</a>(<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)&#160;&#160;&#160;((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;err)</td></tr>
<tr class="separator:a25cbdabeed318802cf0e9db6671a33b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e1daca7ce13cdc277e42185f7f9124f" id="r_a5e1daca7ce13cdc277e42185f7f9124f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a5e1daca7ce13cdc277e42185f7f9124f">f_tell</a>(<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)&#160;&#160;&#160;((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;fptr)</td></tr>
<tr class="separator:a5e1daca7ce13cdc277e42185f7f9124f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f33722c5bf1aa3cd6f0290a83eb2bc" id="r_a26f33722c5bf1aa3cd6f0290a83eb2bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a26f33722c5bf1aa3cd6f0290a83eb2bc">f_size</a>(<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)&#160;&#160;&#160;((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;obj.objsize)</td></tr>
<tr class="separator:a26f33722c5bf1aa3cd6f0290a83eb2bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4caf47dd5cbc123b61d35542481b1be" id="r_ae4caf47dd5cbc123b61d35542481b1be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae4caf47dd5cbc123b61d35542481b1be">f_rewind</a>(<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)&#160;&#160;&#160;<a class="el" href="ff_8c.html#a7c4bcf81d9122f0b5376852ec6a8c3eb">f_lseek</a>((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>), 0)</td></tr>
<tr class="separator:ae4caf47dd5cbc123b61d35542481b1be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f92b6c0c1648de678283ab6f1610161" id="r_a3f92b6c0c1648de678283ab6f1610161"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3f92b6c0c1648de678283ab6f1610161">f_rewinddir</a>(dp)&#160;&#160;&#160;<a class="el" href="ff_8c.html#ab39e82a110695de45f416f3149358012">f_readdir</a>((dp), 0)</td></tr>
<tr class="separator:a3f92b6c0c1648de678283ab6f1610161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58df56d084ad3dd9f8cd49b245a7a7ca" id="r_a58df56d084ad3dd9f8cd49b245a7a7ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a58df56d084ad3dd9f8cd49b245a7a7ca">f_rmdir</a>(path)&#160;&#160;&#160;<a class="el" href="ff_8c.html#a2858167fcd0bced48e9be434b3895efe">f_unlink</a>(path)</td></tr>
<tr class="separator:a58df56d084ad3dd9f8cd49b245a7a7ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22c4b32404b35d0a0bd138fa63f2e75" id="r_aa22c4b32404b35d0a0bd138fa63f2e75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aa22c4b32404b35d0a0bd138fa63f2e75">f_unmount</a>(path)&#160;&#160;&#160;<a class="el" href="ff_8c.html#a16a934c2bbfa2160295810adc49d5509">f_mount</a>(0, path, 0)</td></tr>
<tr class="separator:aa22c4b32404b35d0a0bd138fa63f2e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f4f3530ff03abbd979b072536e72290" id="r_a1f4f3530ff03abbd979b072536e72290"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a1f4f3530ff03abbd979b072536e72290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa366963220c89b882c0361794020c14" id="r_afa366963220c89b882c0361794020c14"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:afa366963220c89b882c0361794020c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5dd686b10f84c2a2b3954957a5979a" id="r_a0c5dd686b10f84c2a2b3954957a5979a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a0c5dd686b10f84c2a2b3954957a5979a">FA_OPEN_EXISTING</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a0c5dd686b10f84c2a2b3954957a5979a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417bb1babd1785fd181a806b5613eba3" id="r_a417bb1babd1785fd181a806b5613eba3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:a417bb1babd1785fd181a806b5613eba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba4546b131dea4b24727fa20a80e29f" id="r_afba4546b131dea4b24727fa20a80e29f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:afba4546b131dea4b24727fa20a80e29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b01553029920ac0468912b4bcb16c7" id="r_a17b01553029920ac0468912b4bcb16c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="separator:a17b01553029920ac0468912b4bcb16c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90f135b2ae90fba5080f6bd2b6c57b8a" id="r_a90f135b2ae90fba5080f6bd2b6c57b8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a90f135b2ae90fba5080f6bd2b6c57b8a">FA_OPEN_APPEND</a>&#160;&#160;&#160;0x30</td></tr>
<tr class="separator:a90f135b2ae90fba5080f6bd2b6c57b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee297a9011164cf485a4df2a72758b08" id="r_aee297a9011164cf485a4df2a72758b08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a>&#160;&#160;&#160;((<a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a>)0 - 1)</td></tr>
<tr class="separator:aee297a9011164cf485a4df2a72758b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd205b7d09147e55169d3713f46e9ea" id="r_a8bd205b7d09147e55169d3713f46e9ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a8bd205b7d09147e55169d3713f46e9ea">FM_FAT</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a8bd205b7d09147e55169d3713f46e9ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff61d3ed8f8c6ea5c25c3cb366320e08" id="r_aff61d3ed8f8c6ea5c25c3cb366320e08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aff61d3ed8f8c6ea5c25c3cb366320e08">FM_FAT32</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:aff61d3ed8f8c6ea5c25c3cb366320e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9348c28116bc29e88195b23f6945f81d" id="r_a9348c28116bc29e88195b23f6945f81d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a9348c28116bc29e88195b23f6945f81d">FM_EXFAT</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:a9348c28116bc29e88195b23f6945f81d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701ab2eee8c2d9b5b445aadc8f14df4d" id="r_a701ab2eee8c2d9b5b445aadc8f14df4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a701ab2eee8c2d9b5b445aadc8f14df4d">FM_ANY</a>&#160;&#160;&#160;0x07</td></tr>
<tr class="separator:a701ab2eee8c2d9b5b445aadc8f14df4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b3d16ac135fe57669fc8a93dfa0c0a5" id="r_a3b3d16ac135fe57669fc8a93dfa0c0a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3b3d16ac135fe57669fc8a93dfa0c0a5">FM_SFD</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:a3b3d16ac135fe57669fc8a93dfa0c0a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab755aa1b4f81f4aabee4a5d4738cfb0" id="r_aab755aa1b4f81f4aabee4a5d4738cfb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aab755aa1b4f81f4aabee4a5d4738cfb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef90a36d99edfc0138a2155a17a79b9" id="r_a7ef90a36d99edfc0138a2155a17a79b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a7ef90a36d99edfc0138a2155a17a79b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac63e0796095a789cefdbc3c3c676c9ce" id="r_ac63e0796095a789cefdbc3c3c676c9ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ac63e0796095a789cefdbc3c3c676c9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50bfa912e87473bc54333523983f39f6" id="r_a50bfa912e87473bc54333523983f39f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a50bfa912e87473bc54333523983f39f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add6d85d1e7a02b4f6188783ef91a5f1e" id="r_add6d85d1e7a02b4f6188783ef91a5f1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>&#160;&#160;&#160;0x01	/* Read only */</td></tr>
<tr class="separator:add6d85d1e7a02b4f6188783ef91a5f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90c4c921c1955fd407d8bbf17f1674e" id="r_aa90c4c921c1955fd407d8bbf17f1674e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aa90c4c921c1955fd407d8bbf17f1674e">AM_HID</a>&#160;&#160;&#160;0x02	/* Hidden */</td></tr>
<tr class="separator:aa90c4c921c1955fd407d8bbf17f1674e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f25d5c17b5a3a6397b3398add8cdc15" id="r_a1f25d5c17b5a3a6397b3398add8cdc15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a1f25d5c17b5a3a6397b3398add8cdc15">AM_SYS</a>&#160;&#160;&#160;0x04	/* System */</td></tr>
<tr class="separator:a1f25d5c17b5a3a6397b3398add8cdc15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9db44e978ed6c13b641e092d4cd7d3" id="r_a3a9db44e978ed6c13b641e092d4cd7d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>&#160;&#160;&#160;0x10	/* Directory */</td></tr>
<tr class="separator:a3a9db44e978ed6c13b641e092d4cd7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8174d00798e34e7c9e95898cb9e1a09" id="r_ae8174d00798e34e7c9e95898cb9e1a09"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>&#160;&#160;&#160;0x20	/* Archive */</td></tr>
<tr class="separator:ae8174d00798e34e7c9e95898cb9e1a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a36cb3b01d81ffd844bbbfb54003e06ec" id="r_a36cb3b01d81ffd844bbbfb54003e06ec"><td class="memItemLeft" align="right" valign="top">typedef unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></td></tr>
<tr class="separator:a36cb3b01d81ffd844bbbfb54003e06ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ae1dab0fb4b072a66584546209e7d58" id="r_a4ae1dab0fb4b072a66584546209e7d58"><td class="memItemLeft" align="right" valign="top">typedef unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a></td></tr>
<tr class="separator:a4ae1dab0fb4b072a66584546209e7d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a197942eefa7db30960ae396d68339b97" id="r_a197942eefa7db30960ae396d68339b97"><td class="memItemLeft" align="right" valign="top">typedef unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a></td></tr>
<tr class="separator:a197942eefa7db30960ae396d68339b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad342ac907eb044443153a22f964bf0af" id="r_ad342ac907eb044443153a22f964bf0af"><td class="memItemLeft" align="right" valign="top">typedef unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></td></tr>
<tr class="separator:ad342ac907eb044443153a22f964bf0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb095da65fbe52192dd9e3e643c7568" id="r_a0bb095da65fbe52192dd9e3e643c7568"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a></td></tr>
<tr class="separator:a0bb095da65fbe52192dd9e3e643c7568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fc0992ad7436250b6b1a0592214b7f2" id="r_a3fc0992ad7436250b6b1a0592214b7f2"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a></td></tr>
<tr class="separator:a3fc0992ad7436250b6b1a0592214b7f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3c30a83148a28340f009d4e583f087" id="r_a1f3c30a83148a28340f009d4e583f087"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a></td></tr>
<tr class="separator:a1f3c30a83148a28340f009d4e583f087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03bdb8ce5895c7e261aadc2529637546" id="r_a03bdb8ce5895c7e261aadc2529637546"><td class="memItemLeft" align="right" valign="top">typedef char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></td></tr>
<tr class="separator:a03bdb8ce5895c7e261aadc2529637546"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a49d0171ecbd362cda5680a0d360db44c" id="r_a49d0171ecbd362cda5680a0d360db44c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> { <br />
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> = 0
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45">FR_NOT_READY</a>
, <br />
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>
, <br />
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b">FR_WRITE_PROTECTED</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>
, <br />
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d">FR_NOT_ENABLED</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463">FR_NO_FILESYSTEM</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca">FR_MKFS_ABORTED</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4">FR_TIMEOUT</a>
, <br />
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7">FR_LOCKED</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>
, <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6">FR_INVALID_PARAMETER</a>
<br />
 }</td></tr>
<tr class="separator:a49d0171ecbd362cda5680a0d360db44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aefdef7126128d99d0b3bd82c28e54d80" id="r_aefdef7126128d99d0b3bd82c28e54d80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aefdef7126128d99d0b3bd82c28e54d80">f_open</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> mode)</td></tr>
<tr class="separator:aefdef7126128d99d0b3bd82c28e54d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53882db20ef4323dcfd1874d7733ffc3" id="r_a53882db20ef4323dcfd1874d7733ffc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a53882db20ef4323dcfd1874d7733ffc3">f_close</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)</td></tr>
<tr class="separator:a53882db20ef4323dcfd1874d7733ffc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4c3dcb6869ca252888eebabe39727b3" id="r_ac4c3dcb6869ca252888eebabe39727b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, void *buff, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btr, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *br)</td></tr>
<tr class="separator:ac4c3dcb6869ca252888eebabe39727b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a4dfae8a9e308bdb2283a37ef680f2" id="r_ae6a4dfae8a9e308bdb2283a37ef680f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae6a4dfae8a9e308bdb2283a37ef680f2">f_write</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, const void *buff, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btw, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *bw)</td></tr>
<tr class="separator:ae6a4dfae8a9e308bdb2283a37ef680f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4bcf81d9122f0b5376852ec6a8c3eb" id="r_a7c4bcf81d9122f0b5376852ec6a8c3eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a7c4bcf81d9122f0b5376852ec6a8c3eb">f_lseek</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, <a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a> ofs)</td></tr>
<tr class="separator:a7c4bcf81d9122f0b5376852ec6a8c3eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a691a27b40c348f7c84b42e911636f38a" id="r_a691a27b40c348f7c84b42e911636f38a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a691a27b40c348f7c84b42e911636f38a">f_truncate</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)</td></tr>
<tr class="separator:a691a27b40c348f7c84b42e911636f38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad69c7246b122ba56a134939ee0eaf847" id="r_ad69c7246b122ba56a134939ee0eaf847"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)</td></tr>
<tr class="separator:ad69c7246b122ba56a134939ee0eaf847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab63b213c75f7335fbb63a1f3f70e5fc7" id="r_ab63b213c75f7335fbb63a1f3f70e5fc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ab63b213c75f7335fbb63a1f3f70e5fc7">f_opendir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *dp, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:ab63b213c75f7335fbb63a1f3f70e5fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5f7376b6f3e3bcc7f5ff5497c8b7364" id="r_ab5f7376b6f3e3bcc7f5ff5497c8b7364"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ab5f7376b6f3e3bcc7f5ff5497c8b7364">f_closedir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *dp)</td></tr>
<tr class="separator:ab5f7376b6f3e3bcc7f5ff5497c8b7364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39e82a110695de45f416f3149358012" id="r_ab39e82a110695de45f416f3149358012"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ab39e82a110695de45f416f3149358012">f_readdir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *dp, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:ab39e82a110695de45f416f3149358012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db7bc3d037b51a9f205eacda6177a5f" id="r_a6db7bc3d037b51a9f205eacda6177a5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a6db7bc3d037b51a9f205eacda6177a5f">f_findfirst</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *dp, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *pattern)</td></tr>
<tr class="separator:a6db7bc3d037b51a9f205eacda6177a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013999e446481a607316b916441f8673" id="r_a013999e446481a607316b916441f8673"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a013999e446481a607316b916441f8673">f_findnext</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *dp, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:a013999e446481a607316b916441f8673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4d38db58e89c526cfcf53200d719d0" id="r_a4b4d38db58e89c526cfcf53200d719d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a4b4d38db58e89c526cfcf53200d719d0">f_mkdir</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a4b4d38db58e89c526cfcf53200d719d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2858167fcd0bced48e9be434b3895efe" id="r_a2858167fcd0bced48e9be434b3895efe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a2858167fcd0bced48e9be434b3895efe">f_unlink</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a2858167fcd0bced48e9be434b3895efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa775b9b024acfeb3a66523cab497d142" id="r_aa775b9b024acfeb3a66523cab497d142"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aa775b9b024acfeb3a66523cab497d142">f_rename</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path_old, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path_new)</td></tr>
<tr class="separator:aa775b9b024acfeb3a66523cab497d142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1f60daab5c7d11170c334fb832c798" id="r_abe1f60daab5c7d11170c334fb832c798"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#abe1f60daab5c7d11170c334fb832c798">f_stat</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:abe1f60daab5c7d11170c334fb832c798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee7e560eec8d82755c636ae41e702cd" id="r_a9ee7e560eec8d82755c636ae41e702cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a9ee7e560eec8d82755c636ae41e702cd">f_chmod</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> attr, <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> mask)</td></tr>
<tr class="separator:a9ee7e560eec8d82755c636ae41e702cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafaa718d1a487e12a8f0087173dba0b9" id="r_aafaa718d1a487e12a8f0087173dba0b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aafaa718d1a487e12a8f0087173dba0b9">f_utime</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:aafaa718d1a487e12a8f0087173dba0b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c7e9a7fb3c279254cd2d0445667e2f" id="r_a53c7e9a7fb3c279254cd2d0445667e2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a53c7e9a7fb3c279254cd2d0445667e2f">f_chdir</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a53c7e9a7fb3c279254cd2d0445667e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13e5933f851b436890361189f64261cd" id="r_a13e5933f851b436890361189f64261cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a13e5933f851b436890361189f64261cd">f_chdrive</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a13e5933f851b436890361189f64261cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb865a03dbac0031ac5cb8a031f7b71c" id="r_acb865a03dbac0031ac5cb8a031f7b71c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#acb865a03dbac0031ac5cb8a031f7b71c">f_getcwd</a> (<a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *buff, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> len)</td></tr>
<tr class="separator:acb865a03dbac0031ac5cb8a031f7b71c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ff39f75a87cbda9cd6ea65d83f16cec" id="r_a0ff39f75a87cbda9cd6ea65d83f16cec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a0ff39f75a87cbda9cd6ea65d83f16cec">f_getfree</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *nclst, <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **fatfs)</td></tr>
<tr class="separator:a0ff39f75a87cbda9cd6ea65d83f16cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ff40a674bcbfe40d81b1e8e54befc6" id="r_ac4ff40a674bcbfe40d81b1e8e54befc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ac4ff40a674bcbfe40d81b1e8e54befc6">f_getlabel</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *label, <a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *vsn)</td></tr>
<tr class="separator:ac4ff40a674bcbfe40d81b1e8e54befc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa82bca64e28bc0d656a7999dd0eadec7" id="r_aa82bca64e28bc0d656a7999dd0eadec7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aa82bca64e28bc0d656a7999dd0eadec7">f_setlabel</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *label)</td></tr>
<tr class="separator:aa82bca64e28bc0d656a7999dd0eadec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0c4cd695704aa6d952c90be81d9849" id="r_a6c0c4cd695704aa6d952c90be81d9849"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a6c0c4cd695704aa6d952c90be81d9849">f_forward</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>(*func)(const <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>), <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btf, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *bf)</td></tr>
<tr class="separator:a6c0c4cd695704aa6d952c90be81d9849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ff90f5219df5cdb6c8f408b1b9e1a3" id="r_a35ff90f5219df5cdb6c8f408b1b9e1a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a35ff90f5219df5cdb6c8f408b1b9e1a3">f_expand</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, <a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a> fsz, <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> opt)</td></tr>
<tr class="separator:a35ff90f5219df5cdb6c8f408b1b9e1a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a934c2bbfa2160295810adc49d5509" id="r_a16a934c2bbfa2160295810adc49d5509"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a16a934c2bbfa2160295810adc49d5509">f_mount</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> opt)</td></tr>
<tr class="separator:a16a934c2bbfa2160295810adc49d5509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a983f0614033bd7cf587eb56d3054a91c" id="r_a983f0614033bd7cf587eb56d3054a91c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a983f0614033bd7cf587eb56d3054a91c">f_mkfs</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, const <a class="el" href="struct_m_k_f_s___p_a_r_m.html">MKFS_PARM</a> *opt, void *work, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> len)</td></tr>
<tr class="separator:a983f0614033bd7cf587eb56d3054a91c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70461190a46edc96bb7baef1ab4dbd4d" id="r_a70461190a46edc96bb7baef1ab4dbd4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a70461190a46edc96bb7baef1ab4dbd4d">f_fdisk</a> (<a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> pdrv, const <a class="el" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> ptbl[], void *work)</td></tr>
<tr class="separator:a70461190a46edc96bb7baef1ab4dbd4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529e8f17cae495f6536ff405622c996c" id="r_a529e8f17cae495f6536ff405622c996c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a529e8f17cae495f6536ff405622c996c">f_setcp</a> (<a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> cp)</td></tr>
<tr class="separator:a529e8f17cae495f6536ff405622c996c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d73b8d01c2ef89eddf920b7fcc6beb" id="r_ad1d73b8d01c2ef89eddf920b7fcc6beb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ad1d73b8d01c2ef89eddf920b7fcc6beb">f_putc</a> (<a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> <a class="el" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a>, <a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)</td></tr>
<tr class="separator:ad1d73b8d01c2ef89eddf920b7fcc6beb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699fc03ffa785ceab8812a7f204421f3" id="r_a699fc03ffa785ceab8812a7f204421f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a699fc03ffa785ceab8812a7f204421f3">f_puts</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *str, <a class="el" href="struct_f_i_l.html">FIL</a> *cp)</td></tr>
<tr class="separator:a699fc03ffa785ceab8812a7f204421f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce26253177c167df849e76f69b5c66c" id="r_a4ce26253177c167df849e76f69b5c66c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a4ce26253177c167df849e76f69b5c66c">f_printf</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *str,...)</td></tr>
<tr class="separator:a4ce26253177c167df849e76f69b5c66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a47f14a554ff3a49fc122fe3e190f2f" id="r_a4a47f14a554ff3a49fc122fe3e190f2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a4a47f14a554ff3a49fc122fe3e190f2f">f_gets</a> (<a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *buff, int len, <a class="el" href="struct_f_i_l.html">FIL</a> *<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)</td></tr>
<tr class="separator:a4a47f14a554ff3a49fc122fe3e190f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52f09f31c84747cc135c90282509961a" id="r_a52f09f31c84747cc135c90282509961a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a52f09f31c84747cc135c90282509961a">ff_oem2uni</a> (<a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> oem, <a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> cp)</td></tr>
<tr class="separator:a52f09f31c84747cc135c90282509961a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72914966e82f8df3504a3659834f2abe" id="r_a72914966e82f8df3504a3659834f2abe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a72914966e82f8df3504a3659834f2abe">ff_uni2oem</a> (<a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> uni, <a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> cp)</td></tr>
<tr class="separator:a72914966e82f8df3504a3659834f2abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb0bf9acde41b603662ab45811cbc806" id="r_acb0bf9acde41b603662ab45811cbc806"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#acb0bf9acde41b603662ab45811cbc806">ff_wtoupper</a> (<a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> uni)</td></tr>
<tr class="separator:acb0bf9acde41b603662ab45811cbc806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63913186246b80cfce42dbab9e8bcab" id="r_ae63913186246b80cfce42dbab9e8bcab"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae63913186246b80cfce42dbab9e8bcab">ff_memalloc</a> (<a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> msize)</td></tr>
<tr class="separator:ae63913186246b80cfce42dbab9e8bcab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85fd090c8b8b17846ccc1e8cda16a9b" id="r_ab85fd090c8b8b17846ccc1e8cda16a9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ab85fd090c8b8b17846ccc1e8cda16a9b">ff_memfree</a> (void *mblock)</td></tr>
<tr class="separator:ab85fd090c8b8b17846ccc1e8cda16a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae936e4c15227768f7da4e0951def89c8" name="ae936e4c15227768f7da4e0951def89c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae936e4c15227768f7da4e0951def89c8">&#9670;&#160;</a></span>_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _T</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;x</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00106">106</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a3232964568d17bb4a1af30f9db826ce2" name="a3232964568d17bb4a1af30f9db826ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3232964568d17bb4a1af30f9db826ce2">&#9670;&#160;</a></span>_TEXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _TEXT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;x</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00107">107</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="ae8174d00798e34e7c9e95898cb9e1a09" name="ae8174d00798e34e7c9e95898cb9e1a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8174d00798e34e7c9e95898cb9e1a09">&#9670;&#160;</a></span>AM_ARC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_ARC&#160;&#160;&#160;0x20	/* Archive */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00415">415</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a3a9db44e978ed6c13b641e092d4cd7d3" name="a3a9db44e978ed6c13b641e092d4cd7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a9db44e978ed6c13b641e092d4cd7d3">&#9670;&#160;</a></span>AM_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_DIR&#160;&#160;&#160;0x10	/* Directory */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00414">414</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="aa90c4c921c1955fd407d8bbf17f1674e" name="aa90c4c921c1955fd407d8bbf17f1674e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa90c4c921c1955fd407d8bbf17f1674e">&#9670;&#160;</a></span>AM_HID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_HID&#160;&#160;&#160;0x02	/* Hidden */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00412">412</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="add6d85d1e7a02b4f6188783ef91a5f1e" name="add6d85d1e7a02b4f6188783ef91a5f1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add6d85d1e7a02b4f6188783ef91a5f1e">&#9670;&#160;</a></span>AM_RDO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_RDO&#160;&#160;&#160;0x01	/* Read only */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00411">411</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a1f25d5c17b5a3a6397b3398add8cdc15" name="a1f25d5c17b5a3a6397b3398add8cdc15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f25d5c17b5a3a6397b3398add8cdc15">&#9670;&#160;</a></span>AM_SYS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_SYS&#160;&#160;&#160;0x04	/* System */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00413">413</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="aee297a9011164cf485a4df2a72758b08" name="aee297a9011164cf485a4df2a72758b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee297a9011164cf485a4df2a72758b08">&#9670;&#160;</a></span>CREATE_LINKMAP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CREATE_LINKMAP&#160;&#160;&#160;((<a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a>)0 - 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00395">395</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a970cdd8970a3a94967ad64cfc5d4c161" name="a970cdd8970a3a94967ad64cfc5d4c161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a970cdd8970a3a94967ad64cfc5d4c161">&#9670;&#160;</a></span>f_eof</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_eof</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a></td><td>)</td>
          <td>&#160;&#160;&#160;((int)((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;fptr == (<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;obj.objsize))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00339">339</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a25cbdabeed318802cf0e9db6671a33b7" name="a25cbdabeed318802cf0e9db6671a33b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25cbdabeed318802cf0e9db6671a33b7">&#9670;&#160;</a></span>f_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_error</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;err)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00340">340</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="ae4caf47dd5cbc123b61d35542481b1be" name="ae4caf47dd5cbc123b61d35542481b1be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4caf47dd5cbc123b61d35542481b1be">&#9670;&#160;</a></span>f_rewind</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_rewind</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="ff_8c.html#a7c4bcf81d9122f0b5376852ec6a8c3eb">f_lseek</a>((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>), 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00343">343</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a3f92b6c0c1648de678283ab6f1610161" name="a3f92b6c0c1648de678283ab6f1610161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f92b6c0c1648de678283ab6f1610161">&#9670;&#160;</a></span>f_rewinddir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_rewinddir</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dp</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="ff_8c.html#ab39e82a110695de45f416f3149358012">f_readdir</a>((dp), 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00344">344</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a58df56d084ad3dd9f8cd49b245a7a7ca" name="a58df56d084ad3dd9f8cd49b245a7a7ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58df56d084ad3dd9f8cd49b245a7a7ca">&#9670;&#160;</a></span>f_rmdir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_rmdir</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">path</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="ff_8c.html#a2858167fcd0bced48e9be434b3895efe">f_unlink</a>(path)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00345">345</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a26f33722c5bf1aa3cd6f0290a83eb2bc" name="a26f33722c5bf1aa3cd6f0290a83eb2bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26f33722c5bf1aa3cd6f0290a83eb2bc">&#9670;&#160;</a></span>f_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_size</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;obj.objsize)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00342">342</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a5e1daca7ce13cdc277e42185f7f9124f" name="a5e1daca7ce13cdc277e42185f7f9124f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e1daca7ce13cdc277e42185f7f9124f">&#9670;&#160;</a></span>f_tell</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_tell</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>)-&gt;fptr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00341">341</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="aa22c4b32404b35d0a0bd138fa63f2e75" name="aa22c4b32404b35d0a0bd138fa63f2e75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa22c4b32404b35d0a0bd138fa63f2e75">&#9670;&#160;</a></span>f_unmount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_unmount</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">path</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="ff_8c.html#a16a934c2bbfa2160295810adc49d5509">f_mount</a>(0, path, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00346">346</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="afba4546b131dea4b24727fa20a80e29f" name="afba4546b131dea4b24727fa20a80e29f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afba4546b131dea4b24727fa20a80e29f">&#9670;&#160;</a></span>FA_CREATE_ALWAYS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_CREATE_ALWAYS&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00390">390</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a417bb1babd1785fd181a806b5613eba3" name="a417bb1babd1785fd181a806b5613eba3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417bb1babd1785fd181a806b5613eba3">&#9670;&#160;</a></span>FA_CREATE_NEW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_CREATE_NEW&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00389">389</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a17b01553029920ac0468912b4bcb16c7" name="a17b01553029920ac0468912b4bcb16c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17b01553029920ac0468912b4bcb16c7">&#9670;&#160;</a></span>FA_OPEN_ALWAYS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_OPEN_ALWAYS&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00391">391</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a90f135b2ae90fba5080f6bd2b6c57b8a" name="a90f135b2ae90fba5080f6bd2b6c57b8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90f135b2ae90fba5080f6bd2b6c57b8a">&#9670;&#160;</a></span>FA_OPEN_APPEND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_OPEN_APPEND&#160;&#160;&#160;0x30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00392">392</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a0c5dd686b10f84c2a2b3954957a5979a" name="a0c5dd686b10f84c2a2b3954957a5979a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c5dd686b10f84c2a2b3954957a5979a">&#9670;&#160;</a></span>FA_OPEN_EXISTING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_OPEN_EXISTING&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00388">388</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a1f4f3530ff03abbd979b072536e72290" name="a1f4f3530ff03abbd979b072536e72290"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4f3530ff03abbd979b072536e72290">&#9670;&#160;</a></span>FA_READ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_READ&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00386">386</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="afa366963220c89b882c0361794020c14" name="afa366963220c89b882c0361794020c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa366963220c89b882c0361794020c14">&#9670;&#160;</a></span>FA_WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_WRITE&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00387">387</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a67f86fd50a009422bed52a85b7a28a77" name="a67f86fd50a009422bed52a85b7a28a77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f86fd50a009422bed52a85b7a28a77">&#9670;&#160;</a></span>FF_DEFINED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FF_DEFINED&#160;&#160;&#160;86631	/* Revision ID */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00023">23</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a3eb7cbd9d1d0548d54856f1cc8a2021f" name="a3eb7cbd9d1d0548d54856f1cc8a2021f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eb7cbd9d1d0548d54856f1cc8a2021f">&#9670;&#160;</a></span>FF_INTDEF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FF_INTDEF&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00057">57</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a701ab2eee8c2d9b5b445aadc8f14df4d" name="a701ab2eee8c2d9b5b445aadc8f14df4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a701ab2eee8c2d9b5b445aadc8f14df4d">&#9670;&#160;</a></span>FM_ANY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FM_ANY&#160;&#160;&#160;0x07</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00401">401</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a9348c28116bc29e88195b23f6945f81d" name="a9348c28116bc29e88195b23f6945f81d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9348c28116bc29e88195b23f6945f81d">&#9670;&#160;</a></span>FM_EXFAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FM_EXFAT&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00400">400</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a8bd205b7d09147e55169d3713f46e9ea" name="a8bd205b7d09147e55169d3713f46e9ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bd205b7d09147e55169d3713f46e9ea">&#9670;&#160;</a></span>FM_FAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FM_FAT&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00398">398</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="aff61d3ed8f8c6ea5c25c3cb366320e08" name="aff61d3ed8f8c6ea5c25c3cb366320e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff61d3ed8f8c6ea5c25c3cb366320e08">&#9670;&#160;</a></span>FM_FAT32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FM_FAT32&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00399">399</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a3b3d16ac135fe57669fc8a93dfa0c0a5" name="a3b3d16ac135fe57669fc8a93dfa0c0a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b3d16ac135fe57669fc8a93dfa0c0a5">&#9670;&#160;</a></span>FM_SFD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FM_SFD&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00402">402</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a50bfa912e87473bc54333523983f39f6" name="a50bfa912e87473bc54333523983f39f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50bfa912e87473bc54333523983f39f6">&#9670;&#160;</a></span>FS_EXFAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_EXFAT&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00408">408</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="aab755aa1b4f81f4aabee4a5d4738cfb0" name="aab755aa1b4f81f4aabee4a5d4738cfb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab755aa1b4f81f4aabee4a5d4738cfb0">&#9670;&#160;</a></span>FS_FAT12</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_FAT12&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00405">405</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a7ef90a36d99edfc0138a2155a17a79b9" name="a7ef90a36d99edfc0138a2155a17a79b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ef90a36d99edfc0138a2155a17a79b9">&#9670;&#160;</a></span>FS_FAT16</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_FAT16&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00406">406</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="ac63e0796095a789cefdbc3c3c676c9ce" name="ac63e0796095a789cefdbc3c3c676c9ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac63e0796095a789cefdbc3c3c676c9ce">&#9670;&#160;</a></span>FS_FAT32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_FAT32&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00407">407</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a4ae1dab0fb4b072a66584546209e7d58" name="a4ae1dab0fb4b072a66584546209e7d58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ae1dab0fb4b072a66584546209e7d58">&#9670;&#160;</a></span>BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned char <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00059">59</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="ad342ac907eb044443153a22f964bf0af" name="ad342ac907eb044443153a22f964bf0af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad342ac907eb044443153a22f964bf0af">&#9670;&#160;</a></span>DWORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned long <a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00061">61</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a3fc0992ad7436250b6b1a0592214b7f2" name="a3fc0992ad7436250b6b1a0592214b7f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fc0992ad7436250b6b1a0592214b7f2">&#9670;&#160;</a></span>FSIZE_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00082">82</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a1f3c30a83148a28340f009d4e583f087" name="a1f3c30a83148a28340f009d4e583f087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f3c30a83148a28340f009d4e583f087">&#9670;&#160;</a></span>LBA_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> <a class="el" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00083">83</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a03bdb8ce5895c7e261aadc2529637546" name="a03bdb8ce5895c7e261aadc2529637546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03bdb8ce5895c7e261aadc2529637546">&#9670;&#160;</a></span>TCHAR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef char <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00105">105</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a36cb3b01d81ffd844bbbfb54003e06ec" name="a36cb3b01d81ffd844bbbfb54003e06ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36cb3b01d81ffd844bbbfb54003e06ec">&#9670;&#160;</a></span>UINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned int <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00058">58</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a0bb095da65fbe52192dd9e3e643c7568" name="a0bb095da65fbe52192dd9e3e643c7568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb095da65fbe52192dd9e3e643c7568">&#9670;&#160;</a></span>WCHAR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> <a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00062">62</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a id="a197942eefa7db30960ae396d68339b97" name="a197942eefa7db30960ae396d68339b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a197942eefa7db30960ae396d68339b97">&#9670;&#160;</a></span>WORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned short <a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00060">60</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a49d0171ecbd362cda5680a0d360db44c" name="a49d0171ecbd362cda5680a0d360db44c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49d0171ecbd362cda5680a0d360db44c">&#9670;&#160;</a></span>FRESULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1" name="a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"></a>FR_OK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34" name="a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"></a>FR_DISK_ERR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76" name="a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"></a>FR_INT_ERR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45" name="a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45"></a>FR_NOT_READY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c" name="a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"></a>FR_NO_FILE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532" name="a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532"></a>FR_NO_PATH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45" name="a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"></a>FR_INVALID_NAME&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d" name="a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"></a>FR_DENIED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450" name="a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450"></a>FR_EXIST&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8" name="a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8"></a>FR_INVALID_OBJECT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b" name="a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b"></a>FR_WRITE_PROTECTED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65" name="a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65"></a>FR_INVALID_DRIVE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d" name="a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d"></a>FR_NOT_ENABLED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463" name="a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463"></a>FR_NO_FILESYSTEM&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca" name="a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca"></a>FR_MKFS_ABORTED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4" name="a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4"></a>FR_TIMEOUT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7" name="a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7"></a>FR_LOCKED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c" name="a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c"></a>FR_NOT_ENOUGH_CORE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9" name="a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9"></a>FR_TOO_MANY_OPEN_FILES&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6" name="a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6"></a>FR_INVALID_PARAMETER&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ff_8h_source.html#l00276">276</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  276</span>             {</div>
<div class="line"><span class="lineno">  277</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> = 0,              <span class="comment">/* (0) Succeeded */</span></div>
<div class="line"><span class="lineno">  278</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>,            <span class="comment">/* (1) A hard error occurred in the low level disk I/O layer */</span></div>
<div class="line"><span class="lineno">  279</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>,             <span class="comment">/* (2) Assertion failed */</span></div>
<div class="line"><span class="lineno">  280</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45">FR_NOT_READY</a>,           <span class="comment">/* (3) The physical drive cannot work */</span></div>
<div class="line"><span class="lineno">  281</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>,             <span class="comment">/* (4) Could not find the file */</span></div>
<div class="line"><span class="lineno">  282</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>,             <span class="comment">/* (5) Could not find the path */</span></div>
<div class="line"><span class="lineno">  283</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>,        <span class="comment">/* (6) The path name format is invalid */</span></div>
<div class="line"><span class="lineno">  284</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>,              <span class="comment">/* (7) Access denied due to prohibited access or directory full */</span></div>
<div class="line"><span class="lineno">  285</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>,               <span class="comment">/* (8) Access denied due to prohibited access */</span></div>
<div class="line"><span class="lineno">  286</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>,      <span class="comment">/* (9) The file/directory object is invalid */</span></div>
<div class="line"><span class="lineno">  287</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b">FR_WRITE_PROTECTED</a>,     <span class="comment">/* (10) The physical drive is write protected */</span></div>
<div class="line"><span class="lineno">  288</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>,       <span class="comment">/* (11) The logical drive number is invalid */</span></div>
<div class="line"><span class="lineno">  289</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d">FR_NOT_ENABLED</a>,         <span class="comment">/* (12) The volume has no work area */</span></div>
<div class="line"><span class="lineno">  290</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463">FR_NO_FILESYSTEM</a>,       <span class="comment">/* (13) There is no valid FAT volume */</span></div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca">FR_MKFS_ABORTED</a>,        <span class="comment">/* (14) The f_mkfs() aborted due to any problem */</span></div>
<div class="line"><span class="lineno">  292</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4">FR_TIMEOUT</a>,             <span class="comment">/* (15) Could not get a grant to access the volume within defined period */</span></div>
<div class="line"><span class="lineno">  293</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7">FR_LOCKED</a>,              <span class="comment">/* (16) The operation is rejected according to the file sharing policy */</span></div>
<div class="line"><span class="lineno">  294</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>,     <span class="comment">/* (17) LFN working buffer could not be allocated */</span></div>
<div class="line"><span class="lineno">  295</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>, <span class="comment">/* (18) Number of open files &gt; FF_FS_LOCK */</span></div>
<div class="line"><span class="lineno">  296</span>    <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6">FR_INVALID_PARAMETER</a>    <span class="comment">/* (19) Given parameter is invalid */</span></div>
<div class="line"><span class="lineno">  297</span>} <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>;</div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00276">ff.h:276</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463">FR_NO_FILESYSTEM</a></div><div class="ttdeci">@ FR_NO_FILESYSTEM</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00290">ff.h:290</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a></div><div class="ttdeci">@ FR_EXIST</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00285">ff.h:285</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6">FR_INVALID_PARAMETER</a></div><div class="ttdeci">@ FR_INVALID_PARAMETER</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00297">ff.h:296</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a></div><div class="ttdeci">@ FR_INVALID_OBJECT</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00286">ff.h:286</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4">FR_TIMEOUT</a></div><div class="ttdeci">@ FR_TIMEOUT</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00292">ff.h:292</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a></div><div class="ttdeci">@ FR_INVALID_DRIVE</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00288">ff.h:288</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca">FR_MKFS_ABORTED</a></div><div class="ttdeci">@ FR_MKFS_ABORTED</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00291">ff.h:291</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a></div><div class="ttdeci">@ FR_TOO_MANY_OPEN_FILES</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00295">ff.h:295</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a></div><div class="ttdeci">@ FR_OK</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00277">ff.h:277</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7">FR_LOCKED</a></div><div class="ttdeci">@ FR_LOCKED</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00293">ff.h:293</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a></div><div class="ttdeci">@ FR_INVALID_NAME</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00283">ff.h:283</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a></div><div class="ttdeci">@ FR_DENIED</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00284">ff.h:284</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a></div><div class="ttdeci">@ FR_NO_FILE</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00281">ff.h:281</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a></div><div class="ttdeci">@ FR_DISK_ERR</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00278">ff.h:278</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a></div><div class="ttdeci">@ FR_INT_ERR</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00279">ff.h:279</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b">FR_WRITE_PROTECTED</a></div><div class="ttdeci">@ FR_WRITE_PROTECTED</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00287">ff.h:287</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45">FR_NOT_READY</a></div><div class="ttdeci">@ FR_NOT_READY</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00280">ff.h:280</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a></div><div class="ttdeci">@ FR_NO_PATH</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00282">ff.h:282</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a></div><div class="ttdeci">@ FR_NOT_ENOUGH_CORE</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00294">ff.h:294</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d">FR_NOT_ENABLED</a></div><div class="ttdeci">@ FR_NOT_ENABLED</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00289">ff.h:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a53c7e9a7fb3c279254cd2d0445667e2f" name="a53c7e9a7fb3c279254cd2d0445667e2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53c7e9a7fb3c279254cd2d0445667e2f">&#9670;&#160;</a></span>f_chdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chdir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04205">4205</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4208</span>{</div>
<div class="line"><span class="lineno"> 4209</span><span class="preprocessor">#if FF_STR_VOLUME_ID == 2</span></div>
<div class="line"><span class="lineno"> 4210</span>    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> i;</div>
<div class="line"><span class="lineno"> 4211</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4212</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4213</span>    <a class="code hl_struct" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line"><span class="lineno"> 4214</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4215</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 4216</span> </div>
<div class="line"><span class="lineno"> 4217</span> </div>
<div class="line"><span class="lineno"> 4218</span>    <span class="comment">/* Get logical drive */</span></div>
<div class="line"><span class="lineno"> 4219</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;fs, 0);</div>
<div class="line"><span class="lineno"> 4220</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4221</span>        dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 4222</span>        <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 4223</span>        res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;dj, path);       <span class="comment">/* Follow the path */</span></div>
<div class="line"><span class="lineno"> 4224</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                 <span class="comment">/* Follow completed */</span></div>
<div class="line"><span class="lineno"> 4225</span>            <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a>) {    <span class="comment">/* Is it the start directory itself? */</span></div>
<div class="line"><span class="lineno"> 4226</span>                fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a217d0ce0c8cec84aa7f0c142679412c6">cdir</a> = dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>;</div>
<div class="line"><span class="lineno"> 4227</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4228</span>                <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 4229</span>                    fs-&gt;cdc_scl = dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.c_scl;</div>
<div class="line"><span class="lineno"> 4230</span>                    fs-&gt;cdc_size = dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.c_size;</div>
<div class="line"><span class="lineno"> 4231</span>                    fs-&gt;cdc_ofs = dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.c_ofs;</div>
<div class="line"><span class="lineno"> 4232</span>                }</div>
<div class="line"><span class="lineno"> 4233</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4234</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4235</span>                <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) { <span class="comment">/* It is a sub-directory */</span></div>
<div class="line"><span class="lineno"> 4236</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4237</span>                    <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 4238</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a217d0ce0c8cec84aa7f0c142679412c6">cdir</a> = <a class="code hl_function" href="ff_8c.html#aa4880817cfec23d4e560b785d1ceefcb">ld_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#ae08bbe65fd20259cb98c85ce08aa53cb">XDIR_FstClus</a>);     <span class="comment">/* Sub-directory cluster */</span></div>
<div class="line"><span class="lineno"> 4239</span>                        fs-&gt;cdc_scl = dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>;                        <span class="comment">/* Save containing directory information */</span></div>
<div class="line"><span class="lineno"> 4240</span>                        fs-&gt;cdc_size = ((<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a83c51ba99687054f0cc653b45f195268">objsize</a> &amp; 0xFFFFFF00) | dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#aa7bfa8dd8958d11df042a67e1da25f63">stat</a>;</div>
<div class="line"><span class="lineno"> 4241</span>                        fs-&gt;cdc_ofs = dj.<a class="code hl_variable" href="struct_d_i_r.html#afdb5d6302a88eaf5d43da0352ca2cc91">blk_ofs</a>;</div>
<div class="line"><span class="lineno"> 4242</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4243</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4244</span>                    {</div>
<div class="line"><span class="lineno"> 4245</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a217d0ce0c8cec84aa7f0c142679412c6">cdir</a> = <a class="code hl_function" href="ff_8c.html#ad1b3343c92d0f0e58ba448c3c11b1f39">ld_clust</a>(fs, dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>);                    <span class="comment">/* Sub-directory cluster */</span></div>
<div class="line"><span class="lineno"> 4246</span>                    }</div>
<div class="line"><span class="lineno"> 4247</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4248</span>                    res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;       <span class="comment">/* Reached but a file */</span></div>
<div class="line"><span class="lineno"> 4249</span>                }</div>
<div class="line"><span class="lineno"> 4250</span>            }</div>
<div class="line"><span class="lineno"> 4251</span>        }</div>
<div class="line"><span class="lineno"> 4252</span>        <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 4253</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line"><span class="lineno"> 4254</span><span class="preprocessor">#if FF_STR_VOLUME_ID == 2   </span><span class="comment">/* Also current drive is changed if in Unix style volume ID */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 4255</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4256</span>            <span class="keywordflow">for</span> (i = <a class="code hl_define" href="ffconf_8h.html#a2343dca8b59f249f6a88574fda8ac31c">FF_VOLUMES</a> - 1; i &amp;&amp; fs != <a class="code hl_variable" href="ff_8c.html#a0eeaf4cd8426fce14e6a07468c076f31">FatFs</a>[i]; i--) ;    <span class="comment">/* Set current drive */</span></div>
<div class="line"><span class="lineno"> 4257</span>            <a class="code hl_variable" href="ff_8c.html#ad71b1fde84fac84544e4a6a59c6e425b">CurrVol</a> = (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)i;</div>
<div class="line"><span class="lineno"> 4258</span>        }</div>
<div class="line"><span class="lineno"> 4259</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4260</span>    }</div>
<div class="line"><span class="lineno"> 4261</span> </div>
<div class="line"><span class="lineno"> 4262</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4263</span>}</div>
<div class="ttc" id="aff_8c_html_a03a711029b966a7fad4f01e546b5e034"><div class="ttname"><a href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a></div><div class="ttdeci">#define NS_NONAME</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00080">ff.c:80</a></div></div>
<div class="ttc" id="aff_8c_html_a0eeaf4cd8426fce14e6a07468c076f31"><div class="ttname"><a href="ff_8c.html#a0eeaf4cd8426fce14e6a07468c076f31">FatFs</a></div><div class="ttdeci">static FATFS * FatFs[FF_VOLUMES]</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00464">ff.c:464</a></div></div>
<div class="ttc" id="aff_8c_html_a36cd06cbee94b40df8f415ac7e1cb56c"><div class="ttname"><a href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a></div><div class="ttdeci">static FRESULT mount_volume(const TCHAR **path, FATFS **rfs, BYTE mode)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l03332">ff.c:3332</a></div></div>
<div class="ttc" id="aff_8c_html_a7e653d8ca0ae09faa49cd5b7335fea84"><div class="ttname"><a href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a></div><div class="ttdeci">#define LEAVE_FF(fs, res)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00244">ff.c:244</a></div></div>
<div class="ttc" id="aff_8c_html_a9880dce2d33fe7708f982b5f80a31142"><div class="ttname"><a href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a></div><div class="ttdeci">#define INIT_NAMBUF(fs)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00545">ff.c:545</a></div></div>
<div class="ttc" id="aff_8c_html_aa2d2dda6ad1a1ec4a09e5cb30ae40e2a"><div class="ttname"><a href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a></div><div class="ttdeci">#define FREE_NAMBUF()</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00546">ff.c:546</a></div></div>
<div class="ttc" id="aff_8c_html_aa4880817cfec23d4e560b785d1ceefcb"><div class="ttname"><a href="ff_8c.html#aa4880817cfec23d4e560b785d1ceefcb">ld_dword</a></div><div class="ttdeci">static DWORD ld_dword(const BYTE *ptr)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00623">ff.c:623</a></div></div>
<div class="ttc" id="aff_8c_html_ad1b3343c92d0f0e58ba448c3c11b1f39"><div class="ttname"><a href="ff_8c.html#ad1b3343c92d0f0e58ba448c3c11b1f39">ld_clust</a></div><div class="ttdeci">static DWORD ld_clust(FATFS *fs, const BYTE *dir)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01817">ff.c:1817</a></div></div>
<div class="ttc" id="aff_8c_html_ad2306816015e67e72cfd0a20a880b227"><div class="ttname"><a href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a></div><div class="ttdeci">#define NSFLAG</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00072">ff.c:72</a></div></div>
<div class="ttc" id="aff_8c_html_ad71b1fde84fac84544e4a6a59c6e425b"><div class="ttname"><a href="ff_8c.html#ad71b1fde84fac84544e4a6a59c6e425b">CurrVol</a></div><div class="ttdeci">static BYTE CurrVol</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00468">ff.c:468</a></div></div>
<div class="ttc" id="aff_8c_html_ad9aa172b1cf1d54aca234228a7ae8503"><div class="ttname"><a href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div><div class="ttdeci">#define DEF_NAMBUF</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00544">ff.c:544</a></div></div>
<div class="ttc" id="aff_8c_html_ae08bbe65fd20259cb98c85ce08aa53cb"><div class="ttname"><a href="ff_8c.html#ae08bbe65fd20259cb98c85ce08aa53cb">XDIR_FstClus</a></div><div class="ttdeci">#define XDIR_FstClus</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00185">ff.c:185</a></div></div>
<div class="ttc" id="aff_8c_html_af194524672491a522f041278b9b74e94"><div class="ttname"><a href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a></div><div class="ttdeci">static FRESULT follow_path(DIR *dp, const TCHAR *path)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l03003">ff.c:3003</a></div></div>
<div class="ttc" id="aff_8h_html_a36cb3b01d81ffd844bbbfb54003e06ec"><div class="ttname"><a href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></div><div class="ttdeci">unsigned int UINT</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00058">ff.h:58</a></div></div>
<div class="ttc" id="aff_8h_html_a3a9db44e978ed6c13b641e092d4cd7d3"><div class="ttname"><a href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a></div><div class="ttdeci">#define AM_DIR</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00414">ff.h:414</a></div></div>
<div class="ttc" id="aff_8h_html_a4ae1dab0fb4b072a66584546209e7d58"><div class="ttname"><a href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a></div><div class="ttdeci">unsigned char BYTE</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00059">ff.h:59</a></div></div>
<div class="ttc" id="aff_8h_html_a50bfa912e87473bc54333523983f39f6"><div class="ttname"><a href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a></div><div class="ttdeci">#define FS_EXFAT</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00408">ff.h:408</a></div></div>
<div class="ttc" id="aff_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00061">ff.h:61</a></div></div>
<div class="ttc" id="affconf_8h_html_a2343dca8b59f249f6a88574fda8ac31c"><div class="ttname"><a href="ffconf_8h.html#a2343dca8b59f249f6a88574fda8ac31c">FF_VOLUMES</a></div><div class="ttdeci">#define FF_VOLUMES</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00172">ffconf.h:172</a></div></div>
<div class="ttc" id="astruct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00228">ff.h:228</a></div></div>
<div class="ttc" id="astruct_d_i_r_html_a6c2a8c0cf2d55ae99775e93a16593449"><div class="ttname"><a href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">DIR::dir</a></div><div class="ttdeci">BYTE * dir</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00233">ff.h:233</a></div></div>
<div class="ttc" id="astruct_d_i_r_html_a8fa2dfd8198410ea92a98281d982cf44"><div class="ttname"><a href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">DIR::obj</a></div><div class="ttdeci">FFOBJID obj</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00229">ff.h:229</a></div></div>
<div class="ttc" id="astruct_d_i_r_html_ad90d974c0e7640307598c586bf141b32"><div class="ttname"><a href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">DIR::fn</a></div><div class="ttdeci">BYTE fn[12]</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00234">ff.h:234</a></div></div>
<div class="ttc" id="astruct_d_i_r_html_afdb5d6302a88eaf5d43da0352ca2cc91"><div class="ttname"><a href="struct_d_i_r.html#afdb5d6302a88eaf5d43da0352ca2cc91">DIR::blk_ofs</a></div><div class="ttdeci">DWORD blk_ofs</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00236">ff.h:236</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html"><div class="ttname"><a href="struct_f_a_t_f_s.html">FATFS</a></div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00132">ff.h:132</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_a217d0ce0c8cec84aa7f0c142679412c6"><div class="ttname"><a href="struct_f_a_t_f_s.html#a217d0ce0c8cec84aa7f0c142679412c6">FATFS::cdir</a></div><div class="ttdeci">DWORD cdir</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00158">ff.h:158</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_add27d97babe807b573eac98a71dc4ae5"><div class="ttname"><a href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">FATFS::fs_type</a></div><div class="ttdeci">BYTE fs_type</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00133">ff.h:133</a></div></div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html_a83c51ba99687054f0cc653b45f195268"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html#a83c51ba99687054f0cc653b45f195268">FFOBJID::objsize</a></div><div class="ttdeci">FSIZE_t objsize</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00188">ff.h:188</a></div></div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html_a867089659a2374d44ab917c60037fe5c"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">FFOBJID::fs</a></div><div class="ttdeci">FATFS * fs</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00183">ff.h:183</a></div></div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html_aa7bfa8dd8958d11df042a67e1da25f63"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html#aa7bfa8dd8958d11df042a67e1da25f63">FFOBJID::stat</a></div><div class="ttdeci">BYTE stat</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00186">ff.h:186</a></div></div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html_ad990393e2ddf16f73671ded4b751becb"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">FFOBJID::sclust</a></div><div class="ttdeci">DWORD sclust</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00187">ff.h:187</a></div></div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html_ae9b1e6f98dbad367cc00f92b87f8d279"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">FFOBJID::attr</a></div><div class="ttdeci">BYTE attr</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00185">ff.h:185</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a13e5933f851b436890361189f64261cd" name="a13e5933f851b436890361189f64261cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13e5933f851b436890361189f64261cd">&#9670;&#160;</a></span>f_chdrive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chdrive </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04188">4188</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4191</span>{</div>
<div class="line"><span class="lineno"> 4192</span>    <span class="keywordtype">int</span> vol;</div>
<div class="line"><span class="lineno"> 4193</span> </div>
<div class="line"><span class="lineno"> 4194</span> </div>
<div class="line"><span class="lineno"> 4195</span>    <span class="comment">/* Get logical drive number */</span></div>
<div class="line"><span class="lineno"> 4196</span>    vol = <a class="code hl_function" href="ff_8c.html#a88ad7e4b1bc98d1a2673a136283dc7ee">get_ldnumber</a>(&amp;path);</div>
<div class="line"><span class="lineno"> 4197</span>    <span class="keywordflow">if</span> (vol &lt; 0) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>;</div>
<div class="line"><span class="lineno"> 4198</span>    <a class="code hl_variable" href="ff_8c.html#ad71b1fde84fac84544e4a6a59c6e425b">CurrVol</a> = (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)vol;    <span class="comment">/* Set it as current volume */</span></div>
<div class="line"><span class="lineno"> 4199</span> </div>
<div class="line"><span class="lineno"> 4200</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><span class="lineno"> 4201</span>}</div>
<div class="ttc" id="aff_8c_html_a88ad7e4b1bc98d1a2673a136283dc7ee"><div class="ttname"><a href="ff_8c.html#a88ad7e4b1bc98d1a2673a136283dc7ee">get_ldnumber</a></div><div class="ttdeci">static int get_ldnumber(const TCHAR **path)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l03090">ff.c:3090</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ee7e560eec8d82755c636ae41e702cd" name="a9ee7e560eec8d82755c636ae41e702cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee7e560eec8d82755c636ae41e702cd">&#9670;&#160;</a></span>f_chmod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chmod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a53882db20ef4323dcfd1874d7733ffc3" name="a53882db20ef4323dcfd1874d7733ffc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53882db20ef4323dcfd1874d7733ffc3">&#9670;&#160;</a></span>f_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04152">4152</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4155</span>{</div>
<div class="line"><span class="lineno"> 4156</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4157</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4158</span> </div>
<div class="line"><span class="lineno"> 4159</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 4160</span>    res = <a class="code hl_function" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>);                   <span class="comment">/* Flush cached data */</span></div>
<div class="line"><span class="lineno"> 4161</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line"><span class="lineno"> 4162</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4163</span>    {</div>
<div class="line"><span class="lineno"> 4164</span>        res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, &amp;fs);  <span class="comment">/* Lock volume */</span></div>
<div class="line"><span class="lineno"> 4165</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4166</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 4167</span>            res = <a class="code hl_function" href="ff_8c.html#ae6a892e91d9d3eafffa2f411c2f4db92">dec_lock</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.lockid);     <span class="comment">/* Decrement file open counter */</span></div>
<div class="line"><span class="lineno"> 4168</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.fs = 0;   <span class="comment">/* Invalidate file object */</span></div>
<div class="line"><span class="lineno"> 4169</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4170</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.fs = 0; <span class="comment">/* Invalidate file object */</span></div>
<div class="line"><span class="lineno"> 4171</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4172</span><span class="preprocessor">#if FF_FS_REENTRANT</span></div>
<div class="line"><span class="lineno"> 4173</span>            unlock_fs(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);       <span class="comment">/* Unlock volume */</span></div>
<div class="line"><span class="lineno"> 4174</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4175</span>        }</div>
<div class="line"><span class="lineno"> 4176</span>    }</div>
<div class="line"><span class="lineno"> 4177</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 4178</span>}</div>
<div class="ttc" id="a_file_io_8c_html_aa065f30aa9f5f9a42132c82c787ee70b"><div class="ttname"><a href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdef"><b>Definition</b> <a href="_file_io_8c_source.html#l00056">FileIo.c:56</a></div></div>
<div class="ttc" id="aff_8c_html_ad69c7246b122ba56a134939ee0eaf847"><div class="ttname"><a href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a></div><div class="ttdeci">FRESULT f_sync(FIL *fp)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l04071">ff.c:4071</a></div></div>
<div class="ttc" id="aff_8c_html_adea24eb73b81e5f0ae112b3376699565"><div class="ttname"><a href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a></div><div class="ttdeci">static FRESULT validate(FFOBJID *obj, FATFS **rfs)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l03561">ff.c:3561</a></div></div>
<div class="ttc" id="aff_8c_html_ae6a892e91d9d3eafffa2f411c2f4db92"><div class="ttname"><a href="ff_8c.html#ae6a892e91d9d3eafffa2f411c2f4db92">dec_lock</a></div><div class="ttdeci">static FRESULT dec_lock(UINT i)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00984">ff.c:984</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5f7376b6f3e3bcc7f5ff5497c8b7364" name="ab5f7376b6f3e3bcc7f5ff5497c8b7364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5f7376b6f3e3bcc7f5ff5497c8b7364">&#9670;&#160;</a></span>f_closedir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_closedir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04597">4597</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4600</span>{</div>
<div class="line"><span class="lineno"> 4601</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4602</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4603</span> </div>
<div class="line"><span class="lineno"> 4604</span> </div>
<div class="line"><span class="lineno"> 4605</span>    res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>, &amp;fs);  <span class="comment">/* Check validity of the file object */</span></div>
<div class="line"><span class="lineno"> 4606</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4607</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 4608</span>        <span class="keywordflow">if</span> (dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a61f23dcb8ffcbe46cf8f1385b6065be7">lockid</a>) res = <a class="code hl_function" href="ff_8c.html#ae6a892e91d9d3eafffa2f411c2f4db92">dec_lock</a>(dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a61f23dcb8ffcbe46cf8f1385b6065be7">lockid</a>); <span class="comment">/* Decrement sub-directory open counter */</span></div>
<div class="line"><span class="lineno"> 4609</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = 0;   <span class="comment">/* Invalidate directory object */</span></div>
<div class="line"><span class="lineno"> 4610</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4611</span>        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = 0; <span class="comment">/* Invalidate directory object */</span></div>
<div class="line"><span class="lineno"> 4612</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4613</span><span class="preprocessor">#if FF_FS_REENTRANT</span></div>
<div class="line"><span class="lineno"> 4614</span>        unlock_fs(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);       <span class="comment">/* Unlock volume */</span></div>
<div class="line"><span class="lineno"> 4615</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4616</span>    }</div>
<div class="line"><span class="lineno"> 4617</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 4618</span>}</div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html_a61f23dcb8ffcbe46cf8f1385b6065be7"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html#a61f23dcb8ffcbe46cf8f1385b6065be7">FFOBJID::lockid</a></div><div class="ttdeci">UINT lockid</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00197">ff.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35ff90f5219df5cdb6c8f408b1b9e1a3" name="a35ff90f5219df5cdb6c8f408b1b9e1a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35ff90f5219df5cdb6c8f408b1b9e1a3">&#9670;&#160;</a></span>f_expand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_expand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a>&#160;</td>
          <td class="paramname"><em>fsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a70461190a46edc96bb7baef1ab4dbd4d" name="a70461190a46edc96bb7baef1ab4dbd4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70461190a46edc96bb7baef1ab4dbd4d">&#9670;&#160;</a></span>f_fdisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_fdisk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>pdrv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a>&#160;</td>
          <td class="paramname"><em>ptbl</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>work</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6db7bc3d037b51a9f205eacda6177a5f" name="a6db7bc3d037b51a9f205eacda6177a5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6db7bc3d037b51a9f205eacda6177a5f">&#9670;&#160;</a></span>f_findfirst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_findfirst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>pattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a013999e446481a607316b916441f8673" name="a013999e446481a607316b916441f8673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a013999e446481a607316b916441f8673">&#9670;&#160;</a></span>f_findnext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_findnext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6c0c4cd695704aa6d952c90be81d9849" name="a6c0c4cd695704aa6d952c90be81d9849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0c4cd695704aa6d952c90be81d9849">&#9670;&#160;</a></span>f_forward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_forward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>(*)(const <a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *, <a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>btf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname"><em>bf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acb865a03dbac0031ac5cb8a031f7b71c" name="acb865a03dbac0031ac5cb8a031f7b71c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb865a03dbac0031ac5cb8a031f7b71c">&#9670;&#160;</a></span>f_getcwd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_getcwd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0ff39f75a87cbda9cd6ea65d83f16cec" name="a0ff39f75a87cbda9cd6ea65d83f16cec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ff39f75a87cbda9cd6ea65d83f16cec">&#9670;&#160;</a></span>f_getfree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_getfree </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *&#160;</td>
          <td class="paramname"><em>nclst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **&#160;</td>
          <td class="paramname"><em>fatfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04750">4750</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4755</span>{</div>
<div class="line"><span class="lineno"> 4756</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4757</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4758</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> nfree, clst, stat;</div>
<div class="line"><span class="lineno"> 4759</span>    <a class="code hl_typedef" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> sect;</div>
<div class="line"><span class="lineno"> 4760</span>    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> i;</div>
<div class="line"><span class="lineno"> 4761</span>    <a class="code hl_struct" href="struct_f_f_o_b_j_i_d.html">FFOBJID</a> obj;</div>
<div class="line"><span class="lineno"> 4762</span> </div>
<div class="line"><span class="lineno"> 4763</span> </div>
<div class="line"><span class="lineno"> 4764</span>    <span class="comment">/* Get logical drive */</span></div>
<div class="line"><span class="lineno"> 4765</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;fs, 0);</div>
<div class="line"><span class="lineno"> 4766</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4767</span>        *fatfs = fs;                <span class="comment">/* Return ptr to the fs object */</span></div>
<div class="line"><span class="lineno"> 4768</span>        <span class="comment">/* If free_clst is valid, return it without full FAT scan */</span></div>
<div class="line"><span class="lineno"> 4769</span>        <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ac834248773bf338df807f0d7e6b6a579">free_clst</a> &lt;= fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a8da50eeba6469bc20d60ca0cf9a1307c">n_fatent</a> - 2) {</div>
<div class="line"><span class="lineno"> 4770</span>            *nclst = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ac834248773bf338df807f0d7e6b6a579">free_clst</a>;</div>
<div class="line"><span class="lineno"> 4771</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4772</span>            <span class="comment">/* Scan FAT to obtain number of free clusters */</span></div>
<div class="line"><span class="lineno"> 4773</span>            nfree = 0;</div>
<div class="line"><span class="lineno"> 4774</span>            <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>) {  <span class="comment">/* FAT12: Scan bit field FAT entries */</span></div>
<div class="line"><span class="lineno"> 4775</span>                clst = 2; obj.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 4776</span>                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 4777</span>                    stat = <a class="code hl_function" href="ff_8c.html#a646295b3567c3e29932fab442b1c90e4">get_fat</a>(&amp;obj, clst);</div>
<div class="line"><span class="lineno"> 4778</span>                    <span class="keywordflow">if</span> (stat == 0xFFFFFFFF) { res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno"> 4779</span>                    <span class="keywordflow">if</span> (stat == 1) { res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno"> 4780</span>                    <span class="keywordflow">if</span> (stat == 0) nfree++;</div>
<div class="line"><span class="lineno"> 4781</span>                } <span class="keywordflow">while</span> (++clst &lt; fs-&gt;n_fatent);</div>
<div class="line"><span class="lineno"> 4782</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4783</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4784</span>                <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {  <span class="comment">/* exFAT: Scan allocation bitmap */</span></div>
<div class="line"><span class="lineno"> 4785</span>                    <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> bm;</div>
<div class="line"><span class="lineno"> 4786</span>                    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> <a class="code hl_variable" href="_common_8c.html#a2826644ea978cb49c4ee809b55e128d7">b</a>;</div>
<div class="line"><span class="lineno"> 4787</span> </div>
<div class="line"><span class="lineno"> 4788</span>                    clst = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a8da50eeba6469bc20d60ca0cf9a1307c">n_fatent</a> - 2;    <span class="comment">/* Number of clusters */</span></div>
<div class="line"><span class="lineno"> 4789</span>                    sect = fs-&gt;bitbase;         <span class="comment">/* Bitmap sector */</span></div>
<div class="line"><span class="lineno"> 4790</span>                    i = 0;                      <span class="comment">/* Offset in the sector */</span></div>
<div class="line"><span class="lineno"> 4791</span>                    <span class="keywordflow">do</span> {    <span class="comment">/* Counts numbuer of bits with zero in the bitmap */</span></div>
<div class="line"><span class="lineno"> 4792</span>                        <span class="keywordflow">if</span> (i == 0) {</div>
<div class="line"><span class="lineno"> 4793</span>                            res = <a class="code hl_function" href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a>(fs, sect++);</div>
<div class="line"><span class="lineno"> 4794</span>                            <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4795</span>                        }</div>
<div class="line"><span class="lineno"> 4796</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="_common_8c.html#a2826644ea978cb49c4ee809b55e128d7">b</a> = 8, bm = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>[i]; <a class="code hl_variable" href="_common_8c.html#a2826644ea978cb49c4ee809b55e128d7">b</a> &amp;&amp; clst; <a class="code hl_variable" href="_common_8c.html#a2826644ea978cb49c4ee809b55e128d7">b</a>--, clst--) {</div>
<div class="line"><span class="lineno"> 4797</span>                            <span class="keywordflow">if</span> (!(bm &amp; 1)) nfree++;</div>
<div class="line"><span class="lineno"> 4798</span>                            bm &gt;&gt;= 1;</div>
<div class="line"><span class="lineno"> 4799</span>                        }</div>
<div class="line"><span class="lineno"> 4800</span>                        i = (i + 1) % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);</div>
<div class="line"><span class="lineno"> 4801</span>                    } <span class="keywordflow">while</span> (clst);</div>
<div class="line"><span class="lineno"> 4802</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4803</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4804</span>                {   <span class="comment">/* FAT16/32: Scan WORD/DWORD FAT entries */</span></div>
<div class="line"><span class="lineno"> 4805</span>                    clst = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a8da50eeba6469bc20d60ca0cf9a1307c">n_fatent</a>;    <span class="comment">/* Number of entries */</span></div>
<div class="line"><span class="lineno"> 4806</span>                    sect = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a78b1024e7d7d086d132a58ee943b31df">fatbase</a>;     <span class="comment">/* Top of the FAT */</span></div>
<div class="line"><span class="lineno"> 4807</span>                    i = 0;                  <span class="comment">/* Offset in the sector */</span></div>
<div class="line"><span class="lineno"> 4808</span>                    <span class="keywordflow">do</span> {    <span class="comment">/* Counts numbuer of entries with zero in the FAT */</span></div>
<div class="line"><span class="lineno"> 4809</span>                        <span class="keywordflow">if</span> (i == 0) {</div>
<div class="line"><span class="lineno"> 4810</span>                            res = <a class="code hl_function" href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a>(fs, sect++);</div>
<div class="line"><span class="lineno"> 4811</span>                            <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4812</span>                        }</div>
<div class="line"><span class="lineno"> 4813</span>                        <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>) {</div>
<div class="line"><span class="lineno"> 4814</span>                            <span class="keywordflow">if</span> (<a class="code hl_function" href="ff_8c.html#afb2ad66be348163ba091faf871b0d9b6">ld_word</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + i) == 0) nfree++;</div>
<div class="line"><span class="lineno"> 4815</span>                            i += 2;</div>
<div class="line"><span class="lineno"> 4816</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4817</span>                            <span class="keywordflow">if</span> ((<a class="code hl_function" href="ff_8c.html#aa4880817cfec23d4e560b785d1ceefcb">ld_dword</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + i) &amp; 0x0FFFFFFF) == 0) nfree++;</div>
<div class="line"><span class="lineno"> 4818</span>                            i += 4;</div>
<div class="line"><span class="lineno"> 4819</span>                        }</div>
<div class="line"><span class="lineno"> 4820</span>                        i %= <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);</div>
<div class="line"><span class="lineno"> 4821</span>                    } <span class="keywordflow">while</span> (--clst);</div>
<div class="line"><span class="lineno"> 4822</span>                }</div>
<div class="line"><span class="lineno"> 4823</span>            }</div>
<div class="line"><span class="lineno"> 4824</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {     <span class="comment">/* Update parameters if succeeded */</span></div>
<div class="line"><span class="lineno"> 4825</span>                *nclst = nfree;         <span class="comment">/* Return the free clusters */</span></div>
<div class="line"><span class="lineno"> 4826</span>                fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ac834248773bf338df807f0d7e6b6a579">free_clst</a> = nfree;  <span class="comment">/* Now free_clst is valid */</span></div>
<div class="line"><span class="lineno"> 4827</span>                fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a84e9cdc5a6a8e33ea7ec192058abf161">fsi_flag</a> |= 1;      <span class="comment">/* FAT32: FSInfo is to be updated */</span></div>
<div class="line"><span class="lineno"> 4828</span>            }</div>
<div class="line"><span class="lineno"> 4829</span>        }</div>
<div class="line"><span class="lineno"> 4830</span>    }</div>
<div class="line"><span class="lineno"> 4831</span> </div>
<div class="line"><span class="lineno"> 4832</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4833</span>}</div>
<div class="ttc" id="a_common_8c_html_a2826644ea978cb49c4ee809b55e128d7"><div class="ttname"><a href="_common_8c.html#a2826644ea978cb49c4ee809b55e128d7">b</a></div><div class="ttdeci">static uint32_t b</div><div class="ttdef"><b>Definition</b> <a href="_common_8c_source.html#l00037">Common.c:37</a></div></div>
<div class="ttc" id="aff_8c_html_a324c71e5b952dff3a420d72358e5168b"><div class="ttname"><a href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a></div><div class="ttdeci">static FRESULT move_window(FATFS *fs, LBA_t sect)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01047">ff.c:1047</a></div></div>
<div class="ttc" id="aff_8c_html_a42b5140fc5e09a53c8f4cba66dc0e6c1"><div class="ttname"><a href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a></div><div class="ttdeci">#define SS(fs)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00263">ff.c:263</a></div></div>
<div class="ttc" id="aff_8c_html_a646295b3567c3e29932fab442b1c90e4"><div class="ttname"><a href="ff_8c.html#a646295b3567c3e29932fab442b1c90e4">get_fat</a></div><div class="ttdeci">static DWORD get_fat(FFOBJID *obj, DWORD clst)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01131">ff.c:1131</a></div></div>
<div class="ttc" id="aff_8c_html_afb2ad66be348163ba091faf871b0d9b6"><div class="ttname"><a href="ff_8c.html#afb2ad66be348163ba091faf871b0d9b6">ld_word</a></div><div class="ttdeci">static WORD ld_word(const BYTE *ptr)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00614">ff.c:614</a></div></div>
<div class="ttc" id="aff_8h_html_a1f3c30a83148a28340f009d4e583f087"><div class="ttname"><a href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a></div><div class="ttdeci">DWORD LBA_t</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00083">ff.h:83</a></div></div>
<div class="ttc" id="aff_8h_html_a7ef90a36d99edfc0138a2155a17a79b9"><div class="ttname"><a href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a></div><div class="ttdeci">#define FS_FAT16</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00406">ff.h:406</a></div></div>
<div class="ttc" id="aff_8h_html_aab755aa1b4f81f4aabee4a5d4738cfb0"><div class="ttname"><a href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a></div><div class="ttdeci">#define FS_FAT12</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00405">ff.h:405</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_a49e9c5c3ae9c13755242b6ce5748ecb1"><div class="ttname"><a href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">FATFS::win</a></div><div class="ttdeci">BYTE win[FF_MAX_SS]</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00175">ff.h:175</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_a78b1024e7d7d086d132a58ee943b31df"><div class="ttname"><a href="struct_f_a_t_f_s.html#a78b1024e7d7d086d132a58ee943b31df">FATFS::fatbase</a></div><div class="ttdeci">LBA_t fatbase</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00168">ff.h:168</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_a84e9cdc5a6a8e33ea7ec192058abf161"><div class="ttname"><a href="struct_f_a_t_f_s.html#a84e9cdc5a6a8e33ea7ec192058abf161">FATFS::fsi_flag</a></div><div class="ttdeci">BYTE fsi_flag</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00137">ff.h:137</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_a8da50eeba6469bc20d60ca0cf9a1307c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a8da50eeba6469bc20d60ca0cf9a1307c">FATFS::n_fatent</a></div><div class="ttdeci">DWORD n_fatent</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00165">ff.h:165</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_ac834248773bf338df807f0d7e6b6a579"><div class="ttname"><a href="struct_f_a_t_f_s.html#ac834248773bf338df807f0d7e6b6a579">FATFS::free_clst</a></div><div class="ttdeci">DWORD free_clst</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00155">ff.h:155</a></div></div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html">FFOBJID</a></div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00182">ff.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4ff40a674bcbfe40d81b1e8e54befc6" name="ac4ff40a674bcbfe40d81b1e8e54befc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4ff40a674bcbfe40d81b1e8e54befc6">&#9670;&#160;</a></span>f_getlabel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_getlabel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *&#160;</td>
          <td class="paramname"><em>vsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a47f14a554ff3a49fc122fe3e190f2f" name="a4a47f14a554ff3a49fc122fe3e190f2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a47f14a554ff3a49fc122fe3e190f2f">&#9670;&#160;</a></span>f_gets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * f_gets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l06338">6338</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 6343</span>{</div>
<div class="line"><span class="lineno"> 6344</span>    <span class="keywordtype">int</span> nc = 0;</div>
<div class="line"><span class="lineno"> 6345</span>    <a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *p = buff;</div>
<div class="line"><span class="lineno"> 6346</span>    <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> s[4];</div>
<div class="line"><span class="lineno"> 6347</span>    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> rc;</div>
<div class="line"><span class="lineno"> 6348</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dc;</div>
<div class="line"><span class="lineno"> 6349</span><span class="preprocessor">#if FF_USE_LFN &amp;&amp; FF_LFN_UNICODE &amp;&amp; FF_STRF_ENCODE &lt;= 2</span></div>
<div class="line"><span class="lineno"> 6350</span>    <a class="code hl_typedef" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> wc;</div>
<div class="line"><span class="lineno"> 6351</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6352</span><span class="preprocessor">#if FF_USE_LFN &amp;&amp; FF_LFN_UNICODE &amp;&amp; FF_STRF_ENCODE == 3</span></div>
<div class="line"><span class="lineno"> 6353</span>    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> ct;</div>
<div class="line"><span class="lineno"> 6354</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6355</span> </div>
<div class="line"><span class="lineno"> 6356</span><span class="preprocessor">#if FF_USE_LFN &amp;&amp; FF_LFN_UNICODE            </span><span class="comment">/* With code conversion (Unicode API) */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 6357</span>    <span class="comment">/* Make a room for the character and terminator  */</span></div>
<div class="line"><span class="lineno"> 6358</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#a95aeacb103bd1c4e03b3e154e450c534">FF_LFN_UNICODE</a> == 1) len -= (<a class="code hl_define" href="ffconf_8h.html#a6ecc215308b4ead043b2e4e513ea203e">FF_STRF_ENCODE</a> == 0) ? 1 : 2;</div>
<div class="line"><span class="lineno"> 6359</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#a95aeacb103bd1c4e03b3e154e450c534">FF_LFN_UNICODE</a> == 2) len -= (<a class="code hl_define" href="ffconf_8h.html#a6ecc215308b4ead043b2e4e513ea203e">FF_STRF_ENCODE</a> == 0) ? 3 : 4;</div>
<div class="line"><span class="lineno"> 6360</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#a95aeacb103bd1c4e03b3e154e450c534">FF_LFN_UNICODE</a> == 3) len -= 1;</div>
<div class="line"><span class="lineno"> 6361</span>    <span class="keywordflow">while</span> (nc &lt; len) {</div>
<div class="line"><span class="lineno"> 6362</span><span class="preprocessor">#if FF_STRF_ENCODE == 0             </span><span class="comment">/* Read a character in ANSI/OEM */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 6363</span>        <a class="code hl_function" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, s, 1, &amp;rc);      <span class="comment">/* Get a code unit */</span></div>
<div class="line"><span class="lineno"> 6364</span>        <span class="keywordflow">if</span> (rc != 1) <span class="keywordflow">break</span>;         <span class="comment">/* EOF? */</span></div>
<div class="line"><span class="lineno"> 6365</span>        wc = s[0];</div>
<div class="line"><span class="lineno"> 6366</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="ff_8c.html#a2c5f3b093781d610ede2762365b97922">dbc_1st</a>((<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)wc)) {    <span class="comment">/* DBC 1st byte? */</span></div>
<div class="line"><span class="lineno"> 6367</span>            <a class="code hl_function" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, s, 1, &amp;rc);  <span class="comment">/* Get 2nd byte */</span></div>
<div class="line"><span class="lineno"> 6368</span>            <span class="keywordflow">if</span> (rc != 1 || !<a class="code hl_function" href="ff_8c.html#aeca4a7f8eda7516a9fc978337214a499">dbc_2nd</a>(s[0])) <span class="keywordflow">continue</span>;    <span class="comment">/* Wrong code? */</span></div>
<div class="line"><span class="lineno"> 6369</span>            wc = wc &lt;&lt; 8 | s[0];</div>
<div class="line"><span class="lineno"> 6370</span>        }</div>
<div class="line"><span class="lineno"> 6371</span>        dc = <a class="code hl_function" href="ff_8h.html#a52f09f31c84747cc135c90282509961a">ff_oem2uni</a>(wc, <a class="code hl_define" href="ff_8c.html#a0532865fc94e93704941f95e9425ccb9">CODEPAGE</a>);  <span class="comment">/* Convert ANSI/OEM into Unicode */</span></div>
<div class="line"><span class="lineno"> 6372</span>        <span class="keywordflow">if</span> (dc == 0) <span class="keywordflow">continue</span>;      <span class="comment">/* Conversion error? */</span></div>
<div class="line"><span class="lineno"> 6373</span><span class="preprocessor">#elif FF_STRF_ENCODE == 1 || FF_STRF_ENCODE == 2    </span><span class="comment">/* Read a character in UTF-16LE/BE */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 6374</span>        <a class="code hl_function" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, s, 2, &amp;rc);      <span class="comment">/* Get a code unit */</span></div>
<div class="line"><span class="lineno"> 6375</span>        <span class="keywordflow">if</span> (rc != 2) <span class="keywordflow">break</span>;         <span class="comment">/* EOF? */</span></div>
<div class="line"><span class="lineno"> 6376</span>        dc = (<a class="code hl_define" href="ffconf_8h.html#a6ecc215308b4ead043b2e4e513ea203e">FF_STRF_ENCODE</a> == 1) ? <a class="code hl_function" href="ff_8c.html#afb2ad66be348163ba091faf871b0d9b6">ld_word</a>(s) : s[0] &lt;&lt; 8 | s[1];</div>
<div class="line"><span class="lineno"> 6377</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="ff_8c.html#a7a67adc6a71fa08dbbe481ad756849c4">IsSurrogateL</a>(dc)) <span class="keywordflow">continue</span>; <span class="comment">/* Broken surrogate pair? */</span></div>
<div class="line"><span class="lineno"> 6378</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="ff_8c.html#ad148073d4a74bdff0f86f2b18284b569">IsSurrogateH</a>(dc)) {     <span class="comment">/* High surrogate? */</span></div>
<div class="line"><span class="lineno"> 6379</span>            <a class="code hl_function" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, s, 2, &amp;rc);  <span class="comment">/* Get low surrogate */</span></div>
<div class="line"><span class="lineno"> 6380</span>            <span class="keywordflow">if</span> (rc != 2) <span class="keywordflow">break</span>;     <span class="comment">/* EOF? */</span></div>
<div class="line"><span class="lineno"> 6381</span>            wc = (<a class="code hl_define" href="ffconf_8h.html#a6ecc215308b4ead043b2e4e513ea203e">FF_STRF_ENCODE</a> == 1) ? <a class="code hl_function" href="ff_8c.html#afb2ad66be348163ba091faf871b0d9b6">ld_word</a>(s) : s[0] &lt;&lt; 8 | s[1];</div>
<div class="line"><span class="lineno"> 6382</span>            <span class="keywordflow">if</span> (!<a class="code hl_define" href="ff_8c.html#a7a67adc6a71fa08dbbe481ad756849c4">IsSurrogateL</a>(wc)) <span class="keywordflow">continue</span>;    <span class="comment">/* Broken surrogate pair? */</span></div>
<div class="line"><span class="lineno"> 6383</span>            dc = ((dc &amp; 0x3FF) + 0x40) &lt;&lt; 10 | (wc &amp; 0x3FF);    <span class="comment">/* Merge surrogate pair */</span></div>
<div class="line"><span class="lineno"> 6384</span>        }</div>
<div class="line"><span class="lineno"> 6385</span><span class="preprocessor">#else   </span><span class="comment">/* Read a character in UTF-8 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 6386</span>        <a class="code hl_function" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, s, 1, &amp;rc);      <span class="comment">/* Get a code unit */</span></div>
<div class="line"><span class="lineno"> 6387</span>        <span class="keywordflow">if</span> (rc != 1) <span class="keywordflow">break</span>;         <span class="comment">/* EOF? */</span></div>
<div class="line"><span class="lineno"> 6388</span>        dc = s[0];</div>
<div class="line"><span class="lineno"> 6389</span>        <span class="keywordflow">if</span> (dc &gt;= 0x80) {           <span class="comment">/* Multi-byte sequence? */</span></div>
<div class="line"><span class="lineno"> 6390</span>            ct = 0;</div>
<div class="line"><span class="lineno"> 6391</span>            <span class="keywordflow">if</span> ((dc &amp; 0xE0) == 0xC0) { dc &amp;= 0x1F; ct = 1; }    <span class="comment">/* 2-byte sequence? */</span></div>
<div class="line"><span class="lineno"> 6392</span>            <span class="keywordflow">if</span> ((dc &amp; 0xF0) == 0xE0) { dc &amp;= 0x0F; ct = 2; }    <span class="comment">/* 3-byte sequence? */</span></div>
<div class="line"><span class="lineno"> 6393</span>            <span class="keywordflow">if</span> ((dc &amp; 0xF8) == 0xF0) { dc &amp;= 0x07; ct = 3; }    <span class="comment">/* 4-byte sequence? */</span></div>
<div class="line"><span class="lineno"> 6394</span>            <span class="keywordflow">if</span> (ct == 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6395</span>            <a class="code hl_function" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, s, ct, &amp;rc); <span class="comment">/* Get trailing bytes */</span></div>
<div class="line"><span class="lineno"> 6396</span>            <span class="keywordflow">if</span> (rc != ct) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6397</span>            rc = 0;</div>
<div class="line"><span class="lineno"> 6398</span>            <span class="keywordflow">do</span> {    <span class="comment">/* Merge the byte sequence */</span></div>
<div class="line"><span class="lineno"> 6399</span>                <span class="keywordflow">if</span> ((s[rc] &amp; 0xC0) != 0x80) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6400</span>                dc = dc &lt;&lt; 6 | (s[rc] &amp; 0x3F);</div>
<div class="line"><span class="lineno"> 6401</span>            } <span class="keywordflow">while</span> (++rc &lt; ct);</div>
<div class="line"><span class="lineno"> 6402</span>            <span class="keywordflow">if</span> (rc != ct || dc &lt; 0x80 || <a class="code hl_define" href="ff_8c.html#a1678f40df73ed6cd30ed3e837b3558e7">IsSurrogate</a>(dc) || dc &gt;= 0x110000) <span class="keywordflow">continue</span>;   <span class="comment">/* Wrong encoding? */</span></div>
<div class="line"><span class="lineno"> 6403</span>        }</div>
<div class="line"><span class="lineno"> 6404</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6405</span>        <span class="comment">/* A code point is avaialble in dc to be output */</span></div>
<div class="line"><span class="lineno"> 6406</span> </div>
<div class="line"><span class="lineno"> 6407</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#a9870e2a5b84ce00fc47e0fd89b337495">FF_USE_STRFUNC</a> == 2 &amp;&amp; dc == <span class="charliteral">&#39;\r&#39;</span>) <span class="keywordflow">continue</span>;    <span class="comment">/* Strip \r off if needed */</span></div>
<div class="line"><span class="lineno"> 6408</span><span class="preprocessor">#if FF_LFN_UNICODE == 1 || FF_LFN_UNICODE == 3  </span><span class="comment">/* Output it in UTF-16/32 encoding */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 6409</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#a95aeacb103bd1c4e03b3e154e450c534">FF_LFN_UNICODE</a> == 1 &amp;&amp; dc &gt;= 0x10000) { <span class="comment">/* Out of BMP at UTF-16? */</span></div>
<div class="line"><span class="lineno"> 6410</span>            *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0xD800 | ((dc &gt;&gt; 10) - 0x40)); nc++; <span class="comment">/* Make and output high surrogate */</span></div>
<div class="line"><span class="lineno"> 6411</span>            dc = 0xDC00 | (dc &amp; 0x3FF);     <span class="comment">/* Make low surrogate */</span></div>
<div class="line"><span class="lineno"> 6412</span>        }</div>
<div class="line"><span class="lineno"> 6413</span>        *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)dc; nc++;</div>
<div class="line"><span class="lineno"> 6414</span>        <span class="keywordflow">if</span> (dc == <span class="charliteral">&#39;\n&#39;</span>) <span class="keywordflow">break</span>;  <span class="comment">/* End of line? */</span></div>
<div class="line"><span class="lineno"> 6415</span><span class="preprocessor">#elif FF_LFN_UNICODE == 2       </span><span class="comment">/* Output it in UTF-8 encoding */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 6416</span>        <span class="keywordflow">if</span> (dc &lt; 0x80) {    <span class="comment">/* Single byte? */</span></div>
<div class="line"><span class="lineno"> 6417</span>            *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)dc;</div>
<div class="line"><span class="lineno"> 6418</span>            nc++;</div>
<div class="line"><span class="lineno"> 6419</span>            <span class="keywordflow">if</span> (dc == <span class="charliteral">&#39;\n&#39;</span>) <span class="keywordflow">break</span>;  <span class="comment">/* End of line? */</span></div>
<div class="line"><span class="lineno"> 6420</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 6421</span>            <span class="keywordflow">if</span> (dc &lt; 0x800) {       <span class="comment">/* 2-byte sequence? */</span></div>
<div class="line"><span class="lineno"> 6422</span>                *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0xC0 | (dc &gt;&gt; 6 &amp; 0x1F));</div>
<div class="line"><span class="lineno"> 6423</span>                *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0x80 | (dc &gt;&gt; 0 &amp; 0x3F));</div>
<div class="line"><span class="lineno"> 6424</span>                nc += 2;</div>
<div class="line"><span class="lineno"> 6425</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 6426</span>                <span class="keywordflow">if</span> (dc &lt; 0x10000) { <span class="comment">/* 3-byte sequence? */</span></div>
<div class="line"><span class="lineno"> 6427</span>                    *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0xE0 | (dc &gt;&gt; 12 &amp; 0x0F));</div>
<div class="line"><span class="lineno"> 6428</span>                    *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0x80 | (dc &gt;&gt; 6 &amp; 0x3F));</div>
<div class="line"><span class="lineno"> 6429</span>                    *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0x80 | (dc &gt;&gt; 0 &amp; 0x3F));</div>
<div class="line"><span class="lineno"> 6430</span>                    nc += 3;</div>
<div class="line"><span class="lineno"> 6431</span>                } <span class="keywordflow">else</span> {            <span class="comment">/* 4-byte sequence? */</span></div>
<div class="line"><span class="lineno"> 6432</span>                    *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0xF0 | (dc &gt;&gt; 18 &amp; 0x07));</div>
<div class="line"><span class="lineno"> 6433</span>                    *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0x80 | (dc &gt;&gt; 12 &amp; 0x3F));</div>
<div class="line"><span class="lineno"> 6434</span>                    *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0x80 | (dc &gt;&gt; 6 &amp; 0x3F));</div>
<div class="line"><span class="lineno"> 6435</span>                    *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)(0x80 | (dc &gt;&gt; 0 &amp; 0x3F));</div>
<div class="line"><span class="lineno"> 6436</span>                    nc += 4;</div>
<div class="line"><span class="lineno"> 6437</span>                }</div>
<div class="line"><span class="lineno"> 6438</span>            }</div>
<div class="line"><span class="lineno"> 6439</span>        }</div>
<div class="line"><span class="lineno"> 6440</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6441</span>    }</div>
<div class="line"><span class="lineno"> 6442</span> </div>
<div class="line"><span class="lineno"> 6443</span><span class="preprocessor">#else           </span><span class="comment">/* Byte-by-byte read without any conversion (ANSI/OEM API) */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 6444</span>    len -= 1;   <span class="comment">/* Make a room for the terminator */</span></div>
<div class="line"><span class="lineno"> 6445</span>    <span class="keywordflow">while</span> (nc &lt; len) {</div>
<div class="line"><span class="lineno"> 6446</span>        <a class="code hl_function" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, s, 1, &amp;rc);  <span class="comment">/* Get a byte */</span></div>
<div class="line"><span class="lineno"> 6447</span>        <span class="keywordflow">if</span> (rc != 1) <span class="keywordflow">break</span>;     <span class="comment">/* EOF? */</span></div>
<div class="line"><span class="lineno"> 6448</span>        dc = s[0];</div>
<div class="line"><span class="lineno"> 6449</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#a9870e2a5b84ce00fc47e0fd89b337495">FF_USE_STRFUNC</a> == 2 &amp;&amp; dc == <span class="charliteral">&#39;\r&#39;</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6450</span>        *p++ = (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)dc; nc++;</div>
<div class="line"><span class="lineno"> 6451</span>        <span class="keywordflow">if</span> (dc == <span class="charliteral">&#39;\n&#39;</span>) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6452</span>    }</div>
<div class="line"><span class="lineno"> 6453</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6454</span> </div>
<div class="line"><span class="lineno"> 6455</span>    *p = 0;     <span class="comment">/* Terminate the string */</span></div>
<div class="line"><span class="lineno"> 6456</span>    <span class="keywordflow">return</span> nc ? buff : 0;   <span class="comment">/* When no data read due to EOF or error, return with error. */</span></div>
<div class="line"><span class="lineno"> 6457</span>}</div>
<div class="ttc" id="aff_8c_html_a0532865fc94e93704941f95e9425ccb9"><div class="ttname"><a href="ff_8c.html#a0532865fc94e93704941f95e9425ccb9">CODEPAGE</a></div><div class="ttdeci">#define CODEPAGE</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00591">ff.c:591</a></div></div>
<div class="ttc" id="aff_8c_html_a1678f40df73ed6cd30ed3e837b3558e7"><div class="ttname"><a href="ff_8c.html#a1678f40df73ed6cd30ed3e837b3558e7">IsSurrogate</a></div><div class="ttdeci">#define IsSurrogate(c)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00053">ff.c:53</a></div></div>
<div class="ttc" id="aff_8c_html_a2c5f3b093781d610ede2762365b97922"><div class="ttname"><a href="ff_8c.html#a2c5f3b093781d610ede2762365b97922">dbc_1st</a></div><div class="ttdeci">static int dbc_1st(BYTE c)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00688">ff.c:688</a></div></div>
<div class="ttc" id="aff_8c_html_a7a67adc6a71fa08dbbe481ad756849c4"><div class="ttname"><a href="ff_8c.html#a7a67adc6a71fa08dbbe481ad756849c4">IsSurrogateL</a></div><div class="ttdeci">#define IsSurrogateL(c)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00055">ff.c:55</a></div></div>
<div class="ttc" id="aff_8c_html_ac4c3dcb6869ca252888eebabe39727b3"><div class="ttname"><a href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a></div><div class="ttdeci">FRESULT f_read(FIL *fp, void *buff, UINT btr, UINT *br)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l03850">ff.c:3850</a></div></div>
<div class="ttc" id="aff_8c_html_ad148073d4a74bdff0f86f2b18284b569"><div class="ttname"><a href="ff_8c.html#ad148073d4a74bdff0f86f2b18284b569">IsSurrogateH</a></div><div class="ttdeci">#define IsSurrogateH(c)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00054">ff.c:54</a></div></div>
<div class="ttc" id="aff_8c_html_aeca4a7f8eda7516a9fc978337214a499"><div class="ttname"><a href="ff_8c.html#aeca4a7f8eda7516a9fc978337214a499">dbc_2nd</a></div><div class="ttdeci">static int dbc_2nd(BYTE c)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00708">ff.c:708</a></div></div>
<div class="ttc" id="aff_8h_html_a03bdb8ce5895c7e261aadc2529637546"><div class="ttname"><a href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></div><div class="ttdeci">char TCHAR</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00105">ff.h:105</a></div></div>
<div class="ttc" id="aff_8h_html_a0bb095da65fbe52192dd9e3e643c7568"><div class="ttname"><a href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a></div><div class="ttdeci">WORD WCHAR</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00062">ff.h:62</a></div></div>
<div class="ttc" id="aff_8h_html_a52f09f31c84747cc135c90282509961a"><div class="ttname"><a href="ff_8h.html#a52f09f31c84747cc135c90282509961a">ff_oem2uni</a></div><div class="ttdeci">WCHAR ff_oem2uni(WCHAR oem, WORD cp)</div><div class="ttdef"><b>Definition</b> <a href="ffunicode_8c_source.html#l15244">ffunicode.c:15244</a></div></div>
<div class="ttc" id="affconf_8h_html_a6ecc215308b4ead043b2e4e513ea203e"><div class="ttname"><a href="ffconf_8h.html#a6ecc215308b4ead043b2e4e513ea203e">FF_STRF_ENCODE</a></div><div class="ttdeci">#define FF_STRF_ENCODE</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00065">ffconf.h:65</a></div></div>
<div class="ttc" id="affconf_8h_html_a95aeacb103bd1c4e03b3e154e450c534"><div class="ttname"><a href="ffconf_8h.html#a95aeacb103bd1c4e03b3e154e450c534">FF_LFN_UNICODE</a></div><div class="ttdeci">#define FF_LFN_UNICODE</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00139">ffconf.h:139</a></div></div>
<div class="ttc" id="affconf_8h_html_a9870e2a5b84ce00fc47e0fd89b337495"><div class="ttname"><a href="ffconf_8h.html#a9870e2a5b84ce00fc47e0fd89b337495">FF_USE_STRFUNC</a></div><div class="ttdeci">#define FF_USE_STRFUNC</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00062">ffconf.h:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c4bcf81d9122f0b5376852ec6a8c3eb" name="a7c4bcf81d9122f0b5376852ec6a8c3eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c4bcf81d9122f0b5376852ec6a8c3eb">&#9670;&#160;</a></span>f_lseek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_lseek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a>&#160;</td>
          <td class="paramname"><em>ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04367">4367</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4371</span>{</div>
<div class="line"><span class="lineno"> 4372</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4373</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4374</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, bcs;</div>
<div class="line"><span class="lineno"> 4375</span>    <a class="code hl_typedef" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> nsect;</div>
<div class="line"><span class="lineno"> 4376</span>    <a class="code hl_typedef" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a> ifptr;</div>
<div class="line"><span class="lineno"> 4377</span><span class="preprocessor">#if FF_USE_FASTSEEK</span></div>
<div class="line"><span class="lineno"> 4378</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> cl, pcl, ncl, tcl, tlen, ulen;</div>
<div class="line"><span class="lineno"> 4379</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *tbl;</div>
<div class="line"><span class="lineno"> 4380</span>    <a class="code hl_typedef" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> dsc;</div>
<div class="line"><span class="lineno"> 4381</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4382</span> </div>
<div class="line"><span class="lineno"> 4383</span>    res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, &amp;fs);      <span class="comment">/* Check validity of the file object */</span></div>
<div class="line"><span class="lineno"> 4384</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = (<a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;err;</div>
<div class="line"><span class="lineno"> 4385</span><span class="preprocessor">#if FF_FS_EXFAT &amp;&amp; !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 4386</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 4387</span>        res = fill_last_frag(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust, 0xFFFFFFFF);  <span class="comment">/* Fill last fragment on the FAT if needed */</span></div>
<div class="line"><span class="lineno"> 4388</span>    }</div>
<div class="line"><span class="lineno"> 4389</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4390</span>    <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4391</span> </div>
<div class="line"><span class="lineno"> 4392</span><span class="preprocessor">#if FF_USE_FASTSEEK</span></div>
<div class="line"><span class="lineno"> 4393</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;cltbl) {    <span class="comment">/* Fast seek */</span></div>
<div class="line"><span class="lineno"> 4394</span>        <span class="keywordflow">if</span> (ofs == <a class="code hl_define" href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a>) {    <span class="comment">/* Create CLMT */</span></div>
<div class="line"><span class="lineno"> 4395</span>            tbl = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;cltbl;</div>
<div class="line"><span class="lineno"> 4396</span>            tlen = *tbl++; ulen = 2;    <span class="comment">/* Given table size and required table size */</span></div>
<div class="line"><span class="lineno"> 4397</span>            cl = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust;        <span class="comment">/* Origin of the chain */</span></div>
<div class="line"><span class="lineno"> 4398</span>            <span class="keywordflow">if</span> (cl != 0) {</div>
<div class="line"><span class="lineno"> 4399</span>                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 4400</span>                    <span class="comment">/* Get a fragment */</span></div>
<div class="line"><span class="lineno"> 4401</span>                    tcl = cl; ncl = 0; ulen += 2;   <span class="comment">/* Top, length and used items */</span></div>
<div class="line"><span class="lineno"> 4402</span>                    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 4403</span>                        pcl = cl; ncl++;</div>
<div class="line"><span class="lineno"> 4404</span>                        cl = <a class="code hl_function" href="ff_8c.html#a646295b3567c3e29932fab442b1c90e4">get_fat</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, cl);</div>
<div class="line"><span class="lineno"> 4405</span>                        <span class="keywordflow">if</span> (cl &lt;= 1) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 4406</span>                        <span class="keywordflow">if</span> (cl == 0xFFFFFFFF) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4407</span>                    } <span class="keywordflow">while</span> (cl == pcl + 1);</div>
<div class="line"><span class="lineno"> 4408</span>                    <span class="keywordflow">if</span> (ulen &lt;= tlen) {     <span class="comment">/* Store the length and top of the fragment */</span></div>
<div class="line"><span class="lineno"> 4409</span>                        *tbl++ = ncl; *tbl++ = tcl;</div>
<div class="line"><span class="lineno"> 4410</span>                    }</div>
<div class="line"><span class="lineno"> 4411</span>                } <span class="keywordflow">while</span> (cl &lt; fs-&gt;n_fatent);    <span class="comment">/* Repeat until end of chain */</span></div>
<div class="line"><span class="lineno"> 4412</span>            }</div>
<div class="line"><span class="lineno"> 4413</span>            *<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;cltbl = ulen;  <span class="comment">/* Number of items used */</span></div>
<div class="line"><span class="lineno"> 4414</span>            <span class="keywordflow">if</span> (ulen &lt;= tlen) {</div>
<div class="line"><span class="lineno"> 4415</span>                *tbl = 0;       <span class="comment">/* Terminate table */</span></div>
<div class="line"><span class="lineno"> 4416</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4417</span>                res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>;   <span class="comment">/* Given table size is smaller than required */</span></div>
<div class="line"><span class="lineno"> 4418</span>            }</div>
<div class="line"><span class="lineno"> 4419</span>        } <span class="keywordflow">else</span> {                        <span class="comment">/* Fast seek */</span></div>
<div class="line"><span class="lineno"> 4420</span>            <span class="keywordflow">if</span> (ofs &gt; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize) ofs = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize;   <span class="comment">/* Clip offset at the file size */</span></div>
<div class="line"><span class="lineno"> 4421</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr = ofs;             <span class="comment">/* Set file pointer */</span></div>
<div class="line"><span class="lineno"> 4422</span>            <span class="keywordflow">if</span> (ofs &gt; 0) {</div>
<div class="line"><span class="lineno"> 4423</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust = clmt_clust(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, ofs - 1);</div>
<div class="line"><span class="lineno"> 4424</span>                dsc = <a class="code hl_function" href="ff_8c.html#a4c9686ac79b28c453a4d9fd7f0b53f9b">clst2sect</a>(fs, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust);</div>
<div class="line"><span class="lineno"> 4425</span>                <span class="keywordflow">if</span> (dsc == 0) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 4426</span>                dsc += (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)((ofs - 1) / <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)) &amp; (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> - 1);</div>
<div class="line"><span class="lineno"> 4427</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) &amp;&amp; dsc != <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect) { <span class="comment">/* Refill sector cache if needed */</span></div>
<div class="line"><span class="lineno"> 4428</span><span class="preprocessor">#if !FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4429</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 4430</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>) {      <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line"><span class="lineno"> 4431</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4432</span>                        <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 4433</span>                    }</div>
<div class="line"><span class="lineno"> 4434</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4435</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#a0711b1d03b833e9d73b3be1a6397f461">disk_read</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, dsc, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>); <span class="comment">/* Load current sector */</span></div>
<div class="line"><span class="lineno"> 4436</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4437</span>                    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect = dsc;</div>
<div class="line"><span class="lineno"> 4438</span>                }</div>
<div class="line"><span class="lineno"> 4439</span>            }</div>
<div class="line"><span class="lineno"> 4440</span>        }</div>
<div class="line"><span class="lineno"> 4441</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4442</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4443</span> </div>
<div class="line"><span class="lineno"> 4444</span>    <span class="comment">/* Normal Seek */</span></div>
<div class="line"><span class="lineno"> 4445</span>    {</div>
<div class="line"><span class="lineno"> 4446</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4447</span>        <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> != <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a> &amp;&amp; ofs &gt;= 0x100000000) ofs = 0xFFFFFFFF;    <span class="comment">/* Clip at 4 GiB - 1 if at FATxx */</span></div>
<div class="line"><span class="lineno"> 4448</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4449</span>        <span class="keywordflow">if</span> (ofs &gt; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize &amp;&amp; (<a class="code hl_define" href="ffconf_8h.html#ac932d228331b07248a3faa6f5904a49d">FF_FS_READONLY</a> || !(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>))) {  <span class="comment">/* In read-only mode, clip offset with the file size */</span></div>
<div class="line"><span class="lineno"> 4450</span>            ofs = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize;</div>
<div class="line"><span class="lineno"> 4451</span>        }</div>
<div class="line"><span class="lineno"> 4452</span>        ifptr = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr;</div>
<div class="line"><span class="lineno"> 4453</span>        <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr = nsect = 0;</div>
<div class="line"><span class="lineno"> 4454</span>        <span class="keywordflow">if</span> (ofs &gt; 0) {</div>
<div class="line"><span class="lineno"> 4455</span>            bcs = (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);    <span class="comment">/* Cluster size (byte) */</span></div>
<div class="line"><span class="lineno"> 4456</span>            <span class="keywordflow">if</span> (ifptr &gt; 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 4457</span>                (ofs - 1) / bcs &gt;= (ifptr - 1) / bcs) { <span class="comment">/* When seek to same or following cluster, */</span></div>
<div class="line"><span class="lineno"> 4458</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr = (ifptr - 1) &amp; ~(<a class="code hl_typedef" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a>)(bcs - 1);   <span class="comment">/* start from the current cluster */</span></div>
<div class="line"><span class="lineno"> 4459</span>                ofs -= <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr;</div>
<div class="line"><span class="lineno"> 4460</span>                clst = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust;</div>
<div class="line"><span class="lineno"> 4461</span>            } <span class="keywordflow">else</span> {                                    <span class="comment">/* When seek to back cluster, */</span></div>
<div class="line"><span class="lineno"> 4462</span>                clst = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust;                  <span class="comment">/* start from the first cluster */</span></div>
<div class="line"><span class="lineno"> 4463</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 4464</span>                <span class="keywordflow">if</span> (clst == 0) {                        <span class="comment">/* If no cluster chain, create a new chain */</span></div>
<div class="line"><span class="lineno"> 4465</span>                    clst = <a class="code hl_function" href="ff_8c.html#a31672d266a18255892580984a708fd96">create_chain</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, 0);</div>
<div class="line"><span class="lineno"> 4466</span>                    <span class="keywordflow">if</span> (clst == 1) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 4467</span>                    <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4468</span>                    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust = clst;</div>
<div class="line"><span class="lineno"> 4469</span>                }</div>
<div class="line"><span class="lineno"> 4470</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4471</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust = clst;</div>
<div class="line"><span class="lineno"> 4472</span>            }</div>
<div class="line"><span class="lineno"> 4473</span>            <span class="keywordflow">if</span> (clst != 0) {</div>
<div class="line"><span class="lineno"> 4474</span>                <span class="keywordflow">while</span> (ofs &gt; bcs) {                     <span class="comment">/* Cluster following loop */</span></div>
<div class="line"><span class="lineno"> 4475</span>                    ofs -= bcs; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr += bcs;</div>
<div class="line"><span class="lineno"> 4476</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 4477</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) {          <span class="comment">/* Check if in write mode or not */</span></div>
<div class="line"><span class="lineno"> 4478</span>                        <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#a4374b721b8019acc9761fdd8b829ccd0">FF_FS_EXFAT</a> &amp;&amp; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr &gt; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize) {    <span class="comment">/* No FAT chain object needs correct objsize to generate FAT value */</span></div>
<div class="line"><span class="lineno"> 4479</span>                            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr;</div>
<div class="line"><span class="lineno"> 4480</span>                            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag |= <a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>;</div>
<div class="line"><span class="lineno"> 4481</span>                        }</div>
<div class="line"><span class="lineno"> 4482</span>                        clst = <a class="code hl_function" href="ff_8c.html#a31672d266a18255892580984a708fd96">create_chain</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, clst);    <span class="comment">/* Follow chain with forceed stretch */</span></div>
<div class="line"><span class="lineno"> 4483</span>                        <span class="keywordflow">if</span> (clst == 0) {                <span class="comment">/* Clip file size in case of disk full */</span></div>
<div class="line"><span class="lineno"> 4484</span>                            ofs = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4485</span>                        }</div>
<div class="line"><span class="lineno"> 4486</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4487</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4488</span>                    {</div>
<div class="line"><span class="lineno"> 4489</span>                        clst = <a class="code hl_function" href="ff_8c.html#a646295b3567c3e29932fab442b1c90e4">get_fat</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, clst); <span class="comment">/* Follow cluster chain if not in write mode */</span></div>
<div class="line"><span class="lineno"> 4490</span>                    }</div>
<div class="line"><span class="lineno"> 4491</span>                    <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4492</span>                    <span class="keywordflow">if</span> (clst &lt;= 1 || clst &gt;= fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a8da50eeba6469bc20d60ca0cf9a1307c">n_fatent</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 4493</span>                    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust = clst;</div>
<div class="line"><span class="lineno"> 4494</span>                }</div>
<div class="line"><span class="lineno"> 4495</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr += ofs;</div>
<div class="line"><span class="lineno"> 4496</span>                <span class="keywordflow">if</span> (ofs % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)) {</div>
<div class="line"><span class="lineno"> 4497</span>                    nsect = <a class="code hl_function" href="ff_8c.html#a4c9686ac79b28c453a4d9fd7f0b53f9b">clst2sect</a>(fs, clst);    <span class="comment">/* Current sector */</span></div>
<div class="line"><span class="lineno"> 4498</span>                    <span class="keywordflow">if</span> (nsect == 0) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 4499</span>                    nsect += (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(ofs / <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));</div>
<div class="line"><span class="lineno"> 4500</span>                }</div>
<div class="line"><span class="lineno"> 4501</span>            }</div>
<div class="line"><span class="lineno"> 4502</span>        }</div>
<div class="line"><span class="lineno"> 4503</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="ffconf_8h.html#ac932d228331b07248a3faa6f5904a49d">FF_FS_READONLY</a> &amp;&amp; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr &gt; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize) {    <span class="comment">/* Set file change flag if the file size is extended */</span></div>
<div class="line"><span class="lineno"> 4504</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr;</div>
<div class="line"><span class="lineno"> 4505</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag |= <a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>;</div>
<div class="line"><span class="lineno"> 4506</span>        }</div>
<div class="line"><span class="lineno"> 4507</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) &amp;&amp; nsect != <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect) {   <span class="comment">/* Fill sector cache if needed */</span></div>
<div class="line"><span class="lineno"> 4508</span><span class="preprocessor">#if !FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4509</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 4510</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>) {          <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line"><span class="lineno"> 4511</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4512</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 4513</span>            }</div>
<div class="line"><span class="lineno"> 4514</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4515</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#a0711b1d03b833e9d73b3be1a6397f461">disk_read</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, nsect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);   <span class="comment">/* Fill sector cache */</span></div>
<div class="line"><span class="lineno"> 4516</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4517</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect = nsect;</div>
<div class="line"><span class="lineno"> 4518</span>        }</div>
<div class="line"><span class="lineno"> 4519</span>    }</div>
<div class="line"><span class="lineno"> 4520</span> </div>
<div class="line"><span class="lineno"> 4521</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4522</span>}</div>
<div class="ttc" id="adiskio_8h_html_a0711b1d03b833e9d73b3be1a6397f461"><div class="ttname"><a href="diskio_8h.html#a0711b1d03b833e9d73b3be1a6397f461">disk_read</a></div><div class="ttdeci">DRESULT disk_read(BYTE pdrv, BYTE *buff, LBA_t sector, UINT count)</div></div>
<div class="ttc" id="adiskio_8h_html_aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737"><div class="ttname"><a href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a></div><div class="ttdeci">@ RES_OK</div><div class="ttdef"><b>Definition</b> <a href="diskio_8h_source.html#l00017">diskio.h:17</a></div></div>
<div class="ttc" id="adiskio_8h_html_ac24448955ef914f54a499df1fb45689d"><div class="ttname"><a href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a></div><div class="ttdeci">DRESULT disk_write(BYTE pdrv, const BYTE *buff, LBA_t sector, UINT count)</div></div>
<div class="ttc" id="aff_8c_html_a31672d266a18255892580984a708fd96"><div class="ttname"><a href="ff_8c.html#a31672d266a18255892580984a708fd96">create_chain</a></div><div class="ttdeci">static DWORD create_chain(FFOBJID *obj, DWORD clst)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01494">ff.c:1494</a></div></div>
<div class="ttc" id="aff_8c_html_a41e4c46636679236568cf50b5535847f"><div class="ttname"><a href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a></div><div class="ttdeci">#define ABORT(fs, res)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00234">ff.c:234</a></div></div>
<div class="ttc" id="aff_8c_html_a4c9686ac79b28c453a4d9fd7f0b53f9b"><div class="ttname"><a href="ff_8c.html#a4c9686ac79b28c453a4d9fd7f0b53f9b">clst2sect</a></div><div class="ttdeci">static LBA_t clst2sect(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01114">ff.c:1114</a></div></div>
<div class="ttc" id="aff_8c_html_a9ae82de1b6841df9041411357f8d3eb5"><div class="ttname"><a href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a></div><div class="ttdeci">#define FA_MODIFIED</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00060">ff.c:60</a></div></div>
<div class="ttc" id="aff_8c_html_affd69e5e6d205e09e1070b2f3c039072"><div class="ttname"><a href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a></div><div class="ttdeci">#define FA_DIRTY</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00061">ff.c:61</a></div></div>
<div class="ttc" id="aff_8h_html_a3fc0992ad7436250b6b1a0592214b7f2"><div class="ttname"><a href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a></div><div class="ttdeci">DWORD FSIZE_t</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00082">ff.h:82</a></div></div>
<div class="ttc" id="aff_8h_html_aee297a9011164cf485a4df2a72758b08"><div class="ttname"><a href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a></div><div class="ttdeci">#define CREATE_LINKMAP</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00395">ff.h:395</a></div></div>
<div class="ttc" id="aff_8h_html_afa366963220c89b882c0361794020c14"><div class="ttname"><a href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a></div><div class="ttdeci">#define FA_WRITE</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00387">ff.h:387</a></div></div>
<div class="ttc" id="affconf_8h_html_a4374b721b8019acc9761fdd8b829ccd0"><div class="ttname"><a href="ffconf_8h.html#a4374b721b8019acc9761fdd8b829ccd0">FF_FS_EXFAT</a></div><div class="ttdeci">#define FF_FS_EXFAT</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00237">ffconf.h:237</a></div></div>
<div class="ttc" id="affconf_8h_html_ac932d228331b07248a3faa6f5904a49d"><div class="ttname"><a href="ffconf_8h.html#ac932d228331b07248a3faa6f5904a49d">FF_FS_READONLY</a></div><div class="ttdeci">#define FF_FS_READONLY</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00014">ffconf.h:14</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_acae426c920cd7f59e5883f948e1b3184"><div class="ttname"><a href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">FATFS::pdrv</a></div><div class="ttdeci">BYTE pdrv</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00134">ff.h:134</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_ad7fa7a509f8d097a9ab182d6c47be568"><div class="ttname"><a href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">FATFS::csize</a></div><div class="ttdeci">WORD csize</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00140">ff.h:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b4d38db58e89c526cfcf53200d719d0" name="a4b4d38db58e89c526cfcf53200d719d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b4d38db58e89c526cfcf53200d719d0">&#9670;&#160;</a></span>f_mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mkdir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04986">4986</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4989</span>{</div>
<div class="line"><span class="lineno"> 4990</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4991</span>    <a class="code hl_struct" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line"><span class="lineno"> 4992</span>    <a class="code hl_struct" href="struct_f_f_o_b_j_i_d.html">FFOBJID</a> sobj;</div>
<div class="line"><span class="lineno"> 4993</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4994</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dcl, pcl, tm;</div>
<div class="line"><span class="lineno"> 4995</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 4996</span> </div>
<div class="line"><span class="lineno"> 4997</span> </div>
<div class="line"><span class="lineno"> 4998</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;fs, <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>);   <span class="comment">/* Get logical drive */</span></div>
<div class="line"><span class="lineno"> 4999</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5000</span>        dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 5001</span>        <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 5002</span>        res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;dj, path);           <span class="comment">/* Follow the file path */</span></div>
<div class="line"><span class="lineno"> 5003</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;       <span class="comment">/* Name collision? */</span></div>
<div class="line"><span class="lineno"> 5004</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#af0d4b41a010f1a611bc6fb9e42357350">FF_FS_RPATH</a> &amp;&amp; res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a> &amp;&amp; (dj.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>)) { <span class="comment">/* Invalid name? */</span></div>
<div class="line"><span class="lineno"> 5005</span>            res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="lineno"> 5006</span>        }</div>
<div class="line"><span class="lineno"> 5007</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                <span class="comment">/* It is clear to create a new directory */</span></div>
<div class="line"><span class="lineno"> 5008</span>            sobj.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;                       <span class="comment">/* New object id to create a new chain */</span></div>
<div class="line"><span class="lineno"> 5009</span>            dcl = <a class="code hl_function" href="ff_8c.html#a31672d266a18255892580984a708fd96">create_chain</a>(&amp;sobj, 0);       <span class="comment">/* Allocate a cluster for the new directory */</span></div>
<div class="line"><span class="lineno"> 5010</span>            res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><span class="lineno"> 5011</span>            <span class="keywordflow">if</span> (dcl == 0) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;      <span class="comment">/* No space to allocate a new cluster? */</span></div>
<div class="line"><span class="lineno"> 5012</span>            <span class="keywordflow">if</span> (dcl == 1) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;     <span class="comment">/* Any insanity? */</span></div>
<div class="line"><span class="lineno"> 5013</span>            <span class="keywordflow">if</span> (dcl == 0xFFFFFFFF) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;   <span class="comment">/* Disk error? */</span></div>
<div class="line"><span class="lineno"> 5014</span>            tm = <a class="code hl_define" href="ff_8c.html#a72589f5bbb514c0b222ab8b292764418">GET_FATTIME</a>();</div>
<div class="line"><span class="lineno"> 5015</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5016</span>                res = <a class="code hl_function" href="ff_8c.html#ad9c3cf559356a9eed087ecb6c573544d">dir_clear</a>(fs, dcl);       <span class="comment">/* Clean up the new table */</span></div>
<div class="line"><span class="lineno"> 5017</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5018</span>                    <span class="keywordflow">if</span> (!<a class="code hl_define" href="ffconf_8h.html#a4374b721b8019acc9761fdd8b829ccd0">FF_FS_EXFAT</a> || fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> != <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {  <span class="comment">/* Create dot entries (FAT only) */</span></div>
<div class="line"><span class="lineno"> 5019</span>                        memset(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + <a class="code hl_define" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>, <span class="charliteral">&#39; &#39;</span>, 11);    <span class="comment">/* Create &quot;.&quot; entry */</span></div>
<div class="line"><span class="lineno"> 5020</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>[<a class="code hl_define" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><span class="lineno"> 5021</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;</div>
<div class="line"><span class="lineno"> 5022</span>                        <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + <a class="code hl_define" href="ff_8c.html#aa136ac8eaf0b3febba999e37b7d01803">DIR_ModTime</a>, tm);</div>
<div class="line"><span class="lineno"> 5023</span>                        <a class="code hl_function" href="ff_8c.html#a37c48dd3839cb11a440883ae331b4b7d">st_clust</a>(fs, fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>, dcl);</div>
<div class="line"><span class="lineno"> 5024</span>                        memcpy(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a>, fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>, <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a>);  <span class="comment">/* Create &quot;..&quot; entry */</span></div>
<div class="line"><span class="lineno"> 5025</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>[<a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a> + 1] = <span class="charliteral">&#39;.&#39;</span>; pcl = dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>;</div>
<div class="line"><span class="lineno"> 5026</span>                        <a class="code hl_function" href="ff_8c.html#a37c48dd3839cb11a440883ae331b4b7d">st_clust</a>(fs, fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a>, pcl);</div>
<div class="line"><span class="lineno"> 5027</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 1;</div>
<div class="line"><span class="lineno"> 5028</span>                    }</div>
<div class="line"><span class="lineno"> 5029</span>                    res = <a class="code hl_function" href="ff_8c.html#aaff1b52e1f7ae47b4aedad795d7e7e64">dir_register</a>(&amp;dj);    <span class="comment">/* Register the object to the parent directoy */</span></div>
<div class="line"><span class="lineno"> 5030</span>                }</div>
<div class="line"><span class="lineno"> 5031</span>            }</div>
<div class="line"><span class="lineno"> 5032</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5033</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 5034</span>                <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {  <span class="comment">/* Initialize directory entry block */</span></div>
<div class="line"><span class="lineno"> 5035</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#aecb0af980a40b38b30dd0a736c8d6406">XDIR_ModTime</a>, tm);    <span class="comment">/* Created time */</span></div>
<div class="line"><span class="lineno"> 5036</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#ae08bbe65fd20259cb98c85ce08aa53cb">XDIR_FstClus</a>, dcl);   <span class="comment">/* Table start cluster */</span></div>
<div class="line"><span class="lineno"> 5037</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#a899bf596ce53d81a373229662249f524">XDIR_FileSize</a>, (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));    <span class="comment">/* Directory size needs to be valid */</span></div>
<div class="line"><span class="lineno"> 5038</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#a543e2a11cefac978a0108a7973416d56">XDIR_ValidFileSize</a>, (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));</div>
<div class="line"><span class="lineno"> 5039</span>                    fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#ac3fd42ab7ee833b0e3683b1843d310d6">XDIR_GenFlags</a>] = 3;              <span class="comment">/* Initialize the object flag */</span></div>
<div class="line"><span class="lineno"> 5040</span>                    fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#aafe8687fb9356906c13ccd9fe88eb3de">XDIR_Attr</a>] = <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;             <span class="comment">/* Attribute */</span></div>
<div class="line"><span class="lineno"> 5041</span>                    res = store_xdir(&amp;dj);</div>
<div class="line"><span class="lineno"> 5042</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5043</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5044</span>                {</div>
<div class="line"><span class="lineno"> 5045</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a> + <a class="code hl_define" href="ff_8c.html#aa136ac8eaf0b3febba999e37b7d01803">DIR_ModTime</a>, tm); <span class="comment">/* Created time */</span></div>
<div class="line"><span class="lineno"> 5046</span>                    <a class="code hl_function" href="ff_8c.html#a37c48dd3839cb11a440883ae331b4b7d">st_clust</a>(fs, dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>, dcl);          <span class="comment">/* Table start cluster */</span></div>
<div class="line"><span class="lineno"> 5047</span>                    dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;          <span class="comment">/* Attribute */</span></div>
<div class="line"><span class="lineno"> 5048</span>                    fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 1;</div>
<div class="line"><span class="lineno"> 5049</span>                }</div>
<div class="line"><span class="lineno"> 5050</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5051</span>                    res = <a class="code hl_function" href="ff_8c.html#aec6b108298553219ebb2b960b528459d">sync_fs</a>(fs);</div>
<div class="line"><span class="lineno"> 5052</span>                }</div>
<div class="line"><span class="lineno"> 5053</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5054</span>                <a class="code hl_function" href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a>(&amp;sobj, dcl, 0);        <span class="comment">/* Could not register, remove the allocated cluster */</span></div>
<div class="line"><span class="lineno"> 5055</span>            }</div>
<div class="line"><span class="lineno"> 5056</span>        }</div>
<div class="line"><span class="lineno"> 5057</span>        <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 5058</span>    }</div>
<div class="line"><span class="lineno"> 5059</span> </div>
<div class="line"><span class="lineno"> 5060</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 5061</span>}</div>
<div class="ttc" id="aff_8c_html_a2db528782a021797b34bdc6e9e9de1c3"><div class="ttname"><a href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a></div><div class="ttdeci">#define NS_DOT</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00078">ff.c:78</a></div></div>
<div class="ttc" id="aff_8c_html_a37c48dd3839cb11a440883ae331b4b7d"><div class="ttname"><a href="ff_8c.html#a37c48dd3839cb11a440883ae331b4b7d">st_clust</a></div><div class="ttdeci">static void st_clust(FATFS *fs, BYTE *dir, DWORD cl)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01834">ff.c:1834</a></div></div>
<div class="ttc" id="aff_8c_html_a543e2a11cefac978a0108a7973416d56"><div class="ttname"><a href="ff_8c.html#a543e2a11cefac978a0108a7973416d56">XDIR_ValidFileSize</a></div><div class="ttdeci">#define XDIR_ValidFileSize</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00184">ff.c:184</a></div></div>
<div class="ttc" id="aff_8c_html_a72589f5bbb514c0b222ab8b292764418"><div class="ttname"><a href="ff_8c.html#a72589f5bbb514c0b222ab8b292764418">GET_FATTIME</a></div><div class="ttdeci">#define GET_FATTIME()</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00274">ff.c:274</a></div></div>
<div class="ttc" id="aff_8c_html_a899bf596ce53d81a373229662249f524"><div class="ttname"><a href="ff_8c.html#a899bf596ce53d81a373229662249f524">XDIR_FileSize</a></div><div class="ttdeci">#define XDIR_FileSize</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00186">ff.c:186</a></div></div>
<div class="ttc" id="aff_8c_html_a90943705ce4b32e47562c9f56860c7af"><div class="ttname"><a href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a></div><div class="ttdeci">#define SZDIRE</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00188">ff.c:188</a></div></div>
<div class="ttc" id="aff_8c_html_aa136ac8eaf0b3febba999e37b7d01803"><div class="ttname"><a href="ff_8c.html#aa136ac8eaf0b3febba999e37b7d01803">DIR_ModTime</a></div><div class="ttdeci">#define DIR_ModTime</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00158">ff.c:158</a></div></div>
<div class="ttc" id="aff_8c_html_aafe8687fb9356906c13ccd9fe88eb3de"><div class="ttname"><a href="ff_8c.html#aafe8687fb9356906c13ccd9fe88eb3de">XDIR_Attr</a></div><div class="ttdeci">#define XDIR_Attr</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00172">ff.c:172</a></div></div>
<div class="ttc" id="aff_8c_html_aaff1b52e1f7ae47b4aedad795d7e7e64"><div class="ttname"><a href="ff_8c.html#aaff1b52e1f7ae47b4aedad795d7e7e64">dir_register</a></div><div class="ttdeci">static FRESULT dir_register(DIR *dp)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l02434">ff.c:2434</a></div></div>
<div class="ttc" id="aff_8c_html_ac3fd42ab7ee833b0e3683b1843d310d6"><div class="ttname"><a href="ff_8c.html#ac3fd42ab7ee833b0e3683b1843d310d6">XDIR_GenFlags</a></div><div class="ttdeci">#define XDIR_GenFlags</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00181">ff.c:181</a></div></div>
<div class="ttc" id="aff_8c_html_ad3233e40118ed66095f3c9545b788f8a"><div class="ttname"><a href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a></div><div class="ttdeci">#define DIR_Attr</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00152">ff.c:152</a></div></div>
<div class="ttc" id="aff_8c_html_ad9c3cf559356a9eed087ecb6c573544d"><div class="ttname"><a href="ff_8c.html#ad9c3cf559356a9eed087ecb6c573544d">dir_clear</a></div><div class="ttdeci">static FRESULT dir_clear(FATFS *fs, DWORD clst)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01627">ff.c:1627</a></div></div>
<div class="ttc" id="aff_8c_html_aec6b108298553219ebb2b960b528459d"><div class="ttname"><a href="ff_8c.html#aec6b108298553219ebb2b960b528459d">sync_fs</a></div><div class="ttdeci">static FRESULT sync_fs(FATFS *fs)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01078">ff.c:1078</a></div></div>
<div class="ttc" id="aff_8c_html_aecb0af980a40b38b30dd0a736c8d6406"><div class="ttname"><a href="ff_8c.html#aecb0af980a40b38b30dd0a736c8d6406">XDIR_ModTime</a></div><div class="ttdeci">#define XDIR_ModTime</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00174">ff.c:174</a></div></div>
<div class="ttc" id="aff_8c_html_af413a4e38a1ca8b203e332163d086d88"><div class="ttname"><a href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a></div><div class="ttdeci">static void st_dword(BYTE *ptr, DWORD val)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00658">ff.c:658</a></div></div>
<div class="ttc" id="aff_8c_html_af7e31794d8bbe9eeb098f9383ea0d448"><div class="ttname"><a href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a></div><div class="ttdeci">static FRESULT remove_chain(FFOBJID *obj, DWORD clst, DWORD pclst)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01399">ff.c:1399</a></div></div>
<div class="ttc" id="aff_8c_html_afa89348e9fc2de82ae9e12c661366b0e"><div class="ttname"><a href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a></div><div class="ttdeci">#define DIR_Name</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00151">ff.c:151</a></div></div>
<div class="ttc" id="affconf_8h_html_af0d4b41a010f1a611bc6fb9e42357350"><div class="ttname"><a href="ffconf_8h.html#af0d4b41a010f1a611bc6fb9e42357350">FF_FS_RPATH</a></div><div class="ttdeci">#define FF_FS_RPATH</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00159">ffconf.h:159</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_a647e43c9ccae94b7274793d1909897de"><div class="ttname"><a href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">FATFS::wflag</a></div><div class="ttdeci">BYTE wflag</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00136">ff.h:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a983f0614033bd7cf587eb56d3054a91c" name="a983f0614033bd7cf587eb56d3054a91c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a983f0614033bd7cf587eb56d3054a91c">&#9670;&#160;</a></span>f_mkfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mkfs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_m_k_f_s___p_a_r_m.html">MKFS_PARM</a> *&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>work</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a16a934c2bbfa2160295810adc49d5509" name="a16a934c2bbfa2160295810adc49d5509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16a934c2bbfa2160295810adc49d5509">&#9670;&#160;</a></span>f_mount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l03605">3605</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3610</span>{</div>
<div class="line"><span class="lineno"> 3611</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *cfs;</div>
<div class="line"><span class="lineno"> 3612</span>    <span class="keywordtype">int</span> vol;</div>
<div class="line"><span class="lineno"> 3613</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 3614</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *rp = path;</div>
<div class="line"><span class="lineno"> 3615</span> </div>
<div class="line"><span class="lineno"> 3616</span> </div>
<div class="line"><span class="lineno"> 3617</span>    <span class="comment">/* Get logical drive number */</span></div>
<div class="line"><span class="lineno"> 3618</span>    vol = <a class="code hl_function" href="ff_8c.html#a88ad7e4b1bc98d1a2673a136283dc7ee">get_ldnumber</a>(&amp;rp);</div>
<div class="line"><span class="lineno"> 3619</span>    <span class="keywordflow">if</span> (vol &lt; 0) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>;</div>
<div class="line"><span class="lineno"> 3620</span>    cfs = <a class="code hl_variable" href="ff_8c.html#a0eeaf4cd8426fce14e6a07468c076f31">FatFs</a>[vol];                   <span class="comment">/* Pointer to fs object */</span></div>
<div class="line"><span class="lineno"> 3621</span> </div>
<div class="line"><span class="lineno"> 3622</span>    <span class="keywordflow">if</span> (cfs) {</div>
<div class="line"><span class="lineno"> 3623</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 3624</span>        <a class="code hl_function" href="ff_8c.html#a99074936dee12a6ce3dce5e3e1a90ba4">clear_lock</a>(cfs);</div>
<div class="line"><span class="lineno"> 3625</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3626</span><span class="preprocessor">#if FF_FS_REENTRANT                     </span><span class="comment">/* Discard sync object of the current volume */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3627</span>        <span class="keywordflow">if</span> (!ff_del_syncobj(cfs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="lineno"> 3628</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3629</span>        cfs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> = 0;               <span class="comment">/* Clear old fs object */</span></div>
<div class="line"><span class="lineno"> 3630</span>    }</div>
<div class="line"><span class="lineno"> 3631</span> </div>
<div class="line"><span class="lineno"> 3632</span>    <span class="keywordflow">if</span> (fs) {</div>
<div class="line"><span class="lineno"> 3633</span>        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> = 0;                <span class="comment">/* Clear new fs object */</span></div>
<div class="line"><span class="lineno"> 3634</span><span class="preprocessor">#if FF_FS_REENTRANT                     </span><span class="comment">/* Create sync object for the new volume */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3635</span>        <span class="keywordflow">if</span> (!ff_cre_syncobj((<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)vol, &amp;fs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="lineno"> 3636</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3637</span>    }</div>
<div class="line"><span class="lineno"> 3638</span>    <a class="code hl_variable" href="ff_8c.html#a0eeaf4cd8426fce14e6a07468c076f31">FatFs</a>[vol] = fs;                    <span class="comment">/* Register new fs object */</span></div>
<div class="line"><span class="lineno"> 3639</span> </div>
<div class="line"><span class="lineno"> 3640</span>    <span class="keywordflow">if</span> (opt == 0) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;         <span class="comment">/* Do not mount now, it will be mounted later */</span></div>
<div class="line"><span class="lineno"> 3641</span> </div>
<div class="line"><span class="lineno"> 3642</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;fs, 0);  <span class="comment">/* Force mounted the volume */</span></div>
<div class="line"><span class="lineno"> 3643</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 3644</span>}</div>
<div class="ttc" id="aff_8c_html_a99074936dee12a6ce3dce5e3e1a90ba4"><div class="ttname"><a href="ff_8c.html#a99074936dee12a6ce3dce5e3e1a90ba4">clear_lock</a></div><div class="ttdeci">static void clear_lock(FATFS *fs)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01006">ff.c:1006</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aefdef7126128d99d0b3bd82c28e54d80" name="aefdef7126128d99d0b3bd82c28e54d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefdef7126128d99d0b3bd82c28e54d80">&#9670;&#160;</a></span>f_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l03653">3653</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3658</span>{</div>
<div class="line"><span class="lineno"> 3659</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 3660</span>    <a class="code hl_struct" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line"><span class="lineno"> 3661</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 3662</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 3663</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> cl, bcs, clst, tm;</div>
<div class="line"><span class="lineno"> 3664</span>    <a class="code hl_typedef" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> sc;</div>
<div class="line"><span class="lineno"> 3665</span>    <a class="code hl_typedef" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a> ofs;</div>
<div class="line"><span class="lineno"> 3666</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3667</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 3668</span> </div>
<div class="line"><span class="lineno"> 3669</span> </div>
<div class="line"><span class="lineno"> 3670</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line"><span class="lineno"> 3671</span> </div>
<div class="line"><span class="lineno"> 3672</span>    <span class="comment">/* Get logical drive number */</span></div>
<div class="line"><span class="lineno"> 3673</span>    mode &amp;= <a class="code hl_define" href="ffconf_8h.html#ac932d228331b07248a3faa6f5904a49d">FF_FS_READONLY</a> ? <a class="code hl_define" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a> : <a class="code hl_define" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a> | <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a> | <a class="code hl_define" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code hl_define" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a> | <a class="code hl_define" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a> | <a class="code hl_define" href="ff_8h.html#a90f135b2ae90fba5080f6bd2b6c57b8a">FA_OPEN_APPEND</a>;</div>
<div class="line"><span class="lineno"> 3674</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;fs, mode);</div>
<div class="line"><span class="lineno"> 3675</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 3676</span>        dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 3677</span>        <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 3678</span>        res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line"><span class="lineno"> 3679</span><span class="preprocessor">#if !FF_FS_READONLY </span><span class="comment">/* Read/Write configuration */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3680</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 3681</span>            <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a>) {    <span class="comment">/* Origin directory itself? */</span></div>
<div class="line"><span class="lineno"> 3682</span>                res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="lineno"> 3683</span>            }</div>
<div class="line"><span class="lineno"> 3684</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 3685</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3686</span>                res = <a class="code hl_function" href="ff_8c.html#aee054a7d05639ea60071f5e1246ef8c1">chk_lock</a>(&amp;dj, (mode &amp; ~<a class="code hl_define" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);     <span class="comment">/* Check if the file can be used */</span></div>
<div class="line"><span class="lineno"> 3687</span>            }</div>
<div class="line"><span class="lineno"> 3688</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3689</span>        }</div>
<div class="line"><span class="lineno"> 3690</span>        <span class="comment">/* Create or Open a file */</span></div>
<div class="line"><span class="lineno"> 3691</span>        <span class="keywordflow">if</span> (mode &amp; (<a class="code hl_define" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code hl_define" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a> | <a class="code hl_define" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>)) {</div>
<div class="line"><span class="lineno"> 3692</span>            <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                 <span class="comment">/* No file, create new */</span></div>
<div class="line"><span class="lineno"> 3693</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {        <span class="comment">/* There is no file to open, create a new entry */</span></div>
<div class="line"><span class="lineno"> 3694</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 3695</span>                    res = <a class="code hl_function" href="ff_8c.html#abbedf0ee862bd10a72c7fd331be3fe2a">enq_lock</a>() ? <a class="code hl_function" href="ff_8c.html#aaff1b52e1f7ae47b4aedad795d7e7e64">dir_register</a>(&amp;dj) : <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>;</div>
<div class="line"><span class="lineno"> 3696</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3697</span>                    res = <a class="code hl_function" href="ff_8c.html#aaff1b52e1f7ae47b4aedad795d7e7e64">dir_register</a>(&amp;dj);</div>
<div class="line"><span class="lineno"> 3698</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3699</span>                }</div>
<div class="line"><span class="lineno"> 3700</span>                mode |= <a class="code hl_define" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>;       <span class="comment">/* File is created */</span></div>
<div class="line"><span class="lineno"> 3701</span>            }</div>
<div class="line"><span class="lineno"> 3702</span>            <span class="keywordflow">else</span> {                              <span class="comment">/* Any object with the same name is already existing */</span></div>
<div class="line"><span class="lineno"> 3703</span>                <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; (<a class="code hl_define" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a> | <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) {  <span class="comment">/* Cannot overwrite it (R/O or DIR) */</span></div>
<div class="line"><span class="lineno"> 3704</span>                    res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line"><span class="lineno"> 3705</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3706</span>                    <span class="keywordflow">if</span> (mode &amp; <a class="code hl_define" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;   <span class="comment">/* Cannot create as new file */</span></div>
<div class="line"><span class="lineno"> 3707</span>                }</div>
<div class="line"><span class="lineno"> 3708</span>            }</div>
<div class="line"><span class="lineno"> 3709</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (mode &amp; <a class="code hl_define" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>)) {    <span class="comment">/* Truncate the file if overwrite mode */</span></div>
<div class="line"><span class="lineno"> 3710</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 3711</span>                <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 3712</span>                    <span class="comment">/* Get current allocation info */</span></div>
<div class="line"><span class="lineno"> 3713</span>                    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.fs = fs;</div>
<div class="line"><span class="lineno"> 3714</span>                    init_alloc_info(fs, &amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj);</div>
<div class="line"><span class="lineno"> 3715</span>                    <span class="comment">/* Set directory entry block initial state */</span></div>
<div class="line"><span class="lineno"> 3716</span>                    memset(fs-&gt;dirbuf + 2, 0, 30);  <span class="comment">/* Clear 85 entry except for NumSec */</span></div>
<div class="line"><span class="lineno"> 3717</span>                    memset(fs-&gt;dirbuf + 38, 0, 26); <span class="comment">/* Clear C0 entry except for NumName and NameHash */</span></div>
<div class="line"><span class="lineno"> 3718</span>                    fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#aafe8687fb9356906c13ccd9fe88eb3de">XDIR_Attr</a>] = <a class="code hl_define" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;</div>
<div class="line"><span class="lineno"> 3719</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#a74046208323ac5e8b5214b05e1a43b87">XDIR_CrtTime</a>, <a class="code hl_define" href="ff_8c.html#a72589f5bbb514c0b222ab8b292764418">GET_FATTIME</a>());</div>
<div class="line"><span class="lineno"> 3720</span>                    fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#ac3fd42ab7ee833b0e3683b1843d310d6">XDIR_GenFlags</a>] = 1;</div>
<div class="line"><span class="lineno"> 3721</span>                    res = store_xdir(&amp;dj);</div>
<div class="line"><span class="lineno"> 3722</span>                    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust != 0) {  <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line"><span class="lineno"> 3723</span>                        res = <a class="code hl_function" href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust, 0);</div>
<div class="line"><span class="lineno"> 3724</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ac26e848817569fedc15a9a4e49ddedd1">last_clst</a> = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust - 1;     <span class="comment">/* Reuse the cluster hole */</span></div>
<div class="line"><span class="lineno"> 3725</span>                    }</div>
<div class="line"><span class="lineno"> 3726</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3727</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3728</span>                {</div>
<div class="line"><span class="lineno"> 3729</span>                    <span class="comment">/* Set directory entry initial state */</span></div>
<div class="line"><span class="lineno"> 3730</span>                    tm = <a class="code hl_define" href="ff_8c.html#a72589f5bbb514c0b222ab8b292764418">GET_FATTIME</a>();                 <span class="comment">/* Set created time */</span></div>
<div class="line"><span class="lineno"> 3731</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a> + <a class="code hl_define" href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a>, tm);</div>
<div class="line"><span class="lineno"> 3732</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a> + <a class="code hl_define" href="ff_8c.html#aa136ac8eaf0b3febba999e37b7d01803">DIR_ModTime</a>, tm);</div>
<div class="line"><span class="lineno"> 3733</span>                    cl = <a class="code hl_function" href="ff_8c.html#ad1b3343c92d0f0e58ba448c3c11b1f39">ld_clust</a>(fs, dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>);          <span class="comment">/* Get current cluster chain */</span></div>
<div class="line"><span class="lineno"> 3734</span>                    dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code hl_define" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;          <span class="comment">/* Reset attribute */</span></div>
<div class="line"><span class="lineno"> 3735</span>                    <a class="code hl_function" href="ff_8c.html#a37c48dd3839cb11a440883ae331b4b7d">st_clust</a>(fs, dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>, 0);            <span class="comment">/* Reset file allocation info */</span></div>
<div class="line"><span class="lineno"> 3736</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a> + <a class="code hl_define" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, 0);</div>
<div class="line"><span class="lineno"> 3737</span>                    fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 1;</div>
<div class="line"><span class="lineno"> 3738</span>                    <span class="keywordflow">if</span> (cl != 0) {                      <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line"><span class="lineno"> 3739</span>                        sc = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a>;</div>
<div class="line"><span class="lineno"> 3740</span>                        res = <a class="code hl_function" href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a>(&amp;dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>, cl, 0);</div>
<div class="line"><span class="lineno"> 3741</span>                        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 3742</span>                            res = <a class="code hl_function" href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a>(fs, sc);</div>
<div class="line"><span class="lineno"> 3743</span>                            fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ac26e848817569fedc15a9a4e49ddedd1">last_clst</a> = cl - 1;     <span class="comment">/* Reuse the cluster hole */</span></div>
<div class="line"><span class="lineno"> 3744</span>                        }</div>
<div class="line"><span class="lineno"> 3745</span>                    }</div>
<div class="line"><span class="lineno"> 3746</span>                }</div>
<div class="line"><span class="lineno"> 3747</span>            }</div>
<div class="line"><span class="lineno"> 3748</span>        }</div>
<div class="line"><span class="lineno"> 3749</span>        <span class="keywordflow">else</span> {  <span class="comment">/* Open an existing file */</span></div>
<div class="line"><span class="lineno"> 3750</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                 <span class="comment">/* Is the object exsiting? */</span></div>
<div class="line"><span class="lineno"> 3751</span>                <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {     <span class="comment">/* File open against a directory */</span></div>
<div class="line"><span class="lineno"> 3752</span>                    res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line"><span class="lineno"> 3753</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3754</span>                    <span class="keywordflow">if</span> ((mode &amp; <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) &amp;&amp; (dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; <a class="code hl_define" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>)) { <span class="comment">/* Write mode open against R/O file */</span></div>
<div class="line"><span class="lineno"> 3755</span>                        res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line"><span class="lineno"> 3756</span>                    }</div>
<div class="line"><span class="lineno"> 3757</span>                }</div>
<div class="line"><span class="lineno"> 3758</span>            }</div>
<div class="line"><span class="lineno"> 3759</span>        }</div>
<div class="line"><span class="lineno"> 3760</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 3761</span>            <span class="keywordflow">if</span> (mode &amp; <a class="code hl_define" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>) mode |= <a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>;   <span class="comment">/* Set file change flag if created or overwritten */</span></div>
<div class="line"><span class="lineno"> 3762</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;dir_sect = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a>;         <span class="comment">/* Pointer to the directory entry */</span></div>
<div class="line"><span class="lineno"> 3763</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;dir_ptr = dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>;</div>
<div class="line"><span class="lineno"> 3764</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 3765</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.lockid = <a class="code hl_function" href="ff_8c.html#a122100d3c53586280391dc5e86bf9184">inc_lock</a>(&amp;dj, (mode &amp; ~<a class="code hl_define" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);  <span class="comment">/* Lock the file for this session */</span></div>
<div class="line"><span class="lineno"> 3766</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.lockid == 0) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="lineno"> 3767</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3768</span>        }</div>
<div class="line"><span class="lineno"> 3769</span><span class="preprocessor">#else       </span><span class="comment">/* R/O configuration */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3770</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 3771</span>            <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a>) {    <span class="comment">/* Is it origin directory itself? */</span></div>
<div class="line"><span class="lineno"> 3772</span>                res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="lineno"> 3773</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3774</span>                <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {     <span class="comment">/* Is it a directory? */</span></div>
<div class="line"><span class="lineno"> 3775</span>                    res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line"><span class="lineno"> 3776</span>                }</div>
<div class="line"><span class="lineno"> 3777</span>            }</div>
<div class="line"><span class="lineno"> 3778</span>        }</div>
<div class="line"><span class="lineno"> 3779</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3780</span> </div>
<div class="line"><span class="lineno"> 3781</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 3782</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 3783</span>            <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 3784</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.c_scl = dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>;                          <span class="comment">/* Get containing directory info */</span></div>
<div class="line"><span class="lineno"> 3785</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.c_size = ((<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a83c51ba99687054f0cc653b45f195268">objsize</a> &amp; 0xFFFFFF00) | dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#aa7bfa8dd8958d11df042a67e1da25f63">stat</a>;</div>
<div class="line"><span class="lineno"> 3786</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.c_ofs = dj.<a class="code hl_variable" href="struct_d_i_r.html#afdb5d6302a88eaf5d43da0352ca2cc91">blk_ofs</a>;</div>
<div class="line"><span class="lineno"> 3787</span>                init_alloc_info(fs, &amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj);</div>
<div class="line"><span class="lineno"> 3788</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3789</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3790</span>            {</div>
<div class="line"><span class="lineno"> 3791</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust = <a class="code hl_function" href="ff_8c.html#ad1b3343c92d0f0e58ba448c3c11b1f39">ld_clust</a>(fs, dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>);                  <span class="comment">/* Get object allocation info */</span></div>
<div class="line"><span class="lineno"> 3792</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize = <a class="code hl_function" href="ff_8c.html#aa4880817cfec23d4e560b785d1ceefcb">ld_dword</a>(dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a> + <a class="code hl_define" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>);</div>
<div class="line"><span class="lineno"> 3793</span>            }</div>
<div class="line"><span class="lineno"> 3794</span><span class="preprocessor">#if FF_USE_FASTSEEK</span></div>
<div class="line"><span class="lineno"> 3795</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;cltbl = 0;      <span class="comment">/* Disable fast seek mode */</span></div>
<div class="line"><span class="lineno"> 3796</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3797</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.fs = fs;    <span class="comment">/* Validate the file object */</span></div>
<div class="line"><span class="lineno"> 3798</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.<a class="code hl_variable" href="struct_f_a_t_f_s.html#a417095d7c20d56d417dc0998e0dd5a5c">id</a> = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a417095d7c20d56d417dc0998e0dd5a5c">id</a>;</div>
<div class="line"><span class="lineno"> 3799</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag = mode;    <span class="comment">/* Set file access mode */</span></div>
<div class="line"><span class="lineno"> 3800</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;err = 0;        <span class="comment">/* Clear error flag */</span></div>
<div class="line"><span class="lineno"> 3801</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect = 0;       <span class="comment">/* Invalidate current data sector */</span></div>
<div class="line"><span class="lineno"> 3802</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr = 0;       <span class="comment">/* Set file pointer top of the file */</span></div>
<div class="line"><span class="lineno"> 3803</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 3804</span><span class="preprocessor">#if !FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 3805</span>            memset(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, 0, <span class="keyword">sizeof</span> <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf); <span class="comment">/* Clear sector buffer */</span></div>
<div class="line"><span class="lineno"> 3806</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3807</span>            <span class="keywordflow">if</span> ((mode &amp; <a class="code hl_define" href="ff_8c.html#ad4d0d6afc5e28678b87a1b75b6645f7d">FA_SEEKEND</a>) &amp;&amp; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize &gt; 0) {   <span class="comment">/* Seek to end of file if FA_OPEN_APPEND is specified */</span></div>
<div class="line"><span class="lineno"> 3808</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize;         <span class="comment">/* Offset to seek */</span></div>
<div class="line"><span class="lineno"> 3809</span>                bcs = (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);    <span class="comment">/* Cluster size in byte */</span></div>
<div class="line"><span class="lineno"> 3810</span>                clst = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust;              <span class="comment">/* Follow the cluster chain */</span></div>
<div class="line"><span class="lineno"> 3811</span>                <span class="keywordflow">for</span> (ofs = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize; res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; ofs &gt; bcs; ofs -= bcs) {</div>
<div class="line"><span class="lineno"> 3812</span>                    clst = <a class="code hl_function" href="ff_8c.html#a646295b3567c3e29932fab442b1c90e4">get_fat</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, clst);</div>
<div class="line"><span class="lineno"> 3813</span>                    <span class="keywordflow">if</span> (clst &lt;= 1) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="lineno"> 3814</span>                    <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line"><span class="lineno"> 3815</span>                }</div>
<div class="line"><span class="lineno"> 3816</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust = clst;</div>
<div class="line"><span class="lineno"> 3817</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; ofs % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)) { <span class="comment">/* Fill sector buffer if not on the sector boundary */</span></div>
<div class="line"><span class="lineno"> 3818</span>                    sc = <a class="code hl_function" href="ff_8c.html#a4c9686ac79b28c453a4d9fd7f0b53f9b">clst2sect</a>(fs, clst);</div>
<div class="line"><span class="lineno"> 3819</span>                    <span class="keywordflow">if</span> (sc == 0) {</div>
<div class="line"><span class="lineno"> 3820</span>                        res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="lineno"> 3821</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3822</span>                        <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect = sc + (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(ofs / <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));</div>
<div class="line"><span class="lineno"> 3823</span><span class="preprocessor">#if !FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 3824</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#a0711b1d03b833e9d73b3be1a6397f461">disk_read</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line"><span class="lineno"> 3825</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3826</span>                    }</div>
<div class="line"><span class="lineno"> 3827</span>                }</div>
<div class="line"><span class="lineno"> 3828</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 3829</span>                <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_function" href="ff_8c.html#ae6a892e91d9d3eafffa2f411c2f4db92">dec_lock</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.lockid); <span class="comment">/* Decrement file open counter if seek failed */</span></div>
<div class="line"><span class="lineno"> 3830</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3831</span>            }</div>
<div class="line"><span class="lineno"> 3832</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3833</span>        }</div>
<div class="line"><span class="lineno"> 3834</span> </div>
<div class="line"><span class="lineno"> 3835</span>        <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 3836</span>    }</div>
<div class="line"><span class="lineno"> 3837</span> </div>
<div class="line"><span class="lineno"> 3838</span>    <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.fs = 0;   <span class="comment">/* Invalidate file object on error */</span></div>
<div class="line"><span class="lineno"> 3839</span> </div>
<div class="line"><span class="lineno"> 3840</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 3841</span>}</div>
<div class="ttc" id="aff_8c_html_a122100d3c53586280391dc5e86bf9184"><div class="ttname"><a href="ff_8c.html#a122100d3c53586280391dc5e86bf9184">inc_lock</a></div><div class="ttdeci">static UINT inc_lock(DIR *dp, int acc)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00953">ff.c:953</a></div></div>
<div class="ttc" id="aff_8c_html_a47fb1881ea71d860db9b8280564cb4d5"><div class="ttname"><a href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a></div><div class="ttdeci">#define DIR_CrtTime</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00155">ff.c:155</a></div></div>
<div class="ttc" id="aff_8c_html_a74046208323ac5e8b5214b05e1a43b87"><div class="ttname"><a href="ff_8c.html#a74046208323ac5e8b5214b05e1a43b87">XDIR_CrtTime</a></div><div class="ttdeci">#define XDIR_CrtTime</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00173">ff.c:173</a></div></div>
<div class="ttc" id="aff_8c_html_abbedf0ee862bd10a72c7fd331be3fe2a"><div class="ttname"><a href="ff_8c.html#abbedf0ee862bd10a72c7fd331be3fe2a">enq_lock</a></div><div class="ttdeci">static int enq_lock(void)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00944">ff.c:944</a></div></div>
<div class="ttc" id="aff_8c_html_abfbfa613864a02a65f0bf70ead6672c7"><div class="ttname"><a href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a></div><div class="ttdeci">#define DIR_FileSize</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00160">ff.c:160</a></div></div>
<div class="ttc" id="aff_8c_html_ad4d0d6afc5e28678b87a1b75b6645f7d"><div class="ttname"><a href="ff_8c.html#ad4d0d6afc5e28678b87a1b75b6645f7d">FA_SEEKEND</a></div><div class="ttdeci">#define FA_SEEKEND</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00059">ff.c:59</a></div></div>
<div class="ttc" id="aff_8c_html_aee054a7d05639ea60071f5e1246ef8c1"><div class="ttname"><a href="ff_8c.html#aee054a7d05639ea60071f5e1246ef8c1">chk_lock</a></div><div class="ttdeci">static FRESULT chk_lock(DIR *dp, int acc)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00917">ff.c:917</a></div></div>
<div class="ttc" id="aff_8h_html_a17b01553029920ac0468912b4bcb16c7"><div class="ttname"><a href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a></div><div class="ttdeci">#define FA_OPEN_ALWAYS</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00391">ff.h:391</a></div></div>
<div class="ttc" id="aff_8h_html_a1f4f3530ff03abbd979b072536e72290"><div class="ttname"><a href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a></div><div class="ttdeci">#define FA_READ</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00386">ff.h:386</a></div></div>
<div class="ttc" id="aff_8h_html_a417bb1babd1785fd181a806b5613eba3"><div class="ttname"><a href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a></div><div class="ttdeci">#define FA_CREATE_NEW</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00389">ff.h:389</a></div></div>
<div class="ttc" id="aff_8h_html_a90f135b2ae90fba5080f6bd2b6c57b8a"><div class="ttname"><a href="ff_8h.html#a90f135b2ae90fba5080f6bd2b6c57b8a">FA_OPEN_APPEND</a></div><div class="ttdeci">#define FA_OPEN_APPEND</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00392">ff.h:392</a></div></div>
<div class="ttc" id="aff_8h_html_add6d85d1e7a02b4f6188783ef91a5f1e"><div class="ttname"><a href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a></div><div class="ttdeci">#define AM_RDO</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00411">ff.h:411</a></div></div>
<div class="ttc" id="aff_8h_html_ae8174d00798e34e7c9e95898cb9e1a09"><div class="ttname"><a href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a></div><div class="ttdeci">#define AM_ARC</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00415">ff.h:415</a></div></div>
<div class="ttc" id="aff_8h_html_afba4546b131dea4b24727fa20a80e29f"><div class="ttname"><a href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a></div><div class="ttdeci">#define FA_CREATE_ALWAYS</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00390">ff.h:390</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_a417095d7c20d56d417dc0998e0dd5a5c"><div class="ttname"><a href="struct_f_a_t_f_s.html#a417095d7c20d56d417dc0998e0dd5a5c">FATFS::id</a></div><div class="ttdeci">WORD id</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00138">ff.h:138</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_aaf7eccaccdc9c4243230672d6b2f6566"><div class="ttname"><a href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">FATFS::winsect</a></div><div class="ttdeci">LBA_t winsect</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00174">ff.h:174</a></div></div>
<div class="ttc" id="astruct_f_a_t_f_s_html_ac26e848817569fedc15a9a4e49ddedd1"><div class="ttname"><a href="struct_f_a_t_f_s.html#ac26e848817569fedc15a9a4e49ddedd1">FATFS::last_clst</a></div><div class="ttdeci">DWORD last_clst</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00154">ff.h:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab63b213c75f7335fbb63a1f3f70e5fc7" name="ab63b213c75f7335fbb63a1f3f70e5fc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab63b213c75f7335fbb63a1f3f70e5fc7">&#9670;&#160;</a></span>f_opendir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_opendir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04531">4531</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4535</span>{</div>
<div class="line"><span class="lineno"> 4536</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4537</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4538</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 4539</span> </div>
<div class="line"><span class="lineno"> 4540</span> </div>
<div class="line"><span class="lineno"> 4541</span>    <span class="keywordflow">if</span> (!dp) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line"><span class="lineno"> 4542</span> </div>
<div class="line"><span class="lineno"> 4543</span>    <span class="comment">/* Get logical drive */</span></div>
<div class="line"><span class="lineno"> 4544</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;fs, 0);</div>
<div class="line"><span class="lineno"> 4545</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4546</span>        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 4547</span>        <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 4548</span>        res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(dp, path);            <span class="comment">/* Follow the path to the directory */</span></div>
<div class="line"><span class="lineno"> 4549</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                     <span class="comment">/* Follow completed */</span></div>
<div class="line"><span class="lineno"> 4550</span>            <span class="keywordflow">if</span> (!(dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a>)) {    <span class="comment">/* It is not the origin directory itself */</span></div>
<div class="line"><span class="lineno"> 4551</span>                <span class="keywordflow">if</span> (dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {        <span class="comment">/* This object is a sub-directory */</span></div>
<div class="line"><span class="lineno"> 4552</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4553</span>                    <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 4554</span>                        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.c_scl = dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>;                         <span class="comment">/* Get containing directory inforamation */</span></div>
<div class="line"><span class="lineno"> 4555</span>                        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.c_size = ((<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a83c51ba99687054f0cc653b45f195268">objsize</a> &amp; 0xFFFFFF00) | dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#aa7bfa8dd8958d11df042a67e1da25f63">stat</a>;</div>
<div class="line"><span class="lineno"> 4556</span>                        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.c_ofs = dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#afdb5d6302a88eaf5d43da0352ca2cc91">blk_ofs</a>;</div>
<div class="line"><span class="lineno"> 4557</span>                        init_alloc_info(fs, &amp;dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>);  <span class="comment">/* Get object allocation info */</span></div>
<div class="line"><span class="lineno"> 4558</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4559</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4560</span>                    {</div>
<div class="line"><span class="lineno"> 4561</span>                        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> = <a class="code hl_function" href="ff_8c.html#ad1b3343c92d0f0e58ba448c3c11b1f39">ld_clust</a>(fs, dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>); <span class="comment">/* Get object allocation info */</span></div>
<div class="line"><span class="lineno"> 4562</span>                    }</div>
<div class="line"><span class="lineno"> 4563</span>                } <span class="keywordflow">else</span> {                        <span class="comment">/* This object is a file */</span></div>
<div class="line"><span class="lineno"> 4564</span>                    res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line"><span class="lineno"> 4565</span>                }</div>
<div class="line"><span class="lineno"> 4566</span>            }</div>
<div class="line"><span class="lineno"> 4567</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4568</span>                dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#afc765e01ff97bfd9645c42b0ba30397f">id</a> = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a417095d7c20d56d417dc0998e0dd5a5c">id</a>;</div>
<div class="line"><span class="lineno"> 4569</span>                res = <a class="code hl_function" href="ff_8c.html#acb185e466e88c95bdf91219f767d51f3">dir_sdi</a>(dp, 0);           <span class="comment">/* Rewind directory */</span></div>
<div class="line"><span class="lineno"> 4570</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 4571</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4572</span>                    <span class="keywordflow">if</span> (dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> != 0) {</div>
<div class="line"><span class="lineno"> 4573</span>                        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a61f23dcb8ffcbe46cf8f1385b6065be7">lockid</a> = <a class="code hl_function" href="ff_8c.html#a122100d3c53586280391dc5e86bf9184">inc_lock</a>(dp, 0);   <span class="comment">/* Lock the sub directory */</span></div>
<div class="line"><span class="lineno"> 4574</span>                        <span class="keywordflow">if</span> (!dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a61f23dcb8ffcbe46cf8f1385b6065be7">lockid</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>;</div>
<div class="line"><span class="lineno"> 4575</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4576</span>                        dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a61f23dcb8ffcbe46cf8f1385b6065be7">lockid</a> = 0; <span class="comment">/* Root directory need not to be locked */</span></div>
<div class="line"><span class="lineno"> 4577</span>                    }</div>
<div class="line"><span class="lineno"> 4578</span>                }</div>
<div class="line"><span class="lineno"> 4579</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4580</span>            }</div>
<div class="line"><span class="lineno"> 4581</span>        }</div>
<div class="line"><span class="lineno"> 4582</span>        <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 4583</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line"><span class="lineno"> 4584</span>    }</div>
<div class="line"><span class="lineno"> 4585</span>    <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = 0;       <span class="comment">/* Invalidate the directory object if function faild */</span></div>
<div class="line"><span class="lineno"> 4586</span> </div>
<div class="line"><span class="lineno"> 4587</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4588</span>}</div>
<div class="ttc" id="aff_8c_html_acb185e466e88c95bdf91219f767d51f3"><div class="ttname"><a href="ff_8c.html#acb185e466e88c95bdf91219f767d51f3">dir_sdi</a></div><div class="ttdeci">static FRESULT dir_sdi(DIR *dp, DWORD ofs)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01666">ff.c:1666</a></div></div>
<div class="ttc" id="astruct_f_f_o_b_j_i_d_html_afc765e01ff97bfd9645c42b0ba30397f"><div class="ttname"><a href="struct_f_f_o_b_j_i_d.html#afc765e01ff97bfd9645c42b0ba30397f">FFOBJID::id</a></div><div class="ttdeci">WORD id</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00184">ff.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ce26253177c167df849e76f69b5c66c" name="a4ce26253177c167df849e76f69b5c66c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ce26253177c167df849e76f69b5c66c">&#9670;&#160;</a></span>f_printf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int f_printf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l06801">6801</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 6806</span>{</div>
<div class="line"><span class="lineno"> 6807</span>    va_list arp;</div>
<div class="line"><span class="lineno"> 6808</span>    <a class="code hl_struct" href="structputbuff.html">putbuff</a> pb;</div>
<div class="line"><span class="lineno"> 6809</span>    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> i, j, w, <a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a>, r;</div>
<div class="line"><span class="lineno"> 6810</span>    <span class="keywordtype">int</span> prec;</div>
<div class="line"><span class="lineno"> 6811</span><span class="preprocessor">#if FF_PRINT_LLI &amp;&amp; FF_INTDEF == 2</span></div>
<div class="line"><span class="lineno"> 6812</span>    QWORD v;</div>
<div class="line"><span class="lineno"> 6813</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 6814</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> v;</div>
<div class="line"><span class="lineno"> 6815</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6816</span>    <a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> tc, pad, *tp;</div>
<div class="line"><span class="lineno"> 6817</span>    <a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> nul = 0;</div>
<div class="line"><span class="lineno"> 6818</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="_common_8c.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a>, str[<a class="code hl_define" href="ff_8c.html#aedd31d207555a11109ae6158be2e1d97">SZ_NUM_BUF</a>];</div>
<div class="line"><span class="lineno"> 6819</span> </div>
<div class="line"><span class="lineno"> 6820</span> </div>
<div class="line"><span class="lineno"> 6821</span>    <a class="code hl_function" href="ff_8c.html#af73608a8da04e791ba537ad39fac7cdb">putc_init</a>(&amp;pb, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>);</div>
<div class="line"><span class="lineno"> 6822</span> </div>
<div class="line"><span class="lineno"> 6823</span>    va_start(arp, fmt);</div>
<div class="line"><span class="lineno"> 6824</span> </div>
<div class="line"><span class="lineno"> 6825</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 6826</span>        tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6827</span>        <span class="keywordflow">if</span> (tc == 0) <span class="keywordflow">break</span>;         <span class="comment">/* End of format string */</span></div>
<div class="line"><span class="lineno"> 6828</span>        <span class="keywordflow">if</span> (tc != <span class="charliteral">&#39;%&#39;</span>) {            <span class="comment">/* Not an escape character (pass-through) */</span></div>
<div class="line"><span class="lineno"> 6829</span>            <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, tc);</div>
<div class="line"><span class="lineno"> 6830</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6831</span>        }</div>
<div class="line"><span class="lineno"> 6832</span>        <a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> = w = 0; pad = <span class="charliteral">&#39; &#39;</span>; prec = -1;    <span class="comment">/* Initialize parms */</span></div>
<div class="line"><span class="lineno"> 6833</span>        tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6834</span>        <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;0&#39;</span>) {            <span class="comment">/* Flag: &#39;0&#39; padded */</span></div>
<div class="line"><span class="lineno"> 6835</span>            pad = <span class="charliteral">&#39;0&#39;</span>; tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6836</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;-&#39;</span>) {     <span class="comment">/* Flag: Left aligned */</span></div>
<div class="line"><span class="lineno"> 6837</span>            <a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> = 2; tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6838</span>        }</div>
<div class="line"><span class="lineno"> 6839</span>        <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;*&#39;</span>) {            <span class="comment">/* Minimum width from an argument */</span></div>
<div class="line"><span class="lineno"> 6840</span>            w = va_arg(arp, <span class="keywordtype">int</span>);</div>
<div class="line"><span class="lineno"> 6841</span>            tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6842</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 6843</span>            <span class="keywordflow">while</span> (<a class="code hl_define" href="ff_8c.html#a65dee564f69f2ec27f25b67a348018b9">IsDigit</a>(tc)) {   <span class="comment">/* Minimum width */</span></div>
<div class="line"><span class="lineno"> 6844</span>                w = w * 10 + tc - <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno"> 6845</span>                tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6846</span>            }</div>
<div class="line"><span class="lineno"> 6847</span>        }</div>
<div class="line"><span class="lineno"> 6848</span>        <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;.&#39;</span>) {            <span class="comment">/* Precision */</span></div>
<div class="line"><span class="lineno"> 6849</span>            tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6850</span>            <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;*&#39;</span>) {        <span class="comment">/* Precision from an argument */</span></div>
<div class="line"><span class="lineno"> 6851</span>                prec = va_arg(arp, <span class="keywordtype">int</span>);</div>
<div class="line"><span class="lineno"> 6852</span>                tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6853</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 6854</span>                prec = 0;</div>
<div class="line"><span class="lineno"> 6855</span>                <span class="keywordflow">while</span> (<a class="code hl_define" href="ff_8c.html#a65dee564f69f2ec27f25b67a348018b9">IsDigit</a>(tc)) {   <span class="comment">/* Precision */</span></div>
<div class="line"><span class="lineno"> 6856</span>                    prec = prec * 10 + tc - <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno"> 6857</span>                    tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6858</span>                }</div>
<div class="line"><span class="lineno"> 6859</span>            }</div>
<div class="line"><span class="lineno"> 6860</span>        }</div>
<div class="line"><span class="lineno"> 6861</span>        <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;l&#39;</span>) {            <span class="comment">/* Size: long int */</span></div>
<div class="line"><span class="lineno"> 6862</span>            <a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> |= 4; tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6863</span><span class="preprocessor">#if FF_PRINT_LLI &amp;&amp; FF_INTDEF == 2</span></div>
<div class="line"><span class="lineno"> 6864</span>            <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;l&#39;</span>) {        <span class="comment">/* Size: long long int */</span></div>
<div class="line"><span class="lineno"> 6865</span>                <a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> |= 8; tc = *fmt++;</div>
<div class="line"><span class="lineno"> 6866</span>            }</div>
<div class="line"><span class="lineno"> 6867</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6868</span>        }</div>
<div class="line"><span class="lineno"> 6869</span>        <span class="keywordflow">if</span> (tc == 0) <span class="keywordflow">break</span>;         <span class="comment">/* End of format string */</span></div>
<div class="line"><span class="lineno"> 6870</span>        <span class="keywordflow">switch</span> (tc) {               <span class="comment">/* Atgument type is... */</span></div>
<div class="line"><span class="lineno"> 6871</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:                   <span class="comment">/* Unsigned binary */</span></div>
<div class="line"><span class="lineno"> 6872</span>            r = 2; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6873</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>:                   <span class="comment">/* Unsigned octal */</span></div>
<div class="line"><span class="lineno"> 6874</span>            r = 8; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6875</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:                   <span class="comment">/* Signed decimal */</span></div>
<div class="line"><span class="lineno"> 6876</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:                   <span class="comment">/* Unsigned decimal */</span></div>
<div class="line"><span class="lineno"> 6877</span>            r = 10; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6878</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:                   <span class="comment">/* Unsigned hexdecimal (lower case) */</span></div>
<div class="line"><span class="lineno"> 6879</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:                   <span class="comment">/* Unsigned hexdecimal (upper case) */</span></div>
<div class="line"><span class="lineno"> 6880</span>            r = 16; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6881</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:                   <span class="comment">/* Character */</span></div>
<div class="line"><span class="lineno"> 6882</span>            <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)va_arg(arp, <span class="keywordtype">int</span>));</div>
<div class="line"><span class="lineno"> 6883</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6884</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:                   <span class="comment">/* String */</span></div>
<div class="line"><span class="lineno"> 6885</span>            tp = va_arg(arp, <a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>*);   <span class="comment">/* Get a pointer argument */</span></div>
<div class="line"><span class="lineno"> 6886</span>            <span class="keywordflow">if</span> (!tp) tp = &amp;nul;     <span class="comment">/* Null ptr generates a null string */</span></div>
<div class="line"><span class="lineno"> 6887</span>            <span class="keywordflow">for</span> (j = 0; tp[j]; j++) ;   <span class="comment">/* j = tcslen(tp) */</span></div>
<div class="line"><span class="lineno"> 6888</span>            <span class="keywordflow">if</span> (prec &gt;= 0 &amp;&amp; j &gt; (<a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)prec) j = prec;  <span class="comment">/* Limited length of string body */</span></div>
<div class="line"><span class="lineno"> 6889</span>            <span class="keywordflow">for</span> ( ; !(<a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> &amp; 2) &amp;&amp; j &lt; w; j++) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, pad); <span class="comment">/* Left pads */</span></div>
<div class="line"><span class="lineno"> 6890</span>            <span class="keywordflow">while</span> (*tp &amp;&amp; prec--) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, *tp++); <span class="comment">/* Body */</span></div>
<div class="line"><span class="lineno"> 6891</span>            <span class="keywordflow">while</span> (j++ &lt; w) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, <span class="charliteral">&#39; &#39;</span>);         <span class="comment">/* Right pads */</span></div>
<div class="line"><span class="lineno"> 6892</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6893</span><span class="preprocessor">#if FF_PRINT_FLOAT &amp;&amp; FF_INTDEF == 2</span></div>
<div class="line"><span class="lineno"> 6894</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:                   <span class="comment">/* Floating point (decimal) */</span></div>
<div class="line"><span class="lineno"> 6895</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:                   <span class="comment">/* Floating point (e) */</span></div>
<div class="line"><span class="lineno"> 6896</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>:                   <span class="comment">/* Floating point (E) */</span></div>
<div class="line"><span class="lineno"> 6897</span>            ftoa(str, va_arg(arp, <span class="keywordtype">double</span>), prec, tc);   <span class="comment">/* Make a flaoting point string */</span></div>
<div class="line"><span class="lineno"> 6898</span>            <span class="keywordflow">for</span> (j = strlen(str); !(<a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> &amp; 2) &amp;&amp; j &lt; w; j++) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, pad);   <span class="comment">/* Left pads */</span></div>
<div class="line"><span class="lineno"> 6899</span>            <span class="keywordflow">for</span> (i = 0; str[i]; <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, str[i++])) ;  <span class="comment">/* Body */</span></div>
<div class="line"><span class="lineno"> 6900</span>            <span class="keywordflow">while</span> (j++ &lt; w) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, <span class="charliteral">&#39; &#39;</span>); <span class="comment">/* Right pads */</span></div>
<div class="line"><span class="lineno"> 6901</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6902</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6903</span>        <span class="keywordflow">default</span>:                    <span class="comment">/* Unknown type (pass-through) */</span></div>
<div class="line"><span class="lineno"> 6904</span>            <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, tc); <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6905</span>        }</div>
<div class="line"><span class="lineno"> 6906</span> </div>
<div class="line"><span class="lineno"> 6907</span>        <span class="comment">/* Get an integer argument and put it in numeral */</span></div>
<div class="line"><span class="lineno"> 6908</span><span class="preprocessor">#if FF_PRINT_LLI &amp;&amp; FF_INTDEF == 2</span></div>
<div class="line"><span class="lineno"> 6909</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> &amp; 8) {    <span class="comment">/* long long argument? */</span></div>
<div class="line"><span class="lineno"> 6910</span>            v = (QWORD)va_arg(arp, LONGLONG);</div>
<div class="line"><span class="lineno"> 6911</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 6912</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> &amp; 4) {    <span class="comment">/* long argument? */</span></div>
<div class="line"><span class="lineno"> 6913</span>                v = (tc == <span class="charliteral">&#39;d&#39;</span>) ? (QWORD)(LONGLONG)va_arg(arp, <span class="keywordtype">long</span>) : (QWORD)va_arg(arp, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>);</div>
<div class="line"><span class="lineno"> 6914</span>            } <span class="keywordflow">else</span> {        <span class="comment">/* int/short/char argument */</span></div>
<div class="line"><span class="lineno"> 6915</span>                v = (tc == <span class="charliteral">&#39;d&#39;</span>) ? (QWORD)(LONGLONG)va_arg(arp, <span class="keywordtype">int</span>) : (QWORD)va_arg(arp, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>);</div>
<div class="line"><span class="lineno"> 6916</span>            }</div>
<div class="line"><span class="lineno"> 6917</span>        }</div>
<div class="line"><span class="lineno"> 6918</span>        <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;d&#39;</span> &amp;&amp; (v &amp; 0x8000000000000000)) {    <span class="comment">/* Negative value? */</span></div>
<div class="line"><span class="lineno"> 6919</span>            v = 0 - v; <a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> |= 1;</div>
<div class="line"><span class="lineno"> 6920</span>        }</div>
<div class="line"><span class="lineno"> 6921</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 6922</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> &amp; 4) {    <span class="comment">/* long argument? */</span></div>
<div class="line"><span class="lineno"> 6923</span>            v = (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)va_arg(arp, <span class="keywordtype">long</span>);</div>
<div class="line"><span class="lineno"> 6924</span>        } <span class="keywordflow">else</span> {        <span class="comment">/* int/short/char argument */</span></div>
<div class="line"><span class="lineno"> 6925</span>            v = (tc == <span class="charliteral">&#39;d&#39;</span>) ? (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(long)va_arg(arp, <span class="keywordtype">int</span>) : (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)va_arg(arp, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>);</div>
<div class="line"><span class="lineno"> 6926</span>        }</div>
<div class="line"><span class="lineno"> 6927</span>        <span class="keywordflow">if</span> (tc == <span class="charliteral">&#39;d&#39;</span> &amp;&amp; (v &amp; 0x80000000)) {    <span class="comment">/* Negative value? */</span></div>
<div class="line"><span class="lineno"> 6928</span>            v = 0 - v; <a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> |= 1;</div>
<div class="line"><span class="lineno"> 6929</span>        }</div>
<div class="line"><span class="lineno"> 6930</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6931</span>        i = 0;</div>
<div class="line"><span class="lineno"> 6932</span>        <span class="keywordflow">do</span> {    <span class="comment">/* Make an integer number string */</span></div>
<div class="line"><span class="lineno"> 6933</span>            <a class="code hl_variable" href="_common_8c.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a> = (char)(v % r); v /= r;</div>
<div class="line"><span class="lineno"> 6934</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_common_8c.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a> &gt; 9) <a class="code hl_variable" href="_common_8c.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a> += (tc == <span class="charliteral">&#39;x&#39;</span>) ? 0x27 : 0x07;</div>
<div class="line"><span class="lineno"> 6935</span>            str[i++] = <a class="code hl_variable" href="_common_8c.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a> + <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno"> 6936</span>        } <span class="keywordflow">while</span> (v &amp;&amp; i &lt; <a class="code hl_define" href="ff_8c.html#aedd31d207555a11109ae6158be2e1d97">SZ_NUM_BUF</a>);</div>
<div class="line"><span class="lineno"> 6937</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> &amp; 1) str[i++] = <span class="charliteral">&#39;-&#39;</span>;  <span class="comment">/* Sign */</span></div>
<div class="line"><span class="lineno"> 6938</span>        <span class="comment">/* Write it */</span></div>
<div class="line"><span class="lineno"> 6939</span>        <span class="keywordflow">for</span> (j = i; !(<a class="code hl_variable" href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a> &amp; 2) &amp;&amp; j &lt; w; j++) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, pad); <span class="comment">/* Left pads */</span></div>
<div class="line"><span class="lineno"> 6940</span>        <span class="keywordflow">do</span> <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, (<a class="code hl_typedef" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>)str[--i]); <span class="keywordflow">while</span> (i);   <span class="comment">/* Body */</span></div>
<div class="line"><span class="lineno"> 6941</span>        <span class="keywordflow">while</span> (j++ &lt; w) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, <span class="charliteral">&#39; &#39;</span>);     <span class="comment">/* Right pads */</span></div>
<div class="line"><span class="lineno"> 6942</span>    }</div>
<div class="line"><span class="lineno"> 6943</span> </div>
<div class="line"><span class="lineno"> 6944</span>    va_end(arp);</div>
<div class="line"><span class="lineno"> 6945</span> </div>
<div class="line"><span class="lineno"> 6946</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="ff_8c.html#a4bdb66e3988f209a4685ef3091165d7f">putc_flush</a>(&amp;pb);</div>
<div class="line"><span class="lineno"> 6947</span>}</div>
<div class="ttc" id="a_common_8c_html_a3808cd021ae482979b2c4e49e1fab2e3"><div class="ttname"><a href="_common_8c.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a></div><div class="ttdeci">static uint32_t d</div><div class="ttdef"><b>Definition</b> <a href="_common_8c_source.html#l00039">Common.c:39</a></div></div>
<div class="ttc" id="a_common_8c_html_ae62fc1ab6b0e2ecfbb6ed4186c722c3d"><div class="ttname"><a href="_common_8c.html#ae62fc1ab6b0e2ecfbb6ed4186c722c3d">f</a></div><div class="ttdeci">static uint32_t f</div><div class="ttdef"><b>Definition</b> <a href="_common_8c_source.html#l00041">Common.c:41</a></div></div>
<div class="ttc" id="aff_8c_html_a19f72a515ee94dd8a9660d513172ce9b"><div class="ttname"><a href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a></div><div class="ttdeci">static void putc_bfd(putbuff *pb, TCHAR c)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l06488">ff.c:6488</a></div></div>
<div class="ttc" id="aff_8c_html_a4bdb66e3988f209a4685ef3091165d7f"><div class="ttname"><a href="ff_8c.html#a4bdb66e3988f209a4685ef3091165d7f">putc_flush</a></div><div class="ttdeci">static int putc_flush(putbuff *pb)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l06619">ff.c:6619</a></div></div>
<div class="ttc" id="aff_8c_html_a65dee564f69f2ec27f25b67a348018b9"><div class="ttname"><a href="ff_8c.html#a65dee564f69f2ec27f25b67a348018b9">IsDigit</a></div><div class="ttdeci">#define IsDigit(c)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00050">ff.c:50</a></div></div>
<div class="ttc" id="aff_8c_html_aedd31d207555a11109ae6158be2e1d97"><div class="ttname"><a href="ff_8c.html#aedd31d207555a11109ae6158be2e1d97">SZ_NUM_BUF</a></div><div class="ttdeci">#define SZ_NUM_BUF</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l06465">ff.c:6465</a></div></div>
<div class="ttc" id="aff_8c_html_af73608a8da04e791ba537ad39fac7cdb"><div class="ttname"><a href="ff_8c.html#af73608a8da04e791ba537ad39fac7cdb">putc_init</a></div><div class="ttdeci">static void putc_init(putbuff *pb, FIL *fp)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l06632">ff.c:6632</a></div></div>
<div class="ttc" id="astructputbuff_html"><div class="ttname"><a href="structputbuff.html">putbuff</a></div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l06473">ff.c:6473</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1d73b8d01c2ef89eddf920b7fcc6beb" name="ad1d73b8d01c2ef89eddf920b7fcc6beb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d73b8d01c2ef89eddf920b7fcc6beb">&#9670;&#160;</a></span>f_putc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int f_putc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l06640">6640</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 6644</span>{</div>
<div class="line"><span class="lineno"> 6645</span>    <a class="code hl_struct" href="structputbuff.html">putbuff</a> pb;</div>
<div class="line"><span class="lineno"> 6646</span> </div>
<div class="line"><span class="lineno"> 6647</span> </div>
<div class="line"><span class="lineno"> 6648</span>    <a class="code hl_function" href="ff_8c.html#af73608a8da04e791ba537ad39fac7cdb">putc_init</a>(&amp;pb, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>);</div>
<div class="line"><span class="lineno"> 6649</span>    <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a>);   <span class="comment">/* Put the character */</span></div>
<div class="line"><span class="lineno"> 6650</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="ff_8c.html#a4bdb66e3988f209a4685ef3091165d7f">putc_flush</a>(&amp;pb);</div>
<div class="line"><span class="lineno"> 6651</span>}</div>
<div class="ttc" id="a_common_8c_html_aaf5d342e977c5857e99310eea0e72e4b"><div class="ttname"><a href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a></div><div class="ttdeci">static uint32_t c</div><div class="ttdef"><b>Definition</b> <a href="_common_8c_source.html#l00038">Common.c:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a699fc03ffa785ceab8812a7f204421f3" name="a699fc03ffa785ceab8812a7f204421f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a699fc03ffa785ceab8812a7f204421f3">&#9670;&#160;</a></span>f_puts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int f_puts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>cp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l06660">6660</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 6664</span>{</div>
<div class="line"><span class="lineno"> 6665</span>    <a class="code hl_struct" href="structputbuff.html">putbuff</a> pb;</div>
<div class="line"><span class="lineno"> 6666</span> </div>
<div class="line"><span class="lineno"> 6667</span> </div>
<div class="line"><span class="lineno"> 6668</span>    <a class="code hl_function" href="ff_8c.html#af73608a8da04e791ba537ad39fac7cdb">putc_init</a>(&amp;pb, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>);</div>
<div class="line"><span class="lineno"> 6669</span>    <span class="keywordflow">while</span> (*str) <a class="code hl_function" href="ff_8c.html#a19f72a515ee94dd8a9660d513172ce9b">putc_bfd</a>(&amp;pb, *str++);     <span class="comment">/* Put the string */</span></div>
<div class="line"><span class="lineno"> 6670</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="ff_8c.html#a4bdb66e3988f209a4685ef3091165d7f">putc_flush</a>(&amp;pb);</div>
<div class="line"><span class="lineno"> 6671</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4c3dcb6869ca252888eebabe39727b3" name="ac4c3dcb6869ca252888eebabe39727b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4c3dcb6869ca252888eebabe39727b3">&#9670;&#160;</a></span>f_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>btr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname"><em>br</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l03850">3850</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3856</span>{</div>
<div class="line"><span class="lineno"> 3857</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 3858</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 3859</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst;</div>
<div class="line"><span class="lineno"> 3860</span>    <a class="code hl_typedef" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> sect;</div>
<div class="line"><span class="lineno"> 3861</span>    <a class="code hl_typedef" href="ff_8h.html#a3fc0992ad7436250b6b1a0592214b7f2">FSIZE_t</a> remain;</div>
<div class="line"><span class="lineno"> 3862</span>    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> rcnt, cc, csect;</div>
<div class="line"><span class="lineno"> 3863</span>    <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *rbuff = (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)buff;</div>
<div class="line"><span class="lineno"> 3864</span> </div>
<div class="line"><span class="lineno"> 3865</span> </div>
<div class="line"><span class="lineno"> 3866</span>    *br = 0;    <span class="comment">/* Clear read byte counter */</span></div>
<div class="line"><span class="lineno"> 3867</span>    res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, &amp;fs);              <span class="comment">/* Check validity of the file object */</span></div>
<div class="line"><span class="lineno"> 3868</span>    <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> || (res = (<a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;err) != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);   <span class="comment">/* Check validity */</span></div>
<div class="line"><span class="lineno"> 3869</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>)) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>); <span class="comment">/* Check access mode */</span></div>
<div class="line"><span class="lineno"> 3870</span>    remain = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize - <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr;</div>
<div class="line"><span class="lineno"> 3871</span>    <span class="keywordflow">if</span> (btr &gt; remain) btr = (<a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)remain;       <span class="comment">/* Truncate btr by remaining bytes */</span></div>
<div class="line"><span class="lineno"> 3872</span> </div>
<div class="line"><span class="lineno"> 3873</span>    <span class="keywordflow">for</span> ( ; btr &gt; 0; btr -= rcnt, *br += rcnt, rbuff += rcnt, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr += rcnt) {   <span class="comment">/* Repeat until btr bytes read */</span></div>
<div class="line"><span class="lineno"> 3874</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) == 0) {           <span class="comment">/* On the sector boundary? */</span></div>
<div class="line"><span class="lineno"> 3875</span>            csect = (<a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr / <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) &amp; (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> - 1));    <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line"><span class="lineno"> 3876</span>            <span class="keywordflow">if</span> (csect == 0) {                   <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line"><span class="lineno"> 3877</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr == 0) {            <span class="comment">/* On the top of the file? */</span></div>
<div class="line"><span class="lineno"> 3878</span>                    clst = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust;      <span class="comment">/* Follow cluster chain from the origin */</span></div>
<div class="line"><span class="lineno"> 3879</span>                } <span class="keywordflow">else</span> {                        <span class="comment">/* Middle or end of the file */</span></div>
<div class="line"><span class="lineno"> 3880</span><span class="preprocessor">#if FF_USE_FASTSEEK</span></div>
<div class="line"><span class="lineno"> 3881</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;cltbl) {</div>
<div class="line"><span class="lineno"> 3882</span>                        clst = clmt_clust(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr);    <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line"><span class="lineno"> 3883</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3884</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3885</span>                    {</div>
<div class="line"><span class="lineno"> 3886</span>                        clst = <a class="code hl_function" href="ff_8c.html#a646295b3567c3e29932fab442b1c90e4">get_fat</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust);    <span class="comment">/* Follow cluster chain on the FAT */</span></div>
<div class="line"><span class="lineno"> 3887</span>                    }</div>
<div class="line"><span class="lineno"> 3888</span>                }</div>
<div class="line"><span class="lineno"> 3889</span>                <span class="keywordflow">if</span> (clst &lt; 2) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 3890</span>                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 3891</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust = clst;               <span class="comment">/* Update current cluster */</span></div>
<div class="line"><span class="lineno"> 3892</span>            }</div>
<div class="line"><span class="lineno"> 3893</span>            sect = <a class="code hl_function" href="ff_8c.html#a4c9686ac79b28c453a4d9fd7f0b53f9b">clst2sect</a>(fs, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust);    <span class="comment">/* Get current sector */</span></div>
<div class="line"><span class="lineno"> 3894</span>            <span class="keywordflow">if</span> (sect == 0) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 3895</span>            sect += csect;</div>
<div class="line"><span class="lineno"> 3896</span>            cc = btr / <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);                  <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line"><span class="lineno"> 3897</span>            <span class="keywordflow">if</span> (cc &gt; 0) {                       <span class="comment">/* Read maximum contiguous sectors directly */</span></div>
<div class="line"><span class="lineno"> 3898</span>                <span class="keywordflow">if</span> (csect + cc &gt; fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a>) {   <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line"><span class="lineno"> 3899</span>                    cc = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> - csect;</div>
<div class="line"><span class="lineno"> 3900</span>                }</div>
<div class="line"><span class="lineno"> 3901</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#a0711b1d03b833e9d73b3be1a6397f461">disk_read</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, rbuff, sect, cc) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 3902</span><span class="preprocessor">#if !FF_FS_READONLY &amp;&amp; FF_FS_MINIMIZE &lt;= 2      </span><span class="comment">/* Replace one of the read sectors with cached data if it contains a dirty sector */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3903</span><span class="preprocessor">#if FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 3904</span>                <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> &amp;&amp; fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a> - sect &lt; cc) {</div>
<div class="line"><span class="lineno"> 3905</span>                    memcpy(rbuff + ((fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a> - sect) * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)), fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>, <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));</div>
<div class="line"><span class="lineno"> 3906</span>                }</div>
<div class="line"><span class="lineno"> 3907</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3908</span>                <span class="keywordflow">if</span> ((<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>) &amp;&amp; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect - sect &lt; cc) {</div>
<div class="line"><span class="lineno"> 3909</span>                    memcpy(rbuff + ((<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect - sect) * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)), <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));</div>
<div class="line"><span class="lineno"> 3910</span>                }</div>
<div class="line"><span class="lineno"> 3911</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3912</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3913</span>                rcnt = <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) * cc;             <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line"><span class="lineno"> 3914</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3915</span>            }</div>
<div class="line"><span class="lineno"> 3916</span><span class="preprocessor">#if !FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 3917</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect != sect) {         <span class="comment">/* Load data sector if not in cache */</span></div>
<div class="line"><span class="lineno"> 3918</span><span class="preprocessor">#if !FF_FS_READONLY</span></div>
<div class="line"><span class="lineno"> 3919</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>) {      <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line"><span class="lineno"> 3920</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 3921</span>                    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 3922</span>                }</div>
<div class="line"><span class="lineno"> 3923</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3924</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#a0711b1d03b833e9d73b3be1a6397f461">disk_read</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)    <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>); <span class="comment">/* Fill sector cache */</span></div>
<div class="line"><span class="lineno"> 3925</span>            }</div>
<div class="line"><span class="lineno"> 3926</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3927</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect = sect;</div>
<div class="line"><span class="lineno"> 3928</span>        }</div>
<div class="line"><span class="lineno"> 3929</span>        rcnt = <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) - (<a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);    <span class="comment">/* Number of bytes remains in the sector */</span></div>
<div class="line"><span class="lineno"> 3930</span>        <span class="keywordflow">if</span> (rcnt &gt; btr) rcnt = btr;                 <span class="comment">/* Clip it by btr if needed */</span></div>
<div class="line"><span class="lineno"> 3931</span><span class="preprocessor">#if FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 3932</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a>(fs, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect) != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>); <span class="comment">/* Move sector window */</span></div>
<div class="line"><span class="lineno"> 3933</span>        memcpy(rbuff, fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs), rcnt);   <span class="comment">/* Extract partial sector */</span></div>
<div class="line"><span class="lineno"> 3934</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3935</span>        memcpy(rbuff, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf + <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs), rcnt);   <span class="comment">/* Extract partial sector */</span></div>
<div class="line"><span class="lineno"> 3936</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3937</span>    }</div>
<div class="line"><span class="lineno"> 3938</span> </div>
<div class="line"><span class="lineno"> 3939</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line"><span class="lineno"> 3940</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab39e82a110695de45f416f3149358012" name="ab39e82a110695de45f416f3149358012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab39e82a110695de45f416f3149358012">&#9670;&#160;</a></span>f_readdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_readdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04627">4627</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4631</span>{</div>
<div class="line"><span class="lineno"> 4632</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4633</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4634</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 4635</span> </div>
<div class="line"><span class="lineno"> 4636</span> </div>
<div class="line"><span class="lineno"> 4637</span>    res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;dp-&gt;<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>, &amp;fs);  <span class="comment">/* Check validity of the directory object */</span></div>
<div class="line"><span class="lineno"> 4638</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4639</span>        <span class="keywordflow">if</span> (!fno) {</div>
<div class="line"><span class="lineno"> 4640</span>            res = <a class="code hl_function" href="ff_8c.html#acb185e466e88c95bdf91219f767d51f3">dir_sdi</a>(dp, 0);           <span class="comment">/* Rewind the directory object */</span></div>
<div class="line"><span class="lineno"> 4641</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4642</span>            <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 4643</span>            res = <a class="code hl_define" href="ff_8c.html#a7dc00ac3fd99f0a14d6b7f3fc76b8778">DIR_READ_FILE</a>(dp);        <span class="comment">/* Read an item */</span></div>
<div class="line"><span class="lineno"> 4644</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>; <span class="comment">/* Ignore end of directory */</span></div>
<div class="line"><span class="lineno"> 4645</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {             <span class="comment">/* A valid entry is found */</span></div>
<div class="line"><span class="lineno"> 4646</span>                <a class="code hl_function" href="ff_8c.html#a2bc1b9d8567181c23b4720f4fb6076f5">get_fileinfo</a>(dp, fno);      <span class="comment">/* Get the object information */</span></div>
<div class="line"><span class="lineno"> 4647</span>                res = <a class="code hl_function" href="ff_8c.html#a2edd26ac71869f25be5fce12eec58171">dir_next</a>(dp, 0);      <span class="comment">/* Increment index for next */</span></div>
<div class="line"><span class="lineno"> 4648</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>; <span class="comment">/* Ignore end of directory now */</span></div>
<div class="line"><span class="lineno"> 4649</span>            }</div>
<div class="line"><span class="lineno"> 4650</span>            <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 4651</span>        }</div>
<div class="line"><span class="lineno"> 4652</span>    }</div>
<div class="line"><span class="lineno"> 4653</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4654</span>}</div>
<div class="ttc" id="aff_8c_html_a2bc1b9d8567181c23b4720f4fb6076f5"><div class="ttname"><a href="ff_8c.html#a2bc1b9d8567181c23b4720f4fb6076f5">get_fileinfo</a></div><div class="ttdeci">static void get_fileinfo(DIR *dp, FILINFO *fno)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l02586">ff.c:2586</a></div></div>
<div class="ttc" id="aff_8c_html_a2edd26ac71869f25be5fce12eec58171"><div class="ttname"><a href="ff_8c.html#a2edd26ac71869f25be5fce12eec58171">dir_next</a></div><div class="ttdeci">static FRESULT dir_next(DIR *dp, int stretch)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01714">ff.c:1714</a></div></div>
<div class="ttc" id="aff_8c_html_a7dc00ac3fd99f0a14d6b7f3fc76b8778"><div class="ttname"><a href="ff_8c.html#a7dc00ac3fd99f0a14d6b7f3fc76b8778">DIR_READ_FILE</a></div><div class="ttdeci">#define DIR_READ_FILE(dp)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l02272">ff.c:2272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa775b9b024acfeb3a66523cab497d142" name="aa775b9b024acfeb3a66523cab497d142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa775b9b024acfeb3a66523cab497d142">&#9670;&#160;</a></span>f_rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_rename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path_new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l05070">5070</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 5074</span>{</div>
<div class="line"><span class="lineno"> 5075</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 5076</span>    <a class="code hl_struct" href="struct_d_i_r.html">DIR</a> djo, djn;</div>
<div class="line"><span class="lineno"> 5077</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 5078</span>    <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> buf[<a class="code hl_define" href="ffconf_8h.html#a4374b721b8019acc9761fdd8b829ccd0">FF_FS_EXFAT</a> ? <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a> * 2 : <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a>], *dir;</div>
<div class="line"><span class="lineno"> 5079</span>    <a class="code hl_typedef" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> sect;</div>
<div class="line"><span class="lineno"> 5080</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 5081</span> </div>
<div class="line"><span class="lineno"> 5082</span> </div>
<div class="line"><span class="lineno"> 5083</span>    <a class="code hl_function" href="ff_8c.html#a88ad7e4b1bc98d1a2673a136283dc7ee">get_ldnumber</a>(&amp;path_new);                        <span class="comment">/* Snip the drive number of new name off */</span></div>
<div class="line"><span class="lineno"> 5084</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path_old, &amp;fs, <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>);   <span class="comment">/* Get logical drive of the old object */</span></div>
<div class="line"><span class="lineno"> 5085</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5086</span>        djo.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 5087</span>        <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 5088</span>        res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;djo, path_old);          <span class="comment">/* Check old object */</span></div>
<div class="line"><span class="lineno"> 5089</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (djo.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; (<a class="code hl_define" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a> | <a class="code hl_define" href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a>))) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>; <span class="comment">/* Check validity of name */</span></div>
<div class="line"><span class="lineno"> 5090</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 5091</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5092</span>            res = <a class="code hl_function" href="ff_8c.html#aee054a7d05639ea60071f5e1246ef8c1">chk_lock</a>(&amp;djo, 2);</div>
<div class="line"><span class="lineno"> 5093</span>        }</div>
<div class="line"><span class="lineno"> 5094</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5095</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                 <span class="comment">/* Object to be renamed is found */</span></div>
<div class="line"><span class="lineno"> 5096</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 5097</span>            <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {  <span class="comment">/* At exFAT volume */</span></div>
<div class="line"><span class="lineno"> 5098</span>                <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> nf, nn;</div>
<div class="line"><span class="lineno"> 5099</span>                <a class="code hl_typedef" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> nh;</div>
<div class="line"><span class="lineno"> 5100</span> </div>
<div class="line"><span class="lineno"> 5101</span>                memcpy(buf, fs-&gt;dirbuf, <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a> * 2);    <span class="comment">/* Save 85+C0 entry of old object */</span></div>
<div class="line"><span class="lineno"> 5102</span>                memcpy(&amp;djn, &amp;djo, <span class="keyword">sizeof</span> djo);</div>
<div class="line"><span class="lineno"> 5103</span>                res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;djn, path_new);      <span class="comment">/* Make sure if new object name is not in use */</span></div>
<div class="line"><span class="lineno"> 5104</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                     <span class="comment">/* Is new name already in use by any other object? */</span></div>
<div class="line"><span class="lineno"> 5105</span>                    res = (djn.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> == djo.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> &amp;&amp; djn.<a class="code hl_variable" href="struct_d_i_r.html#a0330e9554e1f38795debe4495156873e">dptr</a> == djo.<a class="code hl_variable" href="struct_d_i_r.html#a0330e9554e1f38795debe4495156873e">dptr</a>) ? <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a> : <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;</div>
<div class="line"><span class="lineno"> 5106</span>                }</div>
<div class="line"><span class="lineno"> 5107</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                <span class="comment">/* It is a valid path and no name collision */</span></div>
<div class="line"><span class="lineno"> 5108</span>                    res = <a class="code hl_function" href="ff_8c.html#aaff1b52e1f7ae47b4aedad795d7e7e64">dir_register</a>(&amp;djn);           <span class="comment">/* Register the new entry */</span></div>
<div class="line"><span class="lineno"> 5109</span>                    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5110</span>                        nf = fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#a37e729265403caf1ae349714e069a3e6">XDIR_NumSec</a>]; nn = fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#a382f456b33f0c719163bcf521aa7ecea">XDIR_NumName</a>];</div>
<div class="line"><span class="lineno"> 5111</span>                        nh = <a class="code hl_function" href="ff_8c.html#afb2ad66be348163ba091faf871b0d9b6">ld_word</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#a7c0a94f8a7efc7a710d6eb897059462d">XDIR_NameHash</a>);</div>
<div class="line"><span class="lineno"> 5112</span>                        memcpy(fs-&gt;dirbuf, buf, <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a> * 2);    <span class="comment">/* Restore 85+C0 entry */</span></div>
<div class="line"><span class="lineno"> 5113</span>                        fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#a37e729265403caf1ae349714e069a3e6">XDIR_NumSec</a>] = nf; fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#a382f456b33f0c719163bcf521aa7ecea">XDIR_NumName</a>] = nn;</div>
<div class="line"><span class="lineno"> 5114</span>                        <a class="code hl_function" href="ff_8c.html#a2c55656b749270f0183938bc68f4e004">st_word</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#a7c0a94f8a7efc7a710d6eb897059462d">XDIR_NameHash</a>, nh);</div>
<div class="line"><span class="lineno"> 5115</span>                        <span class="keywordflow">if</span> (!(fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#aafe8687fb9356906c13ccd9fe88eb3de">XDIR_Attr</a>] &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#aafe8687fb9356906c13ccd9fe88eb3de">XDIR_Attr</a>] |= <a class="code hl_define" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>; <span class="comment">/* Set archive attribute if it is a file */</span></div>
<div class="line"><span class="lineno"> 5116</span><span class="comment">/* Start of critical section where an interruption can cause a cross-link */</span></div>
<div class="line"><span class="lineno"> 5117</span>                        res = store_xdir(&amp;djn);</div>
<div class="line"><span class="lineno"> 5118</span>                    }</div>
<div class="line"><span class="lineno"> 5119</span>                }</div>
<div class="line"><span class="lineno"> 5120</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5121</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5122</span>            {   <span class="comment">/* At FAT/FAT32 volume */</span></div>
<div class="line"><span class="lineno"> 5123</span>                memcpy(buf, djo.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>, <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a>);           <span class="comment">/* Save directory entry of the object */</span></div>
<div class="line"><span class="lineno"> 5124</span>                memcpy(&amp;djn, &amp;djo, <span class="keyword">sizeof</span> (<a class="code hl_struct" href="struct_d_i_r.html">DIR</a>));       <span class="comment">/* Duplicate the directory object */</span></div>
<div class="line"><span class="lineno"> 5125</span>                res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;djn, path_new);      <span class="comment">/* Make sure if new object name is not in use */</span></div>
<div class="line"><span class="lineno"> 5126</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                     <span class="comment">/* Is new name already in use by any other object? */</span></div>
<div class="line"><span class="lineno"> 5127</span>                    res = (djn.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> == djo.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> &amp;&amp; djn.<a class="code hl_variable" href="struct_d_i_r.html#a0330e9554e1f38795debe4495156873e">dptr</a> == djo.<a class="code hl_variable" href="struct_d_i_r.html#a0330e9554e1f38795debe4495156873e">dptr</a>) ? <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a> : <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;</div>
<div class="line"><span class="lineno"> 5128</span>                }</div>
<div class="line"><span class="lineno"> 5129</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                <span class="comment">/* It is a valid path and no name collision */</span></div>
<div class="line"><span class="lineno"> 5130</span>                    res = <a class="code hl_function" href="ff_8c.html#aaff1b52e1f7ae47b4aedad795d7e7e64">dir_register</a>(&amp;djn);           <span class="comment">/* Register the new entry */</span></div>
<div class="line"><span class="lineno"> 5131</span>                    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5132</span>                        dir = djn.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>;                  <span class="comment">/* Copy directory entry of the object except name */</span></div>
<div class="line"><span class="lineno"> 5133</span>                        memcpy(dir + 13, buf + 13, <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a> - 13);</div>
<div class="line"><span class="lineno"> 5134</span>                        dir[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = buf[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>];</div>
<div class="line"><span class="lineno"> 5135</span>                        <span class="keywordflow">if</span> (!(dir[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) dir[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] |= <a class="code hl_define" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>; <span class="comment">/* Set archive attribute if it is a file */</span></div>
<div class="line"><span class="lineno"> 5136</span>                        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 1;</div>
<div class="line"><span class="lineno"> 5137</span>                        <span class="keywordflow">if</span> ((dir[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) &amp;&amp; djo.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> != djn.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>) { <span class="comment">/* Update .. entry in the sub-directory if needed */</span></div>
<div class="line"><span class="lineno"> 5138</span>                            sect = <a class="code hl_function" href="ff_8c.html#a4c9686ac79b28c453a4d9fd7f0b53f9b">clst2sect</a>(fs, <a class="code hl_function" href="ff_8c.html#ad1b3343c92d0f0e58ba448c3c11b1f39">ld_clust</a>(fs, dir));</div>
<div class="line"><span class="lineno"> 5139</span>                            <span class="keywordflow">if</span> (sect == 0) {</div>
<div class="line"><span class="lineno"> 5140</span>                                res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="lineno"> 5141</span>                            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5142</span><span class="comment">/* Start of critical section where an interruption can cause a cross-link */</span></div>
<div class="line"><span class="lineno"> 5143</span>                                res = <a class="code hl_function" href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a>(fs, sect);</div>
<div class="line"><span class="lineno"> 5144</span>                                dir = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + <a class="code hl_define" href="ff_8c.html#a90943705ce4b32e47562c9f56860c7af">SZDIRE</a> * 1; <span class="comment">/* Ptr to .. entry */</span></div>
<div class="line"><span class="lineno"> 5145</span>                                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; dir[1] == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line"><span class="lineno"> 5146</span>                                    <a class="code hl_function" href="ff_8c.html#a37c48dd3839cb11a440883ae331b4b7d">st_clust</a>(fs, dir, djn.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>);</div>
<div class="line"><span class="lineno"> 5147</span>                                    fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 1;</div>
<div class="line"><span class="lineno"> 5148</span>                                }</div>
<div class="line"><span class="lineno"> 5149</span>                            }</div>
<div class="line"><span class="lineno"> 5150</span>                        }</div>
<div class="line"><span class="lineno"> 5151</span>                    }</div>
<div class="line"><span class="lineno"> 5152</span>                }</div>
<div class="line"><span class="lineno"> 5153</span>            }</div>
<div class="line"><span class="lineno"> 5154</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5155</span>                res = <a class="code hl_function" href="ff_8c.html#a724c260af4783a0ecf0db8d0687e7bd6">dir_remove</a>(&amp;djo);     <span class="comment">/* Remove old entry */</span></div>
<div class="line"><span class="lineno"> 5156</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 5157</span>                    res = <a class="code hl_function" href="ff_8c.html#aec6b108298553219ebb2b960b528459d">sync_fs</a>(fs);</div>
<div class="line"><span class="lineno"> 5158</span>                }</div>
<div class="line"><span class="lineno"> 5159</span>            }</div>
<div class="line"><span class="lineno"> 5160</span><span class="comment">/* End of the critical section */</span></div>
<div class="line"><span class="lineno"> 5161</span>        }</div>
<div class="line"><span class="lineno"> 5162</span>        <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 5163</span>    }</div>
<div class="line"><span class="lineno"> 5164</span> </div>
<div class="line"><span class="lineno"> 5165</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 5166</span>}</div>
<div class="ttc" id="aff_8c_html_a2c55656b749270f0183938bc68f4e004"><div class="ttname"><a href="ff_8c.html#a2c55656b749270f0183938bc68f4e004">st_word</a></div><div class="ttdeci">static void st_word(BYTE *ptr, WORD val)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00652">ff.c:652</a></div></div>
<div class="ttc" id="aff_8c_html_a37e729265403caf1ae349714e069a3e6"><div class="ttname"><a href="ff_8c.html#a37e729265403caf1ae349714e069a3e6">XDIR_NumSec</a></div><div class="ttdeci">#define XDIR_NumSec</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00170">ff.c:170</a></div></div>
<div class="ttc" id="aff_8c_html_a382f456b33f0c719163bcf521aa7ecea"><div class="ttname"><a href="ff_8c.html#a382f456b33f0c719163bcf521aa7ecea">XDIR_NumName</a></div><div class="ttdeci">#define XDIR_NumName</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00182">ff.c:182</a></div></div>
<div class="ttc" id="aff_8c_html_a724c260af4783a0ecf0db8d0687e7bd6"><div class="ttname"><a href="ff_8c.html#a724c260af4783a0ecf0db8d0687e7bd6">dir_remove</a></div><div class="ttdeci">static FRESULT dir_remove(DIR *dp)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l02540">ff.c:2540</a></div></div>
<div class="ttc" id="aff_8c_html_a7c0a94f8a7efc7a710d6eb897059462d"><div class="ttname"><a href="ff_8c.html#a7c0a94f8a7efc7a710d6eb897059462d">XDIR_NameHash</a></div><div class="ttdeci">#define XDIR_NameHash</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00183">ff.c:183</a></div></div>
<div class="ttc" id="aff_8h_html_a197942eefa7db30960ae396d68339b97"><div class="ttname"><a href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a></div><div class="ttdeci">unsigned short WORD</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00060">ff.h:60</a></div></div>
<div class="ttc" id="astruct_d_i_r_html_a0330e9554e1f38795debe4495156873e"><div class="ttname"><a href="struct_d_i_r.html#a0330e9554e1f38795debe4495156873e">DIR::dptr</a></div><div class="ttdeci">DWORD dptr</div><div class="ttdef"><b>Definition</b> <a href="ff_8h_source.html#l00230">ff.h:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a529e8f17cae495f6536ff405622c996c" name="a529e8f17cae495f6536ff405622c996c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a529e8f17cae495f6536ff405622c996c">&#9670;&#160;</a></span>f_setcp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_setcp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>&#160;</td>
          <td class="paramname"><em>cp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa82bca64e28bc0d656a7999dd0eadec7" name="aa82bca64e28bc0d656a7999dd0eadec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa82bca64e28bc0d656a7999dd0eadec7">&#9670;&#160;</a></span>f_setlabel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_setlabel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>label</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abe1f60daab5c7d11170c334fb832c798" name="abe1f60daab5c7d11170c334fb832c798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe1f60daab5c7d11170c334fb832c798">&#9670;&#160;</a></span>f_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_stat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04715">4715</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4719</span>{</div>
<div class="line"><span class="lineno"> 4720</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4721</span>    <a class="code hl_struct" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line"><span class="lineno"> 4722</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 4723</span> </div>
<div class="line"><span class="lineno"> 4724</span> </div>
<div class="line"><span class="lineno"> 4725</span>    <span class="comment">/* Get logical drive */</span></div>
<div class="line"><span class="lineno"> 4726</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a>, 0);</div>
<div class="line"><span class="lineno"> 4727</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4728</span>        <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a>);</div>
<div class="line"><span class="lineno"> 4729</span>        res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line"><span class="lineno"> 4730</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {             <span class="comment">/* Follow completed */</span></div>
<div class="line"><span class="lineno"> 4731</span>            <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a>) {    <span class="comment">/* It is origin directory */</span></div>
<div class="line"><span class="lineno"> 4732</span>                res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="lineno"> 4733</span>            } <span class="keywordflow">else</span> {                            <span class="comment">/* Found an object */</span></div>
<div class="line"><span class="lineno"> 4734</span>                <span class="keywordflow">if</span> (fno) <a class="code hl_function" href="ff_8c.html#a2bc1b9d8567181c23b4720f4fb6076f5">get_fileinfo</a>(&amp;dj, fno);</div>
<div class="line"><span class="lineno"> 4735</span>            }</div>
<div class="line"><span class="lineno"> 4736</span>        }</div>
<div class="line"><span class="lineno"> 4737</span>        <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 4738</span>    }</div>
<div class="line"><span class="lineno"> 4739</span> </div>
<div class="line"><span class="lineno"> 4740</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a>, res);</div>
<div class="line"><span class="lineno"> 4741</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad69c7246b122ba56a134939ee0eaf847" name="ad69c7246b122ba56a134939ee0eaf847"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad69c7246b122ba56a134939ee0eaf847">&#9670;&#160;</a></span>f_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_sync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04071">4071</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4074</span>{</div>
<div class="line"><span class="lineno"> 4075</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4076</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4077</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> tm;</div>
<div class="line"><span class="lineno"> 4078</span>    <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line"><span class="lineno"> 4079</span> </div>
<div class="line"><span class="lineno"> 4080</span> </div>
<div class="line"><span class="lineno"> 4081</span>    res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, &amp;fs);  <span class="comment">/* Check validity of the file object */</span></div>
<div class="line"><span class="lineno"> 4082</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4083</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>) {   <span class="comment">/* Is there any change to the file? */</span></div>
<div class="line"><span class="lineno"> 4084</span><span class="preprocessor">#if !FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4085</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>) {  <span class="comment">/* Write-back cached data if needed */</span></div>
<div class="line"><span class="lineno"> 4086</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4087</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 4088</span>            }</div>
<div class="line"><span class="lineno"> 4089</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4090</span>            <span class="comment">/* Update the directory entry */</span></div>
<div class="line"><span class="lineno"> 4091</span>            tm = <a class="code hl_define" href="ff_8c.html#a72589f5bbb514c0b222ab8b292764418">GET_FATTIME</a>();             <span class="comment">/* Modified time */</span></div>
<div class="line"><span class="lineno"> 4092</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4093</span>            <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 4094</span>                res = fill_first_frag(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj);    <span class="comment">/* Fill first fragment on the FAT if needed */</span></div>
<div class="line"><span class="lineno"> 4095</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4096</span>                    res = fill_last_frag(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust, 0xFFFFFFFF);  <span class="comment">/* Fill last fragment on the FAT if needed */</span></div>
<div class="line"><span class="lineno"> 4097</span>                }</div>
<div class="line"><span class="lineno"> 4098</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4099</span>                    <a class="code hl_struct" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line"><span class="lineno"> 4100</span>                    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 4101</span> </div>
<div class="line"><span class="lineno"> 4102</span>                    <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 4103</span>                    res = load_obj_xdir(&amp;dj, &amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj); <span class="comment">/* Load directory entry block */</span></div>
<div class="line"><span class="lineno"> 4104</span>                    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4105</span>                        fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#aafe8687fb9356906c13ccd9fe88eb3de">XDIR_Attr</a>] |= <a class="code hl_define" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;                <span class="comment">/* Set archive attribute to indicate that the file has been changed */</span></div>
<div class="line"><span class="lineno"> 4106</span>                        fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#ac3fd42ab7ee833b0e3683b1843d310d6">XDIR_GenFlags</a>] = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.stat | 1;   <span class="comment">/* Update file allocation information */</span></div>
<div class="line"><span class="lineno"> 4107</span>                        <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#ae08bbe65fd20259cb98c85ce08aa53cb">XDIR_FstClus</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust);        <span class="comment">/* Update start cluster */</span></div>
<div class="line"><span class="lineno"> 4108</span>                        st_qword(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#a899bf596ce53d81a373229662249f524">XDIR_FileSize</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize);      <span class="comment">/* Update file size */</span></div>
<div class="line"><span class="lineno"> 4109</span>                        st_qword(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#a543e2a11cefac978a0108a7973416d56">XDIR_ValidFileSize</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize); <span class="comment">/* (FatFs does not support Valid File Size feature) */</span></div>
<div class="line"><span class="lineno"> 4110</span>                        <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#aecb0af980a40b38b30dd0a736c8d6406">XDIR_ModTime</a>, tm);        <span class="comment">/* Update modified time */</span></div>
<div class="line"><span class="lineno"> 4111</span>                        fs-&gt;dirbuf[<a class="code hl_define" href="ff_8c.html#a0f63c605687d0ed66c633ba6a10c01e5">XDIR_ModTime10</a>] = 0;</div>
<div class="line"><span class="lineno"> 4112</span>                        <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(fs-&gt;dirbuf + <a class="code hl_define" href="ff_8c.html#af0a826e3f3902172e3ebd5a3132a0153">XDIR_AccTime</a>, 0);</div>
<div class="line"><span class="lineno"> 4113</span>                        res = store_xdir(&amp;dj);  <span class="comment">/* Restore it to the directory */</span></div>
<div class="line"><span class="lineno"> 4114</span>                        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4115</span>                            res = <a class="code hl_function" href="ff_8c.html#aec6b108298553219ebb2b960b528459d">sync_fs</a>(fs);</div>
<div class="line"><span class="lineno"> 4116</span>                            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>;</div>
<div class="line"><span class="lineno"> 4117</span>                        }</div>
<div class="line"><span class="lineno"> 4118</span>                    }</div>
<div class="line"><span class="lineno"> 4119</span>                    <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 4120</span>                }</div>
<div class="line"><span class="lineno"> 4121</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4122</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4123</span>            {</div>
<div class="line"><span class="lineno"> 4124</span>                res = <a class="code hl_function" href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a>(fs, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;dir_sect);</div>
<div class="line"><span class="lineno"> 4125</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4126</span>                    dir = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;dir_ptr;</div>
<div class="line"><span class="lineno"> 4127</span>                    dir[<a class="code hl_define" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] |= <a class="code hl_define" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;                        <span class="comment">/* Set archive attribute to indicate that the file has been changed */</span></div>
<div class="line"><span class="lineno"> 4128</span>                    <a class="code hl_function" href="ff_8c.html#a37c48dd3839cb11a440883ae331b4b7d">st_clust</a>(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.fs, dir, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust);      <span class="comment">/* Update file allocation information  */</span></div>
<div class="line"><span class="lineno"> 4129</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(dir + <a class="code hl_define" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize);   <span class="comment">/* Update file size */</span></div>
<div class="line"><span class="lineno"> 4130</span>                    <a class="code hl_function" href="ff_8c.html#af413a4e38a1ca8b203e332163d086d88">st_dword</a>(dir + <a class="code hl_define" href="ff_8c.html#aa136ac8eaf0b3febba999e37b7d01803">DIR_ModTime</a>, tm);                <span class="comment">/* Update modified time */</span></div>
<div class="line"><span class="lineno"> 4131</span>                    <a class="code hl_function" href="ff_8c.html#a2c55656b749270f0183938bc68f4e004">st_word</a>(dir + <a class="code hl_define" href="ff_8c.html#afa0625d73f4683df24345f51e7a43da3">DIR_LstAccDate</a>, 0);</div>
<div class="line"><span class="lineno"> 4132</span>                    fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 1;</div>
<div class="line"><span class="lineno"> 4133</span>                    res = <a class="code hl_function" href="ff_8c.html#aec6b108298553219ebb2b960b528459d">sync_fs</a>(fs);                  <span class="comment">/* Restore it to the directory */</span></div>
<div class="line"><span class="lineno"> 4134</span>                    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>;</div>
<div class="line"><span class="lineno"> 4135</span>                }</div>
<div class="line"><span class="lineno"> 4136</span>            }</div>
<div class="line"><span class="lineno"> 4137</span>        }</div>
<div class="line"><span class="lineno"> 4138</span>    }</div>
<div class="line"><span class="lineno"> 4139</span> </div>
<div class="line"><span class="lineno"> 4140</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4141</span>}</div>
<div class="ttc" id="aff_8c_html_a0f63c605687d0ed66c633ba6a10c01e5"><div class="ttname"><a href="ff_8c.html#a0f63c605687d0ed66c633ba6a10c01e5">XDIR_ModTime10</a></div><div class="ttdeci">#define XDIR_ModTime10</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00177">ff.c:177</a></div></div>
<div class="ttc" id="aff_8c_html_af0a826e3f3902172e3ebd5a3132a0153"><div class="ttname"><a href="ff_8c.html#af0a826e3f3902172e3ebd5a3132a0153">XDIR_AccTime</a></div><div class="ttdeci">#define XDIR_AccTime</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00175">ff.c:175</a></div></div>
<div class="ttc" id="aff_8c_html_afa0625d73f4683df24345f51e7a43da3"><div class="ttname"><a href="ff_8c.html#afa0625d73f4683df24345f51e7a43da3">DIR_LstAccDate</a></div><div class="ttdeci">#define DIR_LstAccDate</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l00156">ff.c:156</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a691a27b40c348f7c84b42e911636f38a" name="a691a27b40c348f7c84b42e911636f38a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a691a27b40c348f7c84b42e911636f38a">&#9670;&#160;</a></span>f_truncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04842">4842</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4845</span>{</div>
<div class="line"><span class="lineno"> 4846</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4847</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4848</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ncl;</div>
<div class="line"><span class="lineno"> 4849</span> </div>
<div class="line"><span class="lineno"> 4850</span> </div>
<div class="line"><span class="lineno"> 4851</span>    res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, &amp;fs);  <span class="comment">/* Check validity of the file object */</span></div>
<div class="line"><span class="lineno"> 4852</span>    <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> || (res = (<a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;err) != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4853</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>)) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);    <span class="comment">/* Check access mode */</span></div>
<div class="line"><span class="lineno"> 4854</span> </div>
<div class="line"><span class="lineno"> 4855</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr &lt; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize) {   <span class="comment">/* Process when fptr is not on the eof */</span></div>
<div class="line"><span class="lineno"> 4856</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr == 0) {    <span class="comment">/* When set file size to zero, remove entire cluster chain */</span></div>
<div class="line"><span class="lineno"> 4857</span>            res = <a class="code hl_function" href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust, 0);</div>
<div class="line"><span class="lineno"> 4858</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust = 0;</div>
<div class="line"><span class="lineno"> 4859</span>        } <span class="keywordflow">else</span> {                <span class="comment">/* When truncate a part of the file, remove remaining clusters */</span></div>
<div class="line"><span class="lineno"> 4860</span>            ncl = <a class="code hl_function" href="ff_8c.html#a646295b3567c3e29932fab442b1c90e4">get_fat</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust);</div>
<div class="line"><span class="lineno"> 4861</span>            res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line"><span class="lineno"> 4862</span>            <span class="keywordflow">if</span> (ncl == 0xFFFFFFFF) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line"><span class="lineno"> 4863</span>            <span class="keywordflow">if</span> (ncl == 1) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="lineno"> 4864</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; ncl &lt; fs-&gt;n_fatent) {</div>
<div class="line"><span class="lineno"> 4865</span>                res = <a class="code hl_function" href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, ncl, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust);</div>
<div class="line"><span class="lineno"> 4866</span>            }</div>
<div class="line"><span class="lineno"> 4867</span>        }</div>
<div class="line"><span class="lineno"> 4868</span>        <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr; <span class="comment">/* Set file size to current read/write point */</span></div>
<div class="line"><span class="lineno"> 4869</span>        <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag |= <a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>;</div>
<div class="line"><span class="lineno"> 4870</span><span class="preprocessor">#if !FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4871</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>)) {</div>
<div class="line"><span class="lineno"> 4872</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) {</div>
<div class="line"><span class="lineno"> 4873</span>                res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line"><span class="lineno"> 4874</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4875</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 4876</span>            }</div>
<div class="line"><span class="lineno"> 4877</span>        }</div>
<div class="line"><span class="lineno"> 4878</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4879</span>        <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4880</span>    }</div>
<div class="line"><span class="lineno"> 4881</span> </div>
<div class="line"><span class="lineno"> 4882</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4883</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2858167fcd0bced48e9be434b3895efe" name="a2858167fcd0bced48e9be434b3895efe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2858167fcd0bced48e9be434b3895efe">&#9670;&#160;</a></span>f_unlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_unlink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l04892">4892</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4895</span>{</div>
<div class="line"><span class="lineno"> 4896</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 4897</span>    <a class="code hl_struct" href="struct_d_i_r.html">DIR</a> dj, sdj;</div>
<div class="line"><span class="lineno"> 4898</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dclst = 0;</div>
<div class="line"><span class="lineno"> 4899</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 4900</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4901</span>    <a class="code hl_struct" href="struct_f_f_o_b_j_i_d.html">FFOBJID</a> obj;</div>
<div class="line"><span class="lineno"> 4902</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4903</span>    <a class="code hl_define" href="ff_8c.html#ad9aa172b1cf1d54aca234228a7ae8503">DEF_NAMBUF</a></div>
<div class="line"><span class="lineno"> 4904</span> </div>
<div class="line"><span class="lineno"> 4905</span> </div>
<div class="line"><span class="lineno"> 4906</span>    <span class="comment">/* Get logical drive */</span></div>
<div class="line"><span class="lineno"> 4907</span>    res = <a class="code hl_function" href="ff_8c.html#a36cd06cbee94b40df8f415ac7e1cb56c">mount_volume</a>(&amp;path, &amp;fs, <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>);</div>
<div class="line"><span class="lineno"> 4908</span>    <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4909</span>        dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 4910</span>        <a class="code hl_define" href="ff_8c.html#a9880dce2d33fe7708f982b5f80a31142">INIT_NAMBUF</a>(fs);</div>
<div class="line"><span class="lineno"> 4911</span>        res = <a class="code hl_function" href="ff_8c.html#af194524672491a522f041278b9b74e94">follow_path</a>(&amp;dj, path);       <span class="comment">/* Follow the file path */</span></div>
<div class="line"><span class="lineno"> 4912</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="ffconf_8h.html#af0d4b41a010f1a611bc6fb9e42357350">FF_FS_RPATH</a> &amp;&amp; res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>)) {</div>
<div class="line"><span class="lineno"> 4913</span>            res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;          <span class="comment">/* Cannot remove dot entry */</span></div>
<div class="line"><span class="lineno"> 4914</span>        }</div>
<div class="line"><span class="lineno"> 4915</span><span class="preprocessor">#if FF_FS_LOCK != 0</span></div>
<div class="line"><span class="lineno"> 4916</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code hl_function" href="ff_8c.html#aee054a7d05639ea60071f5e1246ef8c1">chk_lock</a>(&amp;dj, 2);   <span class="comment">/* Check if it is an open object */</span></div>
<div class="line"><span class="lineno"> 4917</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4918</span>        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                 <span class="comment">/* The object is accessible */</span></div>
<div class="line"><span class="lineno"> 4919</span>            <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#ad90d974c0e7640307598c586bf141b32">fn</a>[<a class="code hl_define" href="ff_8c.html#ad2306816015e67e72cfd0a20a880b227">NSFLAG</a>] &amp; <a class="code hl_define" href="ff_8c.html#a03a711029b966a7fad4f01e546b5e034">NS_NONAME</a>) {</div>
<div class="line"><span class="lineno"> 4920</span>                res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;      <span class="comment">/* Cannot remove the origin directory */</span></div>
<div class="line"><span class="lineno"> 4921</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4922</span>                <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; <a class="code hl_define" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>) {</div>
<div class="line"><span class="lineno"> 4923</span>                    res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;        <span class="comment">/* Cannot remove R/O object */</span></div>
<div class="line"><span class="lineno"> 4924</span>                }</div>
<div class="line"><span class="lineno"> 4925</span>            }</div>
<div class="line"><span class="lineno"> 4926</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4927</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4928</span>                obj.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;</div>
<div class="line"><span class="lineno"> 4929</span>                <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 4930</span>                    init_alloc_info(fs, &amp;obj);</div>
<div class="line"><span class="lineno"> 4931</span>                    dclst = obj.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a>;</div>
<div class="line"><span class="lineno"> 4932</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4933</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4934</span>                {</div>
<div class="line"><span class="lineno"> 4935</span>                    dclst = <a class="code hl_function" href="ff_8c.html#ad1b3343c92d0f0e58ba448c3c11b1f39">ld_clust</a>(fs, dj.<a class="code hl_variable" href="struct_d_i_r.html#a6c2a8c0cf2d55ae99775e93a16593449">dir</a>);</div>
<div class="line"><span class="lineno"> 4936</span>                }</div>
<div class="line"><span class="lineno"> 4937</span>                <span class="keywordflow">if</span> (dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ae9b1e6f98dbad367cc00f92b87f8d279">attr</a> &amp; <a class="code hl_define" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {         <span class="comment">/* Is it a sub-directory? */</span></div>
<div class="line"><span class="lineno"> 4938</span><span class="preprocessor">#if FF_FS_RPATH != 0</span></div>
<div class="line"><span class="lineno"> 4939</span>                    <span class="keywordflow">if</span> (dclst == fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a217d0ce0c8cec84aa7f0c142679412c6">cdir</a>) {        <span class="comment">/* Is it the current directory? */</span></div>
<div class="line"><span class="lineno"> 4940</span>                        res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line"><span class="lineno"> 4941</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4942</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4943</span>                    {</div>
<div class="line"><span class="lineno"> 4944</span>                        sdj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a867089659a2374d44ab917c60037fe5c">fs</a> = fs;            <span class="comment">/* Open the sub-directory */</span></div>
<div class="line"><span class="lineno"> 4945</span>                        sdj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#ad990393e2ddf16f73671ded4b751becb">sclust</a> = dclst;</div>
<div class="line"><span class="lineno"> 4946</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4947</span>                        <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> == <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) {</div>
<div class="line"><span class="lineno"> 4948</span>                            sdj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a83c51ba99687054f0cc653b45f195268">objsize</a> = obj.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#a83c51ba99687054f0cc653b45f195268">objsize</a>;</div>
<div class="line"><span class="lineno"> 4949</span>                            sdj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#aa7bfa8dd8958d11df042a67e1da25f63">stat</a> = obj.<a class="code hl_variable" href="struct_f_f_o_b_j_i_d.html#aa7bfa8dd8958d11df042a67e1da25f63">stat</a>;</div>
<div class="line"><span class="lineno"> 4950</span>                        }</div>
<div class="line"><span class="lineno"> 4951</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4952</span>                        res = <a class="code hl_function" href="ff_8c.html#acb185e466e88c95bdf91219f767d51f3">dir_sdi</a>(&amp;sdj, 0);</div>
<div class="line"><span class="lineno"> 4953</span>                        <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4954</span>                            res = <a class="code hl_define" href="ff_8c.html#a7dc00ac3fd99f0a14d6b7f3fc76b8778">DIR_READ_FILE</a>(&amp;sdj);          <span class="comment">/* Test if the directory is empty */</span></div>
<div class="line"><span class="lineno"> 4955</span>                            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;  <span class="comment">/* Not empty? */</span></div>
<div class="line"><span class="lineno"> 4956</span>                            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>; <span class="comment">/* Empty? */</span></div>
<div class="line"><span class="lineno"> 4957</span>                        }</div>
<div class="line"><span class="lineno"> 4958</span>                    }</div>
<div class="line"><span class="lineno"> 4959</span>                }</div>
<div class="line"><span class="lineno"> 4960</span>            }</div>
<div class="line"><span class="lineno"> 4961</span>            <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line"><span class="lineno"> 4962</span>                res = <a class="code hl_function" href="ff_8c.html#a724c260af4783a0ecf0db8d0687e7bd6">dir_remove</a>(&amp;dj);          <span class="comment">/* Remove the directory entry */</span></div>
<div class="line"><span class="lineno"> 4963</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; dclst != 0) {   <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line"><span class="lineno"> 4964</span><span class="preprocessor">#if FF_FS_EXFAT</span></div>
<div class="line"><span class="lineno"> 4965</span>                    res = <a class="code hl_function" href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a>(&amp;obj, dclst, 0);</div>
<div class="line"><span class="lineno"> 4966</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4967</span>                    res = <a class="code hl_function" href="ff_8c.html#af7e31794d8bbe9eeb098f9383ea0d448">remove_chain</a>(&amp;dj.<a class="code hl_variable" href="struct_d_i_r.html#a8fa2dfd8198410ea92a98281d982cf44">obj</a>, dclst, 0);</div>
<div class="line"><span class="lineno"> 4968</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4969</span>                }</div>
<div class="line"><span class="lineno"> 4970</span>                <span class="keywordflow">if</span> (res == <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code hl_function" href="ff_8c.html#aec6b108298553219ebb2b960b528459d">sync_fs</a>(fs);</div>
<div class="line"><span class="lineno"> 4971</span>            }</div>
<div class="line"><span class="lineno"> 4972</span>        }</div>
<div class="line"><span class="lineno"> 4973</span>        <a class="code hl_define" href="ff_8c.html#aa2d2dda6ad1a1ec4a09e5cb30ae40e2a">FREE_NAMBUF</a>();</div>
<div class="line"><span class="lineno"> 4974</span>    }</div>
<div class="line"><span class="lineno"> 4975</span> </div>
<div class="line"><span class="lineno"> 4976</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line"><span class="lineno"> 4977</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aafaa718d1a487e12a8f0087173dba0b9" name="aafaa718d1a487e12a8f0087173dba0b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafaa718d1a487e12a8f0087173dba0b9">&#9670;&#160;</a></span>f_utime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_utime </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae6a4dfae8a9e308bdb2283a37ef680f2" name="ae6a4dfae8a9e308bdb2283a37ef680f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6a4dfae8a9e308bdb2283a37ef680f2">&#9670;&#160;</a></span>f_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>btw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname"><em>bw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ff_8c_source.html#l03950">3950</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3956</span>{</div>
<div class="line"><span class="lineno"> 3957</span>    <a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"><span class="lineno"> 3958</span>    <a class="code hl_struct" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line"><span class="lineno"> 3959</span>    <a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst;</div>
<div class="line"><span class="lineno"> 3960</span>    <a class="code hl_typedef" href="ff_8h.html#a1f3c30a83148a28340f009d4e583f087">LBA_t</a> sect;</div>
<div class="line"><span class="lineno"> 3961</span>    <a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> wcnt, cc, csect;</div>
<div class="line"><span class="lineno"> 3962</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *wbuff = (<span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)buff;</div>
<div class="line"><span class="lineno"> 3963</span> </div>
<div class="line"><span class="lineno"> 3964</span> </div>
<div class="line"><span class="lineno"> 3965</span>    *bw = 0;    <span class="comment">/* Clear write byte counter */</span></div>
<div class="line"><span class="lineno"> 3966</span>    res = <a class="code hl_function" href="ff_8c.html#adea24eb73b81e5f0ae112b3376699565">validate</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, &amp;fs);          <span class="comment">/* Check validity of the file object */</span></div>
<div class="line"><span class="lineno"> 3967</span>    <span class="keywordflow">if</span> (res != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> || (res = (<a class="code hl_enumeration" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;err) != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);   <span class="comment">/* Check validity */</span></div>
<div class="line"><span class="lineno"> 3968</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>)) <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);    <span class="comment">/* Check access mode */</span></div>
<div class="line"><span class="lineno"> 3969</span> </div>
<div class="line"><span class="lineno"> 3970</span>    <span class="comment">/* Check fptr wrap-around (file size cannot reach 4 GiB at FAT volume) */</span></div>
<div class="line"><span class="lineno"> 3971</span>    <span class="keywordflow">if</span> ((!<a class="code hl_define" href="ffconf_8h.html#a4374b721b8019acc9761fdd8b829ccd0">FF_FS_EXFAT</a> || fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#add27d97babe807b573eac98a71dc4ae5">fs_type</a> != <a class="code hl_define" href="ff_8h.html#a50bfa912e87473bc54333523983f39f6">FS_EXFAT</a>) &amp;&amp; (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr + btw) &lt; (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr) {</div>
<div class="line"><span class="lineno"> 3972</span>        btw = (<a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)(0xFFFFFFFF - (<a class="code hl_typedef" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr);</div>
<div class="line"><span class="lineno"> 3973</span>    }</div>
<div class="line"><span class="lineno"> 3974</span> </div>
<div class="line"><span class="lineno"> 3975</span>    <span class="keywordflow">for</span> ( ; btw &gt; 0; btw -= wcnt, *bw += wcnt, wbuff += wcnt, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr += wcnt, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize = (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr &gt; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize) ? <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr : <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize) {  <span class="comment">/* Repeat until all data written */</span></div>
<div class="line"><span class="lineno"> 3976</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) == 0) {       <span class="comment">/* On the sector boundary? */</span></div>
<div class="line"><span class="lineno"> 3977</span>            csect = (<a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr / <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)) &amp; (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> - 1);    <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line"><span class="lineno"> 3978</span>            <span class="keywordflow">if</span> (csect == 0) {               <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line"><span class="lineno"> 3979</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr == 0) {        <span class="comment">/* On the top of the file? */</span></div>
<div class="line"><span class="lineno"> 3980</span>                    clst = <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust;  <span class="comment">/* Follow from the origin */</span></div>
<div class="line"><span class="lineno"> 3981</span>                    <span class="keywordflow">if</span> (clst == 0) {        <span class="comment">/* If no cluster is allocated, */</span></div>
<div class="line"><span class="lineno"> 3982</span>                        clst = <a class="code hl_function" href="ff_8c.html#a31672d266a18255892580984a708fd96">create_chain</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, 0);   <span class="comment">/* create a new cluster chain */</span></div>
<div class="line"><span class="lineno"> 3983</span>                    }</div>
<div class="line"><span class="lineno"> 3984</span>                } <span class="keywordflow">else</span> {                    <span class="comment">/* On the middle or end of the file */</span></div>
<div class="line"><span class="lineno"> 3985</span><span class="preprocessor">#if FF_USE_FASTSEEK</span></div>
<div class="line"><span class="lineno"> 3986</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;cltbl) {</div>
<div class="line"><span class="lineno"> 3987</span>                        clst = clmt_clust(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr);    <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line"><span class="lineno"> 3988</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3989</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3990</span>                    {</div>
<div class="line"><span class="lineno"> 3991</span>                        clst = <a class="code hl_function" href="ff_8c.html#a31672d266a18255892580984a708fd96">create_chain</a>(&amp;<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust);   <span class="comment">/* Follow or stretch cluster chain on the FAT */</span></div>
<div class="line"><span class="lineno"> 3992</span>                    }</div>
<div class="line"><span class="lineno"> 3993</span>                }</div>
<div class="line"><span class="lineno"> 3994</span>                <span class="keywordflow">if</span> (clst == 0) <span class="keywordflow">break</span>;       <span class="comment">/* Could not allocate a new cluster (disk full) */</span></div>
<div class="line"><span class="lineno"> 3995</span>                <span class="keywordflow">if</span> (clst == 1) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 3996</span>                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 3997</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust = clst;           <span class="comment">/* Update current cluster */</span></div>
<div class="line"><span class="lineno"> 3998</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust == 0) <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.sclust = clst; <span class="comment">/* Set start cluster if the first write */</span></div>
<div class="line"><span class="lineno"> 3999</span>            }</div>
<div class="line"><span class="lineno"> 4000</span><span class="preprocessor">#if FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4001</span>            <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a> == <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect &amp;&amp; <a class="code hl_function" href="ff_8c.html#a5e18753404354b210096f9af99e31bc1">sync_window</a>(fs) != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);    <span class="comment">/* Write-back sector cache */</span></div>
<div class="line"><span class="lineno"> 4002</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4003</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp; <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>) {      <span class="comment">/* Write-back sector cache */</span></div>
<div class="line"><span class="lineno"> 4004</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4005</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 4006</span>            }</div>
<div class="line"><span class="lineno"> 4007</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4008</span>            sect = <a class="code hl_function" href="ff_8c.html#a4c9686ac79b28c453a4d9fd7f0b53f9b">clst2sect</a>(fs, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;clust);    <span class="comment">/* Get current sector */</span></div>
<div class="line"><span class="lineno"> 4009</span>            <span class="keywordflow">if</span> (sect == 0) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"><span class="lineno"> 4010</span>            sect += csect;</div>
<div class="line"><span class="lineno"> 4011</span>            cc = btw / <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);              <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line"><span class="lineno"> 4012</span>            <span class="keywordflow">if</span> (cc &gt; 0) {                   <span class="comment">/* Write maximum contiguous sectors directly */</span></div>
<div class="line"><span class="lineno"> 4013</span>                <span class="keywordflow">if</span> (csect + cc &gt; fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a>) {   <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line"><span class="lineno"> 4014</span>                    cc = fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#ad7fa7a509f8d097a9ab182d6c47be568">csize</a> - csect;</div>
<div class="line"><span class="lineno"> 4015</span>                }</div>
<div class="line"><span class="lineno"> 4016</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="diskio_8h.html#ac24448955ef914f54a499df1fb45689d">disk_write</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, wbuff, sect, cc) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4017</span><span class="preprocessor">#if FF_FS_MINIMIZE &lt;= 2</span></div>
<div class="line"><span class="lineno"> 4018</span><span class="preprocessor">#if FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4019</span>                <span class="keywordflow">if</span> (fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a> - sect &lt; cc) {  <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line"><span class="lineno"> 4020</span>                    memcpy(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a>, wbuff + ((fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a> - sect) * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)), <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));</div>
<div class="line"><span class="lineno"> 4021</span>                    fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 0;</div>
<div class="line"><span class="lineno"> 4022</span>                }</div>
<div class="line"><span class="lineno"> 4023</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4024</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect - sect &lt; cc) { <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line"><span class="lineno"> 4025</span>                    memcpy(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, wbuff + ((<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect - sect) * <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)), <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs));</div>
<div class="line"><span class="lineno"> 4026</span>                    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag &amp;= (<a class="code hl_typedef" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~<a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 4027</span>                }</div>
<div class="line"><span class="lineno"> 4028</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4029</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4030</span>                wcnt = <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) * cc;     <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line"><span class="lineno"> 4031</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 4032</span>            }</div>
<div class="line"><span class="lineno"> 4033</span><span class="preprocessor">#if FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4034</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr &gt;= <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize) {  <span class="comment">/* Avoid silly cache filling on the growing edge */</span></div>
<div class="line"><span class="lineno"> 4035</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="ff_8c.html#a5e18753404354b210096f9af99e31bc1">sync_window</a>(fs) != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4036</span>                fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#aaf7eccaccdc9c4243230672d6b2f6566">winsect</a> = sect;</div>
<div class="line"><span class="lineno"> 4037</span>            }</div>
<div class="line"><span class="lineno"> 4038</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4039</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect != sect &amp;&amp;         <span class="comment">/* Fill sector cache with file data */</span></div>
<div class="line"><span class="lineno"> 4040</span>                <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr &lt; <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;obj.objsize &amp;&amp;</div>
<div class="line"><span class="lineno"> 4041</span>                <a class="code hl_function" href="diskio_8h.html#a0711b1d03b833e9d73b3be1a6397f461">disk_read</a>(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#acae426c920cd7f59e5883f948e1b3184">pdrv</a>, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf, sect, 1) != <a class="code hl_enumvalue" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) {</div>
<div class="line"><span class="lineno"> 4042</span>                    <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="lineno"> 4043</span>            }</div>
<div class="line"><span class="lineno"> 4044</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4045</span>            <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect = sect;</div>
<div class="line"><span class="lineno"> 4046</span>        }</div>
<div class="line"><span class="lineno"> 4047</span>        wcnt = <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) - (<a class="code hl_typedef" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);    <span class="comment">/* Number of bytes remains in the sector */</span></div>
<div class="line"><span class="lineno"> 4048</span>        <span class="keywordflow">if</span> (wcnt &gt; btw) wcnt = btw;                 <span class="comment">/* Clip it by btw if needed */</span></div>
<div class="line"><span class="lineno"> 4049</span><span class="preprocessor">#if FF_FS_TINY</span></div>
<div class="line"><span class="lineno"> 4050</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="ff_8c.html#a324c71e5b952dff3a420d72358e5168b">move_window</a>(fs, <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;sect) != <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code hl_define" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>); <span class="comment">/* Move sector window */</span></div>
<div class="line"><span class="lineno"> 4051</span>        memcpy(fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a49e9c5c3ae9c13755242b6ce5748ecb1">win</a> + <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs), wbuff, wcnt);   <span class="comment">/* Fit data to the sector */</span></div>
<div class="line"><span class="lineno"> 4052</span>        fs-&gt;<a class="code hl_variable" href="struct_f_a_t_f_s.html#a647e43c9ccae94b7274793d1909897de">wflag</a> = 1;</div>
<div class="line"><span class="lineno"> 4053</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4054</span>        memcpy(<a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;buf + <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;fptr % <a class="code hl_define" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs), wbuff, wcnt);   <span class="comment">/* Fit data to the sector */</span></div>
<div class="line"><span class="lineno"> 4055</span>        <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag |= <a class="code hl_define" href="ff_8c.html#affd69e5e6d205e09e1070b2f3c039072">FA_DIRTY</a>;</div>
<div class="line"><span class="lineno"> 4056</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4057</span>    }</div>
<div class="line"><span class="lineno"> 4058</span> </div>
<div class="line"><span class="lineno"> 4059</span>    <a class="code hl_variable" href="_file_io_8c.html#aa065f30aa9f5f9a42132c82c787ee70b">fp</a>-&gt;flag |= <a class="code hl_define" href="ff_8c.html#a9ae82de1b6841df9041411357f8d3eb5">FA_MODIFIED</a>;                <span class="comment">/* Set file change flag */</span></div>
<div class="line"><span class="lineno"> 4060</span> </div>
<div class="line"><span class="lineno"> 4061</span>    <a class="code hl_define" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, <a class="code hl_enumvalue" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line"><span class="lineno"> 4062</span>}</div>
<div class="ttc" id="aff_8c_html_a5e18753404354b210096f9af99e31bc1"><div class="ttname"><a href="ff_8c.html#a5e18753404354b210096f9af99e31bc1">sync_window</a></div><div class="ttdeci">static FRESULT sync_window(FATFS *fs)</div><div class="ttdef"><b>Definition</b> <a href="ff_8c_source.html#l01025">ff.c:1025</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae63913186246b80cfce42dbab9e8bcab" name="ae63913186246b80cfce42dbab9e8bcab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63913186246b80cfce42dbab9e8bcab">&#9670;&#160;</a></span>ff_memalloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * ff_memalloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>msize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ffsystem_8c_source.html#l00016">16</a> of file <a class="el" href="ffsystem_8c_source.html">ffsystem.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   19</span>{</div>
<div class="line"><span class="lineno">   20</span>    <span class="keywordflow">return</span> malloc(msize);   <span class="comment">/* Allocate a new memory block with POSIX API */</span></div>
<div class="line"><span class="lineno">   21</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab85fd090c8b8b17846ccc1e8cda16a9b" name="ab85fd090c8b8b17846ccc1e8cda16a9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab85fd090c8b8b17846ccc1e8cda16a9b">&#9670;&#160;</a></span>ff_memfree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ff_memfree </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>mblock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ffsystem_8c_source.html#l00028">28</a> of file <a class="el" href="ffsystem_8c_source.html">ffsystem.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>{</div>
<div class="line"><span class="lineno">   32</span>    free(mblock);   <span class="comment">/* Free the memory block with POSIX API */</span></div>
<div class="line"><span class="lineno">   33</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a52f09f31c84747cc135c90282509961a" name="a52f09f31c84747cc135c90282509961a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52f09f31c84747cc135c90282509961a">&#9670;&#160;</a></span>ff_oem2uni()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> ff_oem2uni </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a>&#160;</td>
          <td class="paramname"><em>oem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>&#160;</td>
          <td class="paramname"><em>cp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ffunicode_8c_source.html#l15244">15244</a> of file <a class="el" href="ffunicode_8c_source.html">ffunicode.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">15248</span>{</div>
<div class="line"><span class="lineno">15249</span>    <a class="code hl_typedef" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> = 0;</div>
<div class="line"><span class="lineno">15250</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> *p = <a class="code hl_define" href="ffunicode_8c.html#afcbf86dfddc068d1df5155276ffc8ef8">CVTBL</a>(uc, <a class="code hl_define" href="ffconf_8h.html#a56bf522419025961acdfaf6388f40402">FF_CODE_PAGE</a>);</div>
<div class="line"><span class="lineno">15251</span> </div>
<div class="line"><span class="lineno">15252</span> </div>
<div class="line"><span class="lineno">15253</span>    <span class="keywordflow">if</span> (oem &lt; 0x80) {   <span class="comment">/* ASCII? */</span></div>
<div class="line"><span class="lineno">15254</span>        <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> = oem;</div>
<div class="line"><span class="lineno">15255</span> </div>
<div class="line"><span class="lineno">15256</span>    } <span class="keywordflow">else</span> {            <span class="comment">/* Extended char */</span></div>
<div class="line"><span class="lineno">15257</span>        <span class="keywordflow">if</span> (cp == <a class="code hl_define" href="ffconf_8h.html#a56bf522419025961acdfaf6388f40402">FF_CODE_PAGE</a>) {   <span class="comment">/* Is it a valid code page? */</span></div>
<div class="line"><span class="lineno">15258</span>            <span class="keywordflow">if</span> (oem &lt; 0x100) <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> = p[oem - 0x80];</div>
<div class="line"><span class="lineno">15259</span>        }</div>
<div class="line"><span class="lineno">15260</span>    }</div>
<div class="line"><span class="lineno">15261</span> </div>
<div class="line"><span class="lineno">15262</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a>;</div>
<div class="line"><span class="lineno">15263</span>}</div>
<div class="ttc" id="affconf_8h_html_a56bf522419025961acdfaf6388f40402"><div class="ttname"><a href="ffconf_8h.html#a56bf522419025961acdfaf6388f40402">FF_CODE_PAGE</a></div><div class="ttdeci">#define FF_CODE_PAGE</div><div class="ttdef"><b>Definition</b> <a href="ffconf_8h_source.html#l00090">ffconf.h:90</a></div></div>
<div class="ttc" id="affunicode_8c_html_afcbf86dfddc068d1df5155276ffc8ef8"><div class="ttname"><a href="ffunicode_8c.html#afcbf86dfddc068d1df5155276ffc8ef8">CVTBL</a></div><div class="ttdeci">#define CVTBL(tbl, cp)</div><div class="ttdef"><b>Definition</b> <a href="ffunicode_8c_source.html#l00031">ffunicode.c:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72914966e82f8df3504a3659834f2abe" name="a72914966e82f8df3504a3659834f2abe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72914966e82f8df3504a3659834f2abe">&#9670;&#160;</a></span>ff_uni2oem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> ff_uni2oem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>uni</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>&#160;</td>
          <td class="paramname"><em>cp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ffunicode_8c_source.html#l15222">15222</a> of file <a class="el" href="ffunicode_8c_source.html">ffunicode.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">15226</span>{</div>
<div class="line"><span class="lineno">15227</span>    <a class="code hl_typedef" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> = 0;</div>
<div class="line"><span class="lineno">15228</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a> *p = <a class="code hl_define" href="ffunicode_8c.html#afcbf86dfddc068d1df5155276ffc8ef8">CVTBL</a>(uc, <a class="code hl_define" href="ffconf_8h.html#a56bf522419025961acdfaf6388f40402">FF_CODE_PAGE</a>);</div>
<div class="line"><span class="lineno">15229</span> </div>
<div class="line"><span class="lineno">15230</span> </div>
<div class="line"><span class="lineno">15231</span>    <span class="keywordflow">if</span> (uni &lt; 0x80) {   <span class="comment">/* ASCII? */</span></div>
<div class="line"><span class="lineno">15232</span>        <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> = (<a class="code hl_typedef" href="ff_8h.html#a0bb095da65fbe52192dd9e3e643c7568">WCHAR</a>)uni;</div>
<div class="line"><span class="lineno">15233</span> </div>
<div class="line"><span class="lineno">15234</span>    } <span class="keywordflow">else</span> {            <span class="comment">/* Non-ASCII */</span></div>
<div class="line"><span class="lineno">15235</span>        <span class="keywordflow">if</span> (uni &lt; 0x10000 &amp;&amp; cp == <a class="code hl_define" href="ffconf_8h.html#a56bf522419025961acdfaf6388f40402">FF_CODE_PAGE</a>) {  <span class="comment">/* Is it in BMP and valid code page? */</span></div>
<div class="line"><span class="lineno">15236</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> = 0; <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> &lt; 0x80 &amp;&amp; uni != p[<a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a>]; <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a>++) ;</div>
<div class="line"><span class="lineno">15237</span>            <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> = (<a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a> + 0x80) &amp; 0xFF;</div>
<div class="line"><span class="lineno">15238</span>        }</div>
<div class="line"><span class="lineno">15239</span>    }</div>
<div class="line"><span class="lineno">15240</span> </div>
<div class="line"><span class="lineno">15241</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="_common_8c.html#aaf5d342e977c5857e99310eea0e72e4b">c</a>;</div>
<div class="line"><span class="lineno">15242</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb0bf9acde41b603662ab45811cbc806" name="acb0bf9acde41b603662ab45811cbc806"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb0bf9acde41b603662ab45811cbc806">&#9670;&#160;</a></span>ff_wtoupper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ff_wtoupper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>uni</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ffunicode_8c_source.html#l15464">15464</a> of file <a class="el" href="ffunicode_8c_source.html">ffunicode.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">15467</span>{</div>
<div class="line"><span class="lineno">15468</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> *p;</div>
<div class="line"><span class="lineno">15469</span>    <a class="code hl_typedef" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> uc, bc, nc, <a class="code hl_variable" href="_f_t___gpu___hal_8h.html#aa100ba1ac19474bcd721a09f9b3da92f">cmd</a>;</div>
<div class="line"><span class="lineno">15470</span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> cvt1[] = {    <span class="comment">/* Compressed up conversion table for U+0000 - U+0FFF */</span></div>
<div class="line"><span class="lineno">15471</span>        <span class="comment">/* Basic Latin */</span></div>
<div class="line"><span class="lineno">15472</span>        0x0061,0x031A,</div>
<div class="line"><span class="lineno">15473</span>        <span class="comment">/* Latin-1 Supplement */</span></div>
<div class="line"><span class="lineno">15474</span>        0x00E0,0x0317,</div>
<div class="line"><span class="lineno">15475</span>        0x00F8,0x0307,</div>
<div class="line"><span class="lineno">15476</span>        0x00FF,0x0001,0x0178,</div>
<div class="line"><span class="lineno">15477</span>        <span class="comment">/* Latin Extended-A */</span></div>
<div class="line"><span class="lineno">15478</span>        0x0100,0x0130,</div>
<div class="line"><span class="lineno">15479</span>        0x0132,0x0106,</div>
<div class="line"><span class="lineno">15480</span>        0x0139,0x0110,</div>
<div class="line"><span class="lineno">15481</span>        0x014A,0x012E,</div>
<div class="line"><span class="lineno">15482</span>        0x0179,0x0106,</div>
<div class="line"><span class="lineno">15483</span>        <span class="comment">/* Latin Extended-B */</span></div>
<div class="line"><span class="lineno">15484</span>        0x0180,0x004D,0x0243,0x0181,0x0182,0x0182,0x0184,0x0184,0x0186,0x0187,0x0187,0x0189,0x018A,0x018B,0x018B,0x018D,0x018E,0x018F,0x0190,0x0191,0x0191,0x0193,0x0194,0x01F6,0x0196,0x0197,0x0198,0x0198,0x023D,0x019B,0x019C,0x019D,0x0220,0x019F,0x01A0,0x01A0,0x01A2,0x01A2,0x01A4,0x01A4,0x01A6,0x01A7,0x01A7,0x01A9,0x01AA,0x01AB,0x01AC,0x01AC,0x01AE,0x01AF,0x01AF,0x01B1,0x01B2,0x01B3,0x01B3,0x01B5,0x01B5,0x01B7,0x01B8,0x01B8,0x01BA,0x01BB,0x01BC,0x01BC,0x01BE,0x01F7,0x01C0,0x01C1,0x01C2,0x01C3,0x01C4,0x01C5,0x01C4,0x01C7,0x01C8,0x01C7,0x01CA,0x01CB,0x01CA,</div>
<div class="line"><span class="lineno">15485</span>        0x01CD,0x0110,</div>
<div class="line"><span class="lineno">15486</span>        0x01DD,0x0001,0x018E,</div>
<div class="line"><span class="lineno">15487</span>        0x01DE,0x0112,</div>
<div class="line"><span class="lineno">15488</span>        0x01F3,0x0003,0x01F1,0x01F4,0x01F4,</div>
<div class="line"><span class="lineno">15489</span>        0x01F8,0x0128,</div>
<div class="line"><span class="lineno">15490</span>        0x0222,0x0112,</div>
<div class="line"><span class="lineno">15491</span>        0x023A,0x0009,0x2C65,0x023B,0x023B,0x023D,0x2C66,0x023F,0x0240,0x0241,0x0241,</div>
<div class="line"><span class="lineno">15492</span>        0x0246,0x010A,</div>
<div class="line"><span class="lineno">15493</span>        <span class="comment">/* IPA Extensions */</span></div>
<div class="line"><span class="lineno">15494</span>        0x0253,0x0040,0x0181,0x0186,0x0255,0x0189,0x018A,0x0258,0x018F,0x025A,0x0190,0x025C,0x025D,0x025E,0x025F,0x0193,0x0261,0x0262,0x0194,0x0264,0x0265,0x0266,0x0267,0x0197,0x0196,0x026A,0x2C62,0x026C,0x026D,0x026E,0x019C,0x0270,0x0271,0x019D,0x0273,0x0274,0x019F,0x0276,0x0277,0x0278,0x0279,0x027A,0x027B,0x027C,0x2C64,0x027E,0x027F,0x01A6,0x0281,0x0282,0x01A9,0x0284,0x0285,0x0286,0x0287,0x01AE,0x0244,0x01B1,0x01B2,0x0245,0x028D,0x028E,0x028F,0x0290,0x0291,0x01B7,</div>
<div class="line"><span class="lineno">15495</span>        <span class="comment">/* Greek, Coptic */</span></div>
<div class="line"><span class="lineno">15496</span>        0x037B,0x0003,0x03FD,0x03FE,0x03FF,</div>
<div class="line"><span class="lineno">15497</span>        0x03AC,0x0004,0x0386,0x0388,0x0389,0x038A,</div>
<div class="line"><span class="lineno">15498</span>        0x03B1,0x0311,</div>
<div class="line"><span class="lineno">15499</span>        0x03C2,0x0002,0x03A3,0x03A3,</div>
<div class="line"><span class="lineno">15500</span>        0x03C4,0x0308,</div>
<div class="line"><span class="lineno">15501</span>        0x03CC,0x0003,0x038C,0x038E,0x038F,</div>
<div class="line"><span class="lineno">15502</span>        0x03D8,0x0118,</div>
<div class="line"><span class="lineno">15503</span>        0x03F2,0x000A,0x03F9,0x03F3,0x03F4,0x03F5,0x03F6,0x03F7,0x03F7,0x03F9,0x03FA,0x03FA,</div>
<div class="line"><span class="lineno">15504</span>        <span class="comment">/* Cyrillic */</span></div>
<div class="line"><span class="lineno">15505</span>        0x0430,0x0320,</div>
<div class="line"><span class="lineno">15506</span>        0x0450,0x0710,</div>
<div class="line"><span class="lineno">15507</span>        0x0460,0x0122,</div>
<div class="line"><span class="lineno">15508</span>        0x048A,0x0136,</div>
<div class="line"><span class="lineno">15509</span>        0x04C1,0x010E,</div>
<div class="line"><span class="lineno">15510</span>        0x04CF,0x0001,0x04C0,</div>
<div class="line"><span class="lineno">15511</span>        0x04D0,0x0144,</div>
<div class="line"><span class="lineno">15512</span>        <span class="comment">/* Armenian */</span></div>
<div class="line"><span class="lineno">15513</span>        0x0561,0x0426,</div>
<div class="line"><span class="lineno">15514</span> </div>
<div class="line"><span class="lineno">15515</span>        0x0000  <span class="comment">/* EOT */</span></div>
<div class="line"><span class="lineno">15516</span>    };</div>
<div class="line"><span class="lineno">15517</span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_typedef" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a> cvt2[] = {    <span class="comment">/* Compressed up conversion table for U+1000 - U+FFFF */</span></div>
<div class="line"><span class="lineno">15518</span>        <span class="comment">/* Phonetic Extensions */</span></div>
<div class="line"><span class="lineno">15519</span>        0x1D7D,0x0001,0x2C63,</div>
<div class="line"><span class="lineno">15520</span>        <span class="comment">/* Latin Extended Additional */</span></div>
<div class="line"><span class="lineno">15521</span>        0x1E00,0x0196,</div>
<div class="line"><span class="lineno">15522</span>        0x1EA0,0x015A,</div>
<div class="line"><span class="lineno">15523</span>        <span class="comment">/* Greek Extended */</span></div>
<div class="line"><span class="lineno">15524</span>        0x1F00,0x0608,</div>
<div class="line"><span class="lineno">15525</span>        0x1F10,0x0606,</div>
<div class="line"><span class="lineno">15526</span>        0x1F20,0x0608,</div>
<div class="line"><span class="lineno">15527</span>        0x1F30,0x0608,</div>
<div class="line"><span class="lineno">15528</span>        0x1F40,0x0606,</div>
<div class="line"><span class="lineno">15529</span>        0x1F51,0x0007,0x1F59,0x1F52,0x1F5B,0x1F54,0x1F5D,0x1F56,0x1F5F,</div>
<div class="line"><span class="lineno">15530</span>        0x1F60,0x0608,</div>
<div class="line"><span class="lineno">15531</span>        0x1F70,0x000E,0x1FBA,0x1FBB,0x1FC8,0x1FC9,0x1FCA,0x1FCB,0x1FDA,0x1FDB,0x1FF8,0x1FF9,0x1FEA,0x1FEB,0x1FFA,0x1FFB,</div>
<div class="line"><span class="lineno">15532</span>        0x1F80,0x0608,</div>
<div class="line"><span class="lineno">15533</span>        0x1F90,0x0608,</div>
<div class="line"><span class="lineno">15534</span>        0x1FA0,0x0608,</div>
<div class="line"><span class="lineno">15535</span>        0x1FB0,0x0004,0x1FB8,0x1FB9,0x1FB2,0x1FBC,</div>
<div class="line"><span class="lineno">15536</span>        0x1FCC,0x0001,0x1FC3,</div>
<div class="line"><span class="lineno">15537</span>        0x1FD0,0x0602,</div>
<div class="line"><span class="lineno">15538</span>        0x1FE0,0x0602,</div>
<div class="line"><span class="lineno">15539</span>        0x1FE5,0x0001,0x1FEC,</div>
<div class="line"><span class="lineno">15540</span>        0x1FF3,0x0001,0x1FFC,</div>
<div class="line"><span class="lineno">15541</span>        <span class="comment">/* Letterlike Symbols */</span></div>
<div class="line"><span class="lineno">15542</span>        0x214E,0x0001,0x2132,</div>
<div class="line"><span class="lineno">15543</span>        <span class="comment">/* Number forms */</span></div>
<div class="line"><span class="lineno">15544</span>        0x2170,0x0210,</div>
<div class="line"><span class="lineno">15545</span>        0x2184,0x0001,0x2183,</div>
<div class="line"><span class="lineno">15546</span>        <span class="comment">/* Enclosed Alphanumerics */</span></div>
<div class="line"><span class="lineno">15547</span>        0x24D0,0x051A,</div>
<div class="line"><span class="lineno">15548</span>        0x2C30,0x042F,</div>
<div class="line"><span class="lineno">15549</span>        <span class="comment">/* Latin Extended-C */</span></div>
<div class="line"><span class="lineno">15550</span>        0x2C60,0x0102,</div>
<div class="line"><span class="lineno">15551</span>        0x2C67,0x0106, 0x2C75,0x0102,</div>
<div class="line"><span class="lineno">15552</span>        <span class="comment">/* Coptic */</span></div>
<div class="line"><span class="lineno">15553</span>        0x2C80,0x0164,</div>
<div class="line"><span class="lineno">15554</span>        <span class="comment">/* Georgian Supplement */</span></div>
<div class="line"><span class="lineno">15555</span>        0x2D00,0x0826,</div>
<div class="line"><span class="lineno">15556</span>        <span class="comment">/* Full-width */</span></div>
<div class="line"><span class="lineno">15557</span>        0xFF41,0x031A,</div>
<div class="line"><span class="lineno">15558</span> </div>
<div class="line"><span class="lineno">15559</span>        0x0000  <span class="comment">/* EOT */</span></div>
<div class="line"><span class="lineno">15560</span>    };</div>
<div class="line"><span class="lineno">15561</span> </div>
<div class="line"><span class="lineno">15562</span> </div>
<div class="line"><span class="lineno">15563</span>    <span class="keywordflow">if</span> (uni &lt; 0x10000) {    <span class="comment">/* Is it in BMP? */</span></div>
<div class="line"><span class="lineno">15564</span>        uc = (<a class="code hl_typedef" href="ff_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)uni;</div>
<div class="line"><span class="lineno">15565</span>        p = uc &lt; 0x1000 ? cvt1 : cvt2;</div>
<div class="line"><span class="lineno">15566</span>        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">15567</span>            bc = *p++;                              <span class="comment">/* Get the block base */</span></div>
<div class="line"><span class="lineno">15568</span>            <span class="keywordflow">if</span> (bc == 0 || uc &lt; bc) <span class="keywordflow">break</span>;          <span class="comment">/* Not matched? */</span></div>
<div class="line"><span class="lineno">15569</span>            nc = *p++; <a class="code hl_variable" href="_f_t___gpu___hal_8h.html#aa100ba1ac19474bcd721a09f9b3da92f">cmd</a> = nc &gt;&gt; 8; nc &amp;= 0xFF;   <span class="comment">/* Get processing command and block size */</span></div>
<div class="line"><span class="lineno">15570</span>            <span class="keywordflow">if</span> (uc &lt; bc + nc) { <span class="comment">/* In the block? */</span></div>
<div class="line"><span class="lineno">15571</span>                <span class="keywordflow">switch</span> (<a class="code hl_variable" href="_f_t___gpu___hal_8h.html#aa100ba1ac19474bcd721a09f9b3da92f">cmd</a>) {</div>
<div class="line"><span class="lineno">15572</span>                <span class="keywordflow">case</span> 0: uc = p[uc - bc]; <span class="keywordflow">break</span>;     <span class="comment">/* Table conversion */</span></div>
<div class="line"><span class="lineno">15573</span>                <span class="keywordflow">case</span> 1: uc -= (uc - bc) &amp; 1; <span class="keywordflow">break</span>; <span class="comment">/* Case pairs */</span></div>
<div class="line"><span class="lineno">15574</span>                <span class="keywordflow">case</span> 2: uc -= 16; <span class="keywordflow">break</span>;            <span class="comment">/* Shift -16 */</span></div>
<div class="line"><span class="lineno">15575</span>                <span class="keywordflow">case</span> 3: uc -= 32; <span class="keywordflow">break</span>;            <span class="comment">/* Shift -32 */</span></div>
<div class="line"><span class="lineno">15576</span>                <span class="keywordflow">case</span> 4: uc -= 48; <span class="keywordflow">break</span>;            <span class="comment">/* Shift -48 */</span></div>
<div class="line"><span class="lineno">15577</span>                <span class="keywordflow">case</span> 5: uc -= 26; <span class="keywordflow">break</span>;            <span class="comment">/* Shift -26 */</span></div>
<div class="line"><span class="lineno">15578</span>                <span class="keywordflow">case</span> 6: uc += 8; <span class="keywordflow">break</span>;             <span class="comment">/* Shift +8 */</span></div>
<div class="line"><span class="lineno">15579</span>                <span class="keywordflow">case</span> 7: uc -= 80; <span class="keywordflow">break</span>;            <span class="comment">/* Shift -80 */</span></div>
<div class="line"><span class="lineno">15580</span>                <span class="keywordflow">case</span> 8: uc -= 0x1C60; <span class="keywordflow">break</span>;        <span class="comment">/* Shift -0x1C60 */</span></div>
<div class="line"><span class="lineno">15581</span>                }</div>
<div class="line"><span class="lineno">15582</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">15583</span>            }</div>
<div class="line"><span class="lineno">15584</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_f_t___gpu___hal_8h.html#aa100ba1ac19474bcd721a09f9b3da92f">cmd</a> == 0) p += nc;  <span class="comment">/* Skip table if needed */</span></div>
<div class="line"><span class="lineno">15585</span>        }</div>
<div class="line"><span class="lineno">15586</span>        uni = uc;</div>
<div class="line"><span class="lineno">15587</span>    }</div>
<div class="line"><span class="lineno">15588</span> </div>
<div class="line"><span class="lineno">15589</span>    <span class="keywordflow">return</span> uni;</div>
<div class="line"><span class="lineno">15590</span>}</div>
<div class="ttc" id="a_f_t___gpu___hal_8h_html_aa100ba1ac19474bcd721a09f9b3da92f"><div class="ttname"><a href="_f_t___gpu___hal_8h.html#aa100ba1ac19474bcd721a09f9b3da92f">cmd</a></div><div class="ttdeci">static ft_void_t ft_uint32_t * cmd</div><div class="ttdef"><b>Definition</b> <a href="_f_t___gpu___hal_8h_source.html#l00184">FT_Gpu_Hal.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_71f055263736dad0cc08a84146851531.html">application</a></li><li class="navelem"><a class="el" href="dir_9e15c2937f5bc972bacec875c47ce117.html">fatfs</a></li><li class="navelem"><a class="el" href="dir_4206eb708974a03132c31525016e1153.html">source</a></li><li class="navelem"><a class="el" href="ff_8h.html">ff.h</a></li>
    <div align="right">
    Copyright  Bridgetek Pte Ltd  
    </div>  
  </ul>
</div>
</body>
</html>
